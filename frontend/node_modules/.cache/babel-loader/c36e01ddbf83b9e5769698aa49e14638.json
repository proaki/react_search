{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _core = require('@emotion/core');\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _Slider = require('rheostat/lib/Slider');\n\nvar _Slider2 = _interopRequireDefault(_Slider);\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _HistogramContainer = require('./addons/HistogramContainer');\n\nvar _HistogramContainer2 = _interopRequireDefault(_HistogramContainer);\n\nvar _RangeLabel = require('./addons/RangeLabel');\n\nvar _RangeLabel2 = _interopRequireDefault(_RangeLabel);\n\nvar _SliderHandle = require('./addons/SliderHandle');\n\nvar _SliderHandle2 = _interopRequireDefault(_SliderHandle);\n\nvar _Slider3 = require('../../styles/Slider');\n\nvar _Slider4 = _interopRequireDefault(_Slider3);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Label = require('../../styles/Label');\n\nvar _utils = require('../../utils');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/** @jsx jsx */\n\n\nvar formatRange = function formatRange() {\n  var range = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return {\n    start: Math.floor(range.start),\n    end: Math.ceil(range.end)\n  };\n};\n\nvar DynamicRangeSlider = function (_Component) {\n  _inherits(DynamicRangeSlider, _Component);\n\n  function DynamicRangeSlider(props) {\n    _classCallCheck(this, DynamicRangeSlider);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.state = {\n      currentValue: null,\n      range: null,\n      stats: []\n    }; // Caution: Don't change the ids unnecessarily.\n    // If it's required then you need to update it in reactivecore(transform.js) too.\n\n    _this.internalHistogramComponent = _this.props.componentId + '__histogram__internal';\n    _this.internalRangeComponent = _this.props.componentId + '__range__internal';\n    _this.internalMatchAllComponent = _this.props.componentId + '__match_all__internal';\n    props.addComponent(props.componentId);\n    props.addComponent(_this.internalHistogramComponent);\n    props.addComponent(_this.internalRangeComponent);\n    props.setQueryListener(props.componentId, props.onQueryChange, null); // Update props in store\n\n    props.setComponentProps(props.componentId, props, _constants.componentTypes.dynamicRangeSlider);\n    props.setComponentProps(_this.internalHistogramComponent, props, _constants.componentTypes.dynamicRangeSlider);\n    props.setComponentProps(_this.internalRangeComponent, props, _constants.componentTypes.dynamicRangeSlider); // Set custom query in store\n\n    (0, _helper.updateCustomQuery)(props.componentId, props, _this.state.currentValue); // get range before executing other queries\n\n    _this.updateRangeQueryOptions(props);\n\n    return _this;\n  }\n\n  DynamicRangeSlider.getDerivedStateFromProps = function getDerivedStateFromProps(props, state) {\n    // Update the current value based on range to avoid the unnecessary API calls\n    if (!state.currentValue && props.range) {\n      var range = formatRange(props.range);\n\n      if (props.selectedValue) {\n        // selected value must be in limit\n        if (props.selectedValue[0] >= range.start && props.selectedValue[1] <= range.end) {\n          return {\n            currentValue: null\n          };\n        }\n\n        return {\n          currentValue: [range.start, range.end]\n        };\n      } else if (!(0, _helper.isEqual)(state.currentValue, [range.start, range.end])) {\n        // Just set the value for visibility don't apply as query or filter\n        return {\n          currentValue: [range.start, range.end]\n        };\n      }\n    }\n\n    return null;\n  };\n\n  DynamicRangeSlider.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var _this2 = this;\n\n    (0, _helper.checkSomePropChange)(this.props, prevProps, (0, _utils.getValidPropsKeys)(this.props), function () {\n      _this2.props.updateComponentProps(_this2.props.componentId, _this2.props, _constants.componentTypes.dynamicRangeSlider);\n\n      _this2.props.updateComponentProps(_this2.internalHistogramComponent, _this2.props, _constants.componentTypes.dynamicRangeSlider);\n\n      _this2.props.updateComponentProps(_this2.internalRangeComponent, _this2.props, _constants.componentTypes.dynamicRangeSlider);\n    });\n\n    if (!(0, _helper.isEqual)(this.props.range, prevProps.range) && this.props.range && this.props.range.start >= 0 && this.props.range.end > 0) {\n      // when range prop is changed\n      // it will happen due to initial mount (or) due to subscription\n      this.updateQueryOptions(this.props, this.props.range); // floor and ceil to take edge cases into account\n\n      this.updateRange(formatRange(this.props.range)); // only listen to selectedValue initially, after the\n      // component has mounted and range is received\n\n      if (this.props.selectedValue) {\n        this.handleChange(this.props.selectedValue);\n      } else {\n        this.handleChange();\n      }\n    } else if (this.props.range && !(0, _helper.isEqual)(this.props.value && this.props.value(this.props.range.start, this.props.range.end), prevProps.value && prevProps.value(this.props.range.start, this.props.range.end))) {\n      // when value prop is changed\n      var _props$value = this.props.value(this.props.range.start, this.props.range.end),\n          start = _props$value.start,\n          end = _props$value.end;\n\n      this.handleChange([start, end]);\n    } else if (this.props.range && this.props.selectedValue === null && prevProps.selectedValue) {\n      // when the filter is reset\n      this.handleChange();\n    }\n\n    (0, _helper.checkPropChange)(this.props.react, prevProps.react, function () {\n      _this2.updateRangeQueryOptions(_this2.props);\n\n      _this2.setReact(_this2.props);\n    });\n    (0, _helper.checkSomePropChange)(this.props, prevProps, ['dataField', 'nestedField'], function () {\n      _this2.updateRangeQueryOptions(_this2.props);\n    });\n    (0, _helper.checkSomePropChange)(this.props, prevProps, ['showHistogram', 'interval'], function () {\n      return _this2.updateQueryOptions(_this2.props, _this2.props.range || _this2.state.range);\n    });\n    (0, _helper.checkPropChange)(this.props.options, prevProps.options, function () {\n      var options = _this2.props.options;\n      options.sort(function (a, b) {\n        if (a.key < b.key) return -1;\n        if (a.key > b.key) return 1;\n        return 0;\n      });\n\n      _this2.setState({\n        stats: options\n      });\n    });\n  };\n\n  DynamicRangeSlider.prototype.componentDidMount = function componentDidMount() {\n    var _props = this.props,\n        enableAppbase = _props.enableAppbase,\n        index = _props.index;\n\n    if (!enableAppbase && index) {\n      console.warn('Warning(ReactiveSearch): In order to use the `index` prop, the `enableAppbase` prop must be set to true in `ReactiveBase`.');\n    }\n\n    this.setReact(this.props);\n  };\n\n  DynamicRangeSlider.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {\n    if (nextState.range) {\n      var upperLimit = Math.floor((nextState.range.end - nextState.range.start) / 2);\n\n      if (nextProps.stepValue < 1 || nextProps.stepValue > upperLimit) {\n        console.warn('stepValue for DynamicRangeSlider ' + nextProps.componentId + ' should be greater than 0 and less than or equal to ' + upperLimit);\n        return false;\n      }\n\n      return true;\n    }\n\n    return true;\n  };\n\n  DynamicRangeSlider.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.props.removeComponent(this.props.componentId);\n    this.props.removeComponent(this.internalHistogramComponent);\n    this.props.removeComponent(this.internalRangeComponent);\n    this.props.removeComponent(this.internalMatchAllComponent);\n  }; // value parser for SSR\n\n\n  DynamicRangeSlider.prototype.renderHistogram = function renderHistogram() {\n    if (this.props.isLoading && this.props.loader) {\n      return this.props.loader;\n    }\n\n    if (this.state.stats.length && this.props.showHistogram) {\n      return (0, _core.jsx)(_HistogramContainer2.default, {\n        stats: this.state.stats,\n        range: this.state.range,\n        interval: this.getValidInterval(this.props, this.state.range)\n      });\n    }\n\n    return null;\n  };\n\n  DynamicRangeSlider.prototype.render = function render() {\n    var _this3 = this;\n\n    if (!this.state.currentValue || !this.state.range || this.props.range.start === null) {\n      return null;\n    }\n\n    var _getRangeLabels = this.getRangeLabels(),\n        startLabel = _getRangeLabels.startLabel,\n        endLabel = _getRangeLabels.endLabel;\n\n    return (0, _core.jsx)(_Slider4.default, {\n      primary: true,\n      style: this.props.style,\n      className: this.props.className\n    }, this.props.title && (0, _core.jsx)(_Title2.default, {\n      className: (0, _helper.getClassName)(this.props.innerClass, 'title') || null\n    }, this.props.title), this.renderHistogram(), (0, _core.jsx)(_Slider2.default, {\n      min: this.state.range.start,\n      max: this.state.range.end,\n      values: this.state.currentValue,\n      onChange: this.handleSlider,\n      onValuesUpdated: this.handleDrag,\n      snap: this.props.snap,\n      snapPoints: this.props.snap ? this.getSnapPoints() : null,\n      className: (0, _helper.getClassName)(this.props.innerClass, 'slider'),\n      handle: function handle(_ref) {\n        var className = _ref.className,\n            style = _ref.style,\n            passProps = _objectWithoutProperties(_ref, ['className', 'style']);\n\n        return (0, _core.jsx)(_SliderHandle2.default, _extends({\n          style: style,\n          className: className\n        }, passProps, {\n          renderTooltipData: _this3.props.renderTooltipData,\n          tooltipTrigger: _this3.props.tooltipTrigger\n        }));\n      }\n    }), (0, _core.jsx)('div', {\n      css: _Label.rangeLabelsContainer\n    }, (0, _core.jsx)(_RangeLabel2.default, {\n      align: 'left',\n      className: (0, _helper.getClassName)(this.props.innerClass, 'label') || null\n    }, startLabel), (0, _core.jsx)(_RangeLabel2.default, {\n      align: 'right',\n      className: (0, _helper.getClassName)(this.props.innerClass, 'label') || null\n    }, endLabel)));\n  };\n\n  return DynamicRangeSlider;\n}(_react.Component);\n\nDynamicRangeSlider.parseValue = function (value) {\n  if (Array.isArray(value)) return value;\n  return value ? [value().start, value().end] : null;\n};\n\nDynamicRangeSlider.defaultQuery = function (value, props) {\n  var query = null;\n\n  if (Array.isArray(value) && value.length) {\n    query = (0, _utils.getRangeQueryWithNullValues)(value, props);\n  }\n\n  if (query && props.nestedField) {\n    return {\n      nested: {\n        path: props.nestedField,\n        query: query\n      }\n    };\n  }\n\n  return query;\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this4 = this;\n\n  this.setReact = function (props) {\n    var react = props.react;\n\n    if (react) {\n      props.watchComponent(_this4.internalRangeComponent, props.react);\n      var newReact = (0, _helper.pushToAndClause)(react, _this4.internalHistogramComponent);\n      props.watchComponent(props.componentId, newReact);\n    } else {\n      // internalRangeComponent watches internalMatchAll component allowing execution of query\n      // in case of no react prop\n      _this4.props.addComponent(_this4.internalMatchAllComponent);\n\n      props.setQueryOptions(_this4.internalMatchAllComponent, {\n        aggs: {\n          match_all: {}\n        }\n      }, false);\n      props.watchComponent(_this4.internalRangeComponent, {\n        and: _this4.internalMatchAllComponent\n      });\n      props.watchComponent(props.componentId, {\n        and: _this4.internalHistogramComponent\n      });\n    }\n  };\n\n  this.getSnapPoints = function () {\n    var snapPoints = [];\n    var stepValue = _this4.props.stepValue;\n    var range = _this4.state.range; // limit the number of steps to prevent generating a large number of snapPoints\n\n    if ((range.end - range.start) / stepValue > 100) {\n      stepValue = (range.end - range.start) / 100;\n    }\n\n    for (var i = range.start; i <= range.end; i += stepValue) {\n      snapPoints = snapPoints.concat(i);\n    }\n\n    if (snapPoints[snapPoints.length - 1] !== range.end) {\n      snapPoints = snapPoints.concat(range.end);\n    }\n\n    return snapPoints;\n  };\n\n  this.getValidInterval = function (props, range) {\n    var min = Math.ceil((range.end - range.start) / 100) || 1;\n\n    if (!props.interval) {\n      return min;\n    } else if (props.interval < min) {\n      console.error(props.componentId + ': interval prop\\'s value should be greater than or equal to ' + min);\n      return min;\n    }\n\n    return props.interval;\n  };\n\n  this.histogramQuery = function (props, range) {\n    var _query;\n\n    var query = (_query = {}, _query[props.dataField] = {\n      histogram: {\n        field: props.dataField,\n        interval: _this4.getValidInterval(props, range),\n        offset: range.start\n      }\n    }, _query);\n\n    if (props.nestedField) {\n      return {\n        inner: {\n          aggs: query,\n          nested: {\n            path: props.nestedField\n          }\n        }\n      };\n    }\n\n    return query;\n  };\n\n  this.rangeQuery = function (props) {\n    return {\n      min: {\n        min: {\n          field: props.dataField\n        }\n      },\n      max: {\n        max: {\n          field: props.dataField\n        }\n      }\n    };\n  };\n\n  this.handleChange = function (currentValue) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this4.props;\n    var normalizedValue = null;\n\n    if (currentValue) {\n      // always keep the values within range\n      normalizedValue = [currentValue[0] < props.range.start ? props.range.start : currentValue[0], currentValue[1] > props.range.end ? props.range.end : currentValue[1]];\n\n      if (props.range.start === null) {\n        normalizedValue = [currentValue[0], currentValue[1]];\n      }\n    }\n\n    var normalizedValues = normalizedValue ? [normalizedValue[0], normalizedValue[1]] : null;\n\n    var performUpdate = function performUpdate() {\n      _this4.setState({\n        currentValue: normalizedValue\n      }, function () {\n        // Only update the queries for dependent components when range is changed by input\n        _this4.updateQuery(normalizedValues, props);\n\n        if (props.onValueChange) props.onValueChange(normalizedValues);\n      });\n    };\n\n    (0, _helper.checkValueChange)(props.componentId, normalizedValues, props.beforeValueChange, performUpdate);\n  };\n\n  this.handleSlider = function (_ref2) {\n    var values = _ref2.values;\n\n    if (!(0, _helper.isEqual)(values, _this4.state.currentValue)) {\n      var _props2 = _this4.props,\n          value = _props2.value,\n          onChange = _props2.onChange;\n\n      if (value === undefined) {\n        _this4.handleChange(values);\n      } else if (onChange) {\n        onChange(values);\n      } else {\n        _this4.handleChange(values);\n      }\n    }\n  };\n\n  this.handleDrag = function (values) {\n    if (_this4.props.onDrag) {\n      var min = values.min,\n          max = values.max,\n          currentValue = values.values;\n\n      _this4.props.onDrag(currentValue, [min, max]);\n    }\n  };\n\n  this.updateQuery = function (value, props) {\n    var customQuery = props.customQuery;\n    var query = DynamicRangeSlider.defaultQuery(value, props);\n    var customQueryOptions = void 0;\n\n    if (customQuery) {\n      var _ref3 = customQuery(value, props) || {};\n\n      query = _ref3.query;\n      customQueryOptions = (0, _helper.getOptionsFromQuery)(customQuery(value, props));\n      (0, _helper.updateCustomQuery)(props.componentId, props, value);\n    }\n\n    var showFilter = props.showFilter;\n    props.setQueryOptions(props.componentId, customQueryOptions);\n    props.updateQuery({\n      componentId: props.componentId,\n      query: query,\n      value: value,\n      label: props.filterLabel,\n      showFilter: showFilter,\n      URLParams: props.URLParams,\n      componentType: _constants.componentTypes.dynamicRangeSlider\n    });\n  };\n\n  this.updateQueryOptions = function (props, range) {\n    if (props.showHistogram) {\n      var queryOptions = {\n        aggs: _this4.histogramQuery(props, range)\n      };\n      var customQuery = props.customQuery;\n      var query = props.customQuery || DynamicRangeSlider.defaultQuery;\n      var value = [range.start, range.end];\n      var customQueryOptions = customQuery ? (0, _helper.getOptionsFromQuery)(customQuery(value, props)) : null;\n      props.setQueryOptions(_this4.internalHistogramComponent, _extends({}, queryOptions, customQueryOptions), false);\n      props.updateQuery({\n        componentId: _this4.internalHistogramComponent,\n        query: query(value, props),\n        value: value\n      });\n    }\n  };\n\n  this.updateRange = function (range) {\n    _this4.setState({\n      range: range\n    });\n  };\n\n  this.updateRangeQueryOptions = function (props) {\n    var queryOptions = {};\n    var nestedField = props.nestedField;\n\n    if (nestedField) {\n      var _aggs;\n\n      queryOptions = {\n        aggs: (_aggs = {}, _aggs[nestedField] = {\n          nested: {\n            path: nestedField\n          },\n          aggs: _this4.rangeQuery(props)\n        }, _aggs)\n      };\n    } else {\n      queryOptions = {\n        aggs: _this4.rangeQuery(props)\n      };\n    }\n\n    props.setQueryOptions(_this4.internalRangeComponent, queryOptions);\n  };\n\n  this.getRangeLabels = function () {\n    var _state$range = _this4.state.range,\n        startLabel = _state$range.start,\n        endLabel = _state$range.end;\n\n    if (_this4.props.rangeLabels) {\n      var rangeLabels = _this4.props.rangeLabels(_this4.props.range.start, _this4.props.range.end);\n\n      startLabel = rangeLabels.start;\n      endLabel = rangeLabels.end;\n    }\n\n    return {\n      startLabel: startLabel,\n      endLabel: endLabel\n    };\n  };\n};\n\nDynamicRangeSlider.propTypes = {\n  addComponent: _types2.default.funcRequired,\n  removeComponent: _types2.default.funcRequired,\n  setQueryListener: _types2.default.funcRequired,\n  setQueryOptions: _types2.default.funcRequired,\n  updateQuery: _types2.default.funcRequired,\n  watchComponent: _types2.default.funcRequired,\n  options: _types2.default.options,\n  range: _types2.default.range,\n  selectedValue: _types2.default.selectedValue,\n  setComponentProps: _types2.default.funcRequired,\n  updateComponentProps: _types2.default.funcRequired,\n  isLoading: _types2.default.bool,\n  setCustomQuery: _types2.default.funcRequired,\n  enableAppbase: _types2.default.bool,\n  // component props\n  beforeValueChange: _types2.default.func,\n  className: _types2.default.string,\n  componentId: _types2.default.stringRequired,\n  customQuery: _types2.default.func,\n  dataField: _types2.default.stringRequired,\n  defaultValue: _types2.default.func,\n  value: _types2.default.func,\n  filterLabel: _types2.default.string,\n  innerClass: _types2.default.style,\n  interval: _types2.default.number,\n  loader: _types2.default.title,\n  nestedField: _types2.default.string,\n  onDrag: _types2.default.func,\n  onQueryChange: _types2.default.func,\n  onValueChange: _types2.default.func,\n  onChange: _types2.default.func,\n  rangeLabels: _types2.default.func,\n  react: _types2.default.react,\n  showHistogram: _types2.default.bool,\n  showFilter: _types2.default.bool,\n  tooltipTrigger: _types2.default.tooltipTrigger,\n  renderTooltipData: _types2.default.func,\n  snap: _types2.default.bool,\n  stepValue: _types2.default.number,\n  style: _types2.default.style,\n  title: _types2.default.title,\n  URLParams: _types2.default.bool,\n  includeNullValues: _types2.default.bool,\n  index: _types2.default.string\n};\nDynamicRangeSlider.defaultProps = {\n  className: null,\n  showHistogram: true,\n  tooltipTrigger: 'none',\n  snap: true,\n  stepValue: 1,\n  style: {},\n  URLParams: false,\n  showFilter: true,\n  includeNullValues: false\n}; // Add componentType for SSR\n\nDynamicRangeSlider.componentType = _constants.componentTypes.dynamicRangeSlider;\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  var aggregation = state.aggregations[props.componentId];\n\n  if (props.nestedField) {\n    aggregation = state.aggregations[props.componentId] && state.aggregations[props.componentId].inner;\n  }\n\n  var options = aggregation && aggregation[props.dataField];\n  var range = state.aggregations[props.componentId + '__range__internal'];\n\n  if (props.nestedField) {\n    options = options && aggregation[props.dataField] && aggregation[props.dataField].buckets ? aggregation[props.dataField].buckets : [];\n    range = range && state.aggregations[props.componentId + '__range__internal'][props.nestedField].min ? {\n      start: state.aggregations[props.componentId + '__range__internal'][props.nestedField].min.value,\n      end: state.aggregations[props.componentId + '__range__internal'][props.nestedField].max.value // prettier-ignore\n\n    } : null;\n  } else {\n    options = options && aggregation[props.dataField].buckets ? aggregation[props.dataField].buckets : [];\n    range = range && state.aggregations[props.componentId + '__range__internal'].min ? {\n      start: state.aggregations[props.componentId + '__range__internal'].min.value,\n      end: state.aggregations[props.componentId + '__range__internal'].max.value // prettier-ignore\n\n    } : null;\n  }\n\n  if (range) {\n    range = formatRange(range);\n  }\n\n  return {\n    options: options,\n    isLoading: state.isLoading[props.componentId],\n    range: range,\n    selectedValue: state.selectedValues[props.componentId] ? state.selectedValues[props.componentId].value : null,\n    enableAppbase: state.config.enableAppbase\n  };\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n  return {\n    setComponentProps: function setComponentProps(component, options, componentType) {\n      return dispatch((0, _actions.setComponentProps)(component, options, componentType));\n    },\n    setCustomQuery: function setCustomQuery(component, query) {\n      return dispatch((0, _actions.setCustomQuery)(component, query));\n    },\n    updateComponentProps: function updateComponentProps(component, options, componentType) {\n      return dispatch((0, _actions.updateComponentProps)(component, options, componentType));\n    },\n    addComponent: function addComponent(component) {\n      return dispatch((0, _actions.addComponent)(component));\n    },\n    removeComponent: function removeComponent(component) {\n      return dispatch((0, _actions.removeComponent)(component));\n    },\n    setQueryOptions: function setQueryOptions(component, props, execute) {\n      return dispatch((0, _actions.setQueryOptions)(component, props, execute));\n    },\n    setQueryListener: function setQueryListener(component, onQueryChange, beforeQueryChange) {\n      return dispatch((0, _actions.setQueryListener)(component, onQueryChange, beforeQueryChange));\n    },\n    updateQuery: function updateQuery(updateQueryObject, execute) {\n      return dispatch((0, _actions.updateQuery)(updateQueryObject, execute));\n    },\n    watchComponent: function watchComponent(component, react) {\n      return dispatch((0, _actions.watchComponent)(component, react));\n    }\n  };\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)(function (props) {\n  return (0, _core.jsx)(DynamicRangeSlider, _extends({\n    ref: props.myForwardedRef\n  }, props));\n}); // eslint-disable-next-line\n\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n  return (0, _core.jsx)(ConnectedComponent, _extends({}, props, {\n    myForwardedRef: ref\n  }));\n});\n\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, DynamicRangeSlider);\nForwardRefComponent.displayName = 'DynamicRangeSlider';\nexports.default = ForwardRefComponent;","map":{"version":3,"sources":["C:/Users/hiro/react_project/react_search/react_search/frontend/node_modules/@appbaseio/reactivesearch/lib/components/range/DynamicRangeSlider.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_core","require","_react","_react2","_interopRequireDefault","_actions","_hoistNonReactStatics","_hoistNonReactStatics2","_helper","_types","_types2","_Slider","_Slider2","_constants","_HistogramContainer","_HistogramContainer2","_RangeLabel","_RangeLabel2","_SliderHandle","_SliderHandle2","_Slider3","_Slider4","_Title","_Title2","_Label","_utils","obj","default","_objectWithoutProperties","keys","indexOf","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","formatRange","range","undefined","start","Math","floor","end","ceil","DynamicRangeSlider","_Component","props","_this","_initialiseProps","state","currentValue","stats","internalHistogramComponent","componentId","internalRangeComponent","internalMatchAllComponent","addComponent","setQueryListener","onQueryChange","setComponentProps","componentTypes","dynamicRangeSlider","updateCustomQuery","updateRangeQueryOptions","getDerivedStateFromProps","selectedValue","isEqual","componentDidUpdate","prevProps","_this2","checkSomePropChange","getValidPropsKeys","updateComponentProps","updateQueryOptions","updateRange","handleChange","_props$value","checkPropChange","react","setReact","options","sort","a","b","setState","componentDidMount","_props","enableAppbase","index","console","warn","shouldComponentUpdate","nextProps","nextState","upperLimit","stepValue","componentWillUnmount","removeComponent","renderHistogram","isLoading","loader","showHistogram","jsx","interval","getValidInterval","render","_this3","_getRangeLabels","getRangeLabels","startLabel","endLabel","primary","style","className","title","getClassName","innerClass","min","max","values","onChange","handleSlider","onValuesUpdated","handleDrag","snap","snapPoints","getSnapPoints","handle","_ref","passProps","renderTooltipData","tooltipTrigger","css","rangeLabelsContainer","align","Component","parseValue","Array","isArray","defaultQuery","query","getRangeQueryWithNullValues","nestedField","nested","path","_this4","watchComponent","newReact","pushToAndClause","setQueryOptions","aggs","match_all","and","concat","error","histogramQuery","_query","dataField","histogram","field","offset","inner","rangeQuery","normalizedValue","normalizedValues","performUpdate","updateQuery","onValueChange","checkValueChange","beforeValueChange","_ref2","_props2","onDrag","customQuery","customQueryOptions","_ref3","getOptionsFromQuery","showFilter","label","filterLabel","URLParams","componentType","queryOptions","_aggs","_state$range","rangeLabels","propTypes","funcRequired","bool","setCustomQuery","func","string","stringRequired","defaultValue","number","includeNullValues","defaultProps","mapStateToProps","aggregation","aggregations","buckets","selectedValues","config","mapDispatchtoProps","dispatch","component","execute","beforeQueryChange","updateQueryObject","ConnectedComponent","connect","ref","myForwardedRef","ForwardRefComponent","forwardRef","displayName"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _core = require('@emotion/core');\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _Slider = require('rheostat/lib/Slider');\n\nvar _Slider2 = _interopRequireDefault(_Slider);\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _HistogramContainer = require('./addons/HistogramContainer');\n\nvar _HistogramContainer2 = _interopRequireDefault(_HistogramContainer);\n\nvar _RangeLabel = require('./addons/RangeLabel');\n\nvar _RangeLabel2 = _interopRequireDefault(_RangeLabel);\n\nvar _SliderHandle = require('./addons/SliderHandle');\n\nvar _SliderHandle2 = _interopRequireDefault(_SliderHandle);\n\nvar _Slider3 = require('../../styles/Slider');\n\nvar _Slider4 = _interopRequireDefault(_Slider3);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Label = require('../../styles/Label');\n\nvar _utils = require('../../utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /** @jsx jsx */\n\n\nvar formatRange = function formatRange() {\n\tvar range = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\treturn {\n\t\tstart: Math.floor(range.start),\n\t\tend: Math.ceil(range.end)\n\t};\n};\n\nvar DynamicRangeSlider = function (_Component) {\n\t_inherits(DynamicRangeSlider, _Component);\n\n\tfunction DynamicRangeSlider(props) {\n\t\t_classCallCheck(this, DynamicRangeSlider);\n\n\t\tvar _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n\t\t_initialiseProps.call(_this);\n\n\t\t_this.state = {\n\t\t\tcurrentValue: null,\n\t\t\trange: null,\n\t\t\tstats: []\n\t\t};\n\n\t\t// Caution: Don't change the ids unnecessarily.\n\t\t// If it's required then you need to update it in reactivecore(transform.js) too.\n\t\t_this.internalHistogramComponent = _this.props.componentId + '__histogram__internal';\n\t\t_this.internalRangeComponent = _this.props.componentId + '__range__internal';\n\t\t_this.internalMatchAllComponent = _this.props.componentId + '__match_all__internal';\n\n\t\tprops.addComponent(props.componentId);\n\t\tprops.addComponent(_this.internalHistogramComponent);\n\t\tprops.addComponent(_this.internalRangeComponent);\n\t\tprops.setQueryListener(props.componentId, props.onQueryChange, null);\n\t\t// Update props in store\n\t\tprops.setComponentProps(props.componentId, props, _constants.componentTypes.dynamicRangeSlider);\n\t\tprops.setComponentProps(_this.internalHistogramComponent, props, _constants.componentTypes.dynamicRangeSlider);\n\t\tprops.setComponentProps(_this.internalRangeComponent, props, _constants.componentTypes.dynamicRangeSlider);\n\t\t// Set custom query in store\n\t\t(0, _helper.updateCustomQuery)(props.componentId, props, _this.state.currentValue);\n\t\t// get range before executing other queries\n\t\t_this.updateRangeQueryOptions(props);\n\t\treturn _this;\n\t}\n\n\tDynamicRangeSlider.getDerivedStateFromProps = function getDerivedStateFromProps(props, state) {\n\t\t// Update the current value based on range to avoid the unnecessary API calls\n\t\tif (!state.currentValue && props.range) {\n\t\t\tvar range = formatRange(props.range);\n\t\t\tif (props.selectedValue) {\n\t\t\t\t// selected value must be in limit\n\t\t\t\tif (props.selectedValue[0] >= range.start && props.selectedValue[1] <= range.end) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcurrentValue: null\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tcurrentValue: [range.start, range.end]\n\t\t\t\t};\n\t\t\t} else if (!(0, _helper.isEqual)(state.currentValue, [range.start, range.end])) {\n\t\t\t\t// Just set the value for visibility don't apply as query or filter\n\t\t\t\treturn {\n\t\t\t\t\tcurrentValue: [range.start, range.end]\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t};\n\n\tDynamicRangeSlider.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n\t\tvar _this2 = this;\n\n\t\t(0, _helper.checkSomePropChange)(this.props, prevProps, (0, _utils.getValidPropsKeys)(this.props), function () {\n\t\t\t_this2.props.updateComponentProps(_this2.props.componentId, _this2.props, _constants.componentTypes.dynamicRangeSlider);\n\t\t\t_this2.props.updateComponentProps(_this2.internalHistogramComponent, _this2.props, _constants.componentTypes.dynamicRangeSlider);\n\t\t\t_this2.props.updateComponentProps(_this2.internalRangeComponent, _this2.props, _constants.componentTypes.dynamicRangeSlider);\n\t\t});\n\t\tif (!(0, _helper.isEqual)(this.props.range, prevProps.range) && this.props.range && this.props.range.start >= 0 && this.props.range.end > 0) {\n\t\t\t// when range prop is changed\n\t\t\t// it will happen due to initial mount (or) due to subscription\n\t\t\tthis.updateQueryOptions(this.props, this.props.range);\n\t\t\t// floor and ceil to take edge cases into account\n\t\t\tthis.updateRange(formatRange(this.props.range));\n\n\t\t\t// only listen to selectedValue initially, after the\n\t\t\t// component has mounted and range is received\n\t\t\tif (this.props.selectedValue) {\n\t\t\t\tthis.handleChange(this.props.selectedValue);\n\t\t\t} else {\n\t\t\t\tthis.handleChange();\n\t\t\t}\n\t\t} else if (this.props.range && !(0, _helper.isEqual)(this.props.value && this.props.value(this.props.range.start, this.props.range.end), prevProps.value && prevProps.value(this.props.range.start, this.props.range.end))) {\n\t\t\t// when value prop is changed\n\t\t\tvar _props$value = this.props.value(this.props.range.start, this.props.range.end),\n\t\t\t    start = _props$value.start,\n\t\t\t    end = _props$value.end;\n\n\t\t\tthis.handleChange([start, end]);\n\t\t} else if (this.props.range && this.props.selectedValue === null && prevProps.selectedValue) {\n\t\t\t// when the filter is reset\n\t\t\tthis.handleChange();\n\t\t}\n\n\t\t(0, _helper.checkPropChange)(this.props.react, prevProps.react, function () {\n\t\t\t_this2.updateRangeQueryOptions(_this2.props);\n\t\t\t_this2.setReact(_this2.props);\n\t\t});\n\n\t\t(0, _helper.checkSomePropChange)(this.props, prevProps, ['dataField', 'nestedField'], function () {\n\t\t\t_this2.updateRangeQueryOptions(_this2.props);\n\t\t});\n\n\t\t(0, _helper.checkSomePropChange)(this.props, prevProps, ['showHistogram', 'interval'], function () {\n\t\t\treturn _this2.updateQueryOptions(_this2.props, _this2.props.range || _this2.state.range);\n\t\t});\n\n\t\t(0, _helper.checkPropChange)(this.props.options, prevProps.options, function () {\n\t\t\tvar options = _this2.props.options;\n\n\t\t\toptions.sort(function (a, b) {\n\t\t\t\tif (a.key < b.key) return -1;\n\t\t\t\tif (a.key > b.key) return 1;\n\t\t\t\treturn 0;\n\t\t\t});\n\t\t\t_this2.setState({\n\t\t\t\tstats: options\n\t\t\t});\n\t\t});\n\t};\n\n\tDynamicRangeSlider.prototype.componentDidMount = function componentDidMount() {\n\t\tvar _props = this.props,\n\t\t    enableAppbase = _props.enableAppbase,\n\t\t    index = _props.index;\n\n\t\tif (!enableAppbase && index) {\n\t\t\tconsole.warn('Warning(ReactiveSearch): In order to use the `index` prop, the `enableAppbase` prop must be set to true in `ReactiveBase`.');\n\t\t}\n\t\tthis.setReact(this.props);\n\t};\n\n\tDynamicRangeSlider.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {\n\t\tif (nextState.range) {\n\t\t\tvar upperLimit = Math.floor((nextState.range.end - nextState.range.start) / 2);\n\t\t\tif (nextProps.stepValue < 1 || nextProps.stepValue > upperLimit) {\n\t\t\t\tconsole.warn('stepValue for DynamicRangeSlider ' + nextProps.componentId + ' should be greater than 0 and less than or equal to ' + upperLimit);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn true;\n\t};\n\n\tDynamicRangeSlider.prototype.componentWillUnmount = function componentWillUnmount() {\n\t\tthis.props.removeComponent(this.props.componentId);\n\t\tthis.props.removeComponent(this.internalHistogramComponent);\n\t\tthis.props.removeComponent(this.internalRangeComponent);\n\t\tthis.props.removeComponent(this.internalMatchAllComponent);\n\t};\n\n\t// value parser for SSR\n\n\n\tDynamicRangeSlider.prototype.renderHistogram = function renderHistogram() {\n\t\tif (this.props.isLoading && this.props.loader) {\n\t\t\treturn this.props.loader;\n\t\t}\n\t\tif (this.state.stats.length && this.props.showHistogram) {\n\t\t\treturn (0, _core.jsx)(_HistogramContainer2.default, {\n\t\t\t\tstats: this.state.stats,\n\t\t\t\trange: this.state.range,\n\t\t\t\tinterval: this.getValidInterval(this.props, this.state.range)\n\t\t\t});\n\t\t}\n\t\treturn null;\n\t};\n\n\tDynamicRangeSlider.prototype.render = function render() {\n\t\tvar _this3 = this;\n\n\t\tif (!this.state.currentValue || !this.state.range || this.props.range.start === null) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar _getRangeLabels = this.getRangeLabels(),\n\t\t    startLabel = _getRangeLabels.startLabel,\n\t\t    endLabel = _getRangeLabels.endLabel;\n\n\t\treturn (0, _core.jsx)(\n\t\t\t_Slider4.default,\n\t\t\t{ primary: true, style: this.props.style, className: this.props.className },\n\t\t\tthis.props.title && (0, _core.jsx)(\n\t\t\t\t_Title2.default,\n\t\t\t\t{ className: (0, _helper.getClassName)(this.props.innerClass, 'title') || null },\n\t\t\t\tthis.props.title\n\t\t\t),\n\t\t\tthis.renderHistogram(),\n\t\t\t(0, _core.jsx)(_Slider2.default, {\n\t\t\t\tmin: this.state.range.start,\n\t\t\t\tmax: this.state.range.end,\n\t\t\t\tvalues: this.state.currentValue,\n\t\t\t\tonChange: this.handleSlider,\n\t\t\t\tonValuesUpdated: this.handleDrag,\n\t\t\t\tsnap: this.props.snap,\n\t\t\t\tsnapPoints: this.props.snap ? this.getSnapPoints() : null,\n\t\t\t\tclassName: (0, _helper.getClassName)(this.props.innerClass, 'slider'),\n\t\t\t\thandle: function handle(_ref) {\n\t\t\t\t\tvar className = _ref.className,\n\t\t\t\t\t    style = _ref.style,\n\t\t\t\t\t    passProps = _objectWithoutProperties(_ref, ['className', 'style']);\n\n\t\t\t\t\treturn (0, _core.jsx)(_SliderHandle2.default, _extends({\n\t\t\t\t\t\tstyle: style,\n\t\t\t\t\t\tclassName: className\n\t\t\t\t\t}, passProps, {\n\t\t\t\t\t\trenderTooltipData: _this3.props.renderTooltipData,\n\t\t\t\t\t\ttooltipTrigger: _this3.props.tooltipTrigger\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}),\n\t\t\t(0, _core.jsx)(\n\t\t\t\t'div',\n\t\t\t\t{ css: _Label.rangeLabelsContainer },\n\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t_RangeLabel2.default,\n\t\t\t\t\t{\n\t\t\t\t\t\talign: 'left',\n\t\t\t\t\t\tclassName: (0, _helper.getClassName)(this.props.innerClass, 'label') || null\n\t\t\t\t\t},\n\t\t\t\t\tstartLabel\n\t\t\t\t),\n\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t_RangeLabel2.default,\n\t\t\t\t\t{\n\t\t\t\t\t\talign: 'right',\n\t\t\t\t\t\tclassName: (0, _helper.getClassName)(this.props.innerClass, 'label') || null\n\t\t\t\t\t},\n\t\t\t\t\tendLabel\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t};\n\n\treturn DynamicRangeSlider;\n}(_react.Component);\n\nDynamicRangeSlider.parseValue = function (value) {\n\tif (Array.isArray(value)) return value;\n\treturn value ? [value().start, value().end] : null;\n};\n\nDynamicRangeSlider.defaultQuery = function (value, props) {\n\tvar query = null;\n\tif (Array.isArray(value) && value.length) {\n\t\tquery = (0, _utils.getRangeQueryWithNullValues)(value, props);\n\t}\n\n\tif (query && props.nestedField) {\n\t\treturn {\n\t\t\tnested: {\n\t\t\t\tpath: props.nestedField,\n\t\t\t\tquery: query\n\t\t\t}\n\t\t};\n\t}\n\n\treturn query;\n};\n\nvar _initialiseProps = function _initialiseProps() {\n\tvar _this4 = this;\n\n\tthis.setReact = function (props) {\n\t\tvar react = props.react;\n\n\t\tif (react) {\n\t\t\tprops.watchComponent(_this4.internalRangeComponent, props.react);\n\t\t\tvar newReact = (0, _helper.pushToAndClause)(react, _this4.internalHistogramComponent);\n\t\t\tprops.watchComponent(props.componentId, newReact);\n\t\t} else {\n\t\t\t// internalRangeComponent watches internalMatchAll component allowing execution of query\n\t\t\t// in case of no react prop\n\t\t\t_this4.props.addComponent(_this4.internalMatchAllComponent);\n\t\t\tprops.setQueryOptions(_this4.internalMatchAllComponent, { aggs: { match_all: {} } }, false);\n\t\t\tprops.watchComponent(_this4.internalRangeComponent, {\n\t\t\t\tand: _this4.internalMatchAllComponent\n\t\t\t});\n\t\t\tprops.watchComponent(props.componentId, {\n\t\t\t\tand: _this4.internalHistogramComponent\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.getSnapPoints = function () {\n\t\tvar snapPoints = [];\n\t\tvar stepValue = _this4.props.stepValue;\n\t\tvar range = _this4.state.range;\n\n\t\t// limit the number of steps to prevent generating a large number of snapPoints\n\n\t\tif ((range.end - range.start) / stepValue > 100) {\n\t\t\tstepValue = (range.end - range.start) / 100;\n\t\t}\n\n\t\tfor (var i = range.start; i <= range.end; i += stepValue) {\n\t\t\tsnapPoints = snapPoints.concat(i);\n\t\t}\n\t\tif (snapPoints[snapPoints.length - 1] !== range.end) {\n\t\t\tsnapPoints = snapPoints.concat(range.end);\n\t\t}\n\t\treturn snapPoints;\n\t};\n\n\tthis.getValidInterval = function (props, range) {\n\t\tvar min = Math.ceil((range.end - range.start) / 100) || 1;\n\t\tif (!props.interval) {\n\t\t\treturn min;\n\t\t} else if (props.interval < min) {\n\t\t\tconsole.error(props.componentId + ': interval prop\\'s value should be greater than or equal to ' + min);\n\t\t\treturn min;\n\t\t}\n\t\treturn props.interval;\n\t};\n\n\tthis.histogramQuery = function (props, range) {\n\t\tvar _query;\n\n\t\tvar query = (_query = {}, _query[props.dataField] = {\n\t\t\thistogram: {\n\t\t\t\tfield: props.dataField,\n\t\t\t\tinterval: _this4.getValidInterval(props, range),\n\t\t\t\toffset: range.start\n\t\t\t}\n\t\t}, _query);\n\t\tif (props.nestedField) {\n\t\t\treturn {\n\t\t\t\tinner: {\n\t\t\t\t\taggs: query,\n\t\t\t\t\tnested: {\n\t\t\t\t\t\tpath: props.nestedField\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\treturn query;\n\t};\n\n\tthis.rangeQuery = function (props) {\n\t\treturn {\n\t\t\tmin: { min: { field: props.dataField } },\n\t\t\tmax: { max: { field: props.dataField } }\n\t\t};\n\t};\n\n\tthis.handleChange = function (currentValue) {\n\t\tvar props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this4.props;\n\n\t\tvar normalizedValue = null;\n\t\tif (currentValue) {\n\t\t\t// always keep the values within range\n\t\t\tnormalizedValue = [currentValue[0] < props.range.start ? props.range.start : currentValue[0], currentValue[1] > props.range.end ? props.range.end : currentValue[1]];\n\t\t\tif (props.range.start === null) {\n\t\t\t\tnormalizedValue = [currentValue[0], currentValue[1]];\n\t\t\t}\n\t\t}\n\t\tvar normalizedValues = normalizedValue ? [normalizedValue[0], normalizedValue[1]] : null;\n\t\tvar performUpdate = function performUpdate() {\n\t\t\t_this4.setState({\n\t\t\t\tcurrentValue: normalizedValue\n\t\t\t}, function () {\n\t\t\t\t// Only update the queries for dependent components when range is changed by input\n\t\t\t\t_this4.updateQuery(normalizedValues, props);\n\t\t\t\tif (props.onValueChange) props.onValueChange(normalizedValues);\n\t\t\t});\n\t\t};\n\t\t(0, _helper.checkValueChange)(props.componentId, normalizedValues, props.beforeValueChange, performUpdate);\n\t};\n\n\tthis.handleSlider = function (_ref2) {\n\t\tvar values = _ref2.values;\n\n\t\tif (!(0, _helper.isEqual)(values, _this4.state.currentValue)) {\n\t\t\tvar _props2 = _this4.props,\n\t\t\t    value = _props2.value,\n\t\t\t    onChange = _props2.onChange;\n\n\t\t\tif (value === undefined) {\n\t\t\t\t_this4.handleChange(values);\n\t\t\t} else if (onChange) {\n\t\t\t\tonChange(values);\n\t\t\t} else {\n\t\t\t\t_this4.handleChange(values);\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.handleDrag = function (values) {\n\t\tif (_this4.props.onDrag) {\n\t\t\tvar min = values.min,\n\t\t\t    max = values.max,\n\t\t\t    currentValue = values.values;\n\n\t\t\t_this4.props.onDrag(currentValue, [min, max]);\n\t\t}\n\t};\n\n\tthis.updateQuery = function (value, props) {\n\t\tvar customQuery = props.customQuery;\n\n\t\tvar query = DynamicRangeSlider.defaultQuery(value, props);\n\t\tvar customQueryOptions = void 0;\n\t\tif (customQuery) {\n\t\t\tvar _ref3 = customQuery(value, props) || {};\n\n\t\t\tquery = _ref3.query;\n\n\t\t\tcustomQueryOptions = (0, _helper.getOptionsFromQuery)(customQuery(value, props));\n\t\t\t(0, _helper.updateCustomQuery)(props.componentId, props, value);\n\t\t}\n\t\tvar showFilter = props.showFilter;\n\n\t\tprops.setQueryOptions(props.componentId, customQueryOptions);\n\n\t\tprops.updateQuery({\n\t\t\tcomponentId: props.componentId,\n\t\t\tquery: query,\n\t\t\tvalue: value,\n\t\t\tlabel: props.filterLabel,\n\t\t\tshowFilter: showFilter,\n\t\t\tURLParams: props.URLParams,\n\t\t\tcomponentType: _constants.componentTypes.dynamicRangeSlider\n\t\t});\n\t};\n\n\tthis.updateQueryOptions = function (props, range) {\n\t\tif (props.showHistogram) {\n\t\t\tvar queryOptions = {\n\t\t\t\taggs: _this4.histogramQuery(props, range)\n\t\t\t};\n\t\t\tvar customQuery = props.customQuery;\n\n\n\t\t\tvar query = props.customQuery || DynamicRangeSlider.defaultQuery;\n\t\t\tvar value = [range.start, range.end];\n\t\t\tvar customQueryOptions = customQuery ? (0, _helper.getOptionsFromQuery)(customQuery(value, props)) : null;\n\t\t\tprops.setQueryOptions(_this4.internalHistogramComponent, _extends({}, queryOptions, customQueryOptions), false);\n\t\t\tprops.updateQuery({\n\t\t\t\tcomponentId: _this4.internalHistogramComponent,\n\t\t\t\tquery: query(value, props),\n\t\t\t\tvalue: value\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.updateRange = function (range) {\n\t\t_this4.setState({\n\t\t\trange: range\n\t\t});\n\t};\n\n\tthis.updateRangeQueryOptions = function (props) {\n\t\tvar queryOptions = {};\n\t\tvar nestedField = props.nestedField;\n\n\t\tif (nestedField) {\n\t\t\tvar _aggs;\n\n\t\t\tqueryOptions = {\n\t\t\t\taggs: (_aggs = {}, _aggs[nestedField] = {\n\t\t\t\t\tnested: {\n\t\t\t\t\t\tpath: nestedField\n\t\t\t\t\t},\n\t\t\t\t\taggs: _this4.rangeQuery(props)\n\t\t\t\t}, _aggs)\n\t\t\t};\n\t\t} else {\n\t\t\tqueryOptions = {\n\t\t\t\taggs: _this4.rangeQuery(props)\n\t\t\t};\n\t\t}\n\n\t\tprops.setQueryOptions(_this4.internalRangeComponent, queryOptions);\n\t};\n\n\tthis.getRangeLabels = function () {\n\t\tvar _state$range = _this4.state.range,\n\t\t    startLabel = _state$range.start,\n\t\t    endLabel = _state$range.end;\n\n\n\t\tif (_this4.props.rangeLabels) {\n\t\t\tvar rangeLabels = _this4.props.rangeLabels(_this4.props.range.start, _this4.props.range.end);\n\t\t\tstartLabel = rangeLabels.start;\n\t\t\tendLabel = rangeLabels.end;\n\t\t}\n\n\t\treturn {\n\t\t\tstartLabel: startLabel,\n\t\t\tendLabel: endLabel\n\t\t};\n\t};\n};\n\nDynamicRangeSlider.propTypes = {\n\taddComponent: _types2.default.funcRequired,\n\tremoveComponent: _types2.default.funcRequired,\n\tsetQueryListener: _types2.default.funcRequired,\n\tsetQueryOptions: _types2.default.funcRequired,\n\tupdateQuery: _types2.default.funcRequired,\n\twatchComponent: _types2.default.funcRequired,\n\toptions: _types2.default.options,\n\trange: _types2.default.range,\n\tselectedValue: _types2.default.selectedValue,\n\tsetComponentProps: _types2.default.funcRequired,\n\tupdateComponentProps: _types2.default.funcRequired,\n\tisLoading: _types2.default.bool,\n\tsetCustomQuery: _types2.default.funcRequired,\n\tenableAppbase: _types2.default.bool,\n\t// component props\n\tbeforeValueChange: _types2.default.func,\n\tclassName: _types2.default.string,\n\tcomponentId: _types2.default.stringRequired,\n\tcustomQuery: _types2.default.func,\n\tdataField: _types2.default.stringRequired,\n\tdefaultValue: _types2.default.func,\n\tvalue: _types2.default.func,\n\tfilterLabel: _types2.default.string,\n\tinnerClass: _types2.default.style,\n\tinterval: _types2.default.number,\n\tloader: _types2.default.title,\n\tnestedField: _types2.default.string,\n\tonDrag: _types2.default.func,\n\tonQueryChange: _types2.default.func,\n\tonValueChange: _types2.default.func,\n\tonChange: _types2.default.func,\n\trangeLabels: _types2.default.func,\n\treact: _types2.default.react,\n\tshowHistogram: _types2.default.bool,\n\tshowFilter: _types2.default.bool,\n\ttooltipTrigger: _types2.default.tooltipTrigger,\n\trenderTooltipData: _types2.default.func,\n\tsnap: _types2.default.bool,\n\tstepValue: _types2.default.number,\n\tstyle: _types2.default.style,\n\ttitle: _types2.default.title,\n\tURLParams: _types2.default.bool,\n\tincludeNullValues: _types2.default.bool,\n\tindex: _types2.default.string\n};\n\nDynamicRangeSlider.defaultProps = {\n\tclassName: null,\n\tshowHistogram: true,\n\ttooltipTrigger: 'none',\n\tsnap: true,\n\tstepValue: 1,\n\tstyle: {},\n\tURLParams: false,\n\tshowFilter: true,\n\tincludeNullValues: false\n};\n\n// Add componentType for SSR\nDynamicRangeSlider.componentType = _constants.componentTypes.dynamicRangeSlider;\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n\tvar aggregation = state.aggregations[props.componentId];\n\tif (props.nestedField) {\n\t\taggregation = state.aggregations[props.componentId] && state.aggregations[props.componentId].inner;\n\t}\n\tvar options = aggregation && aggregation[props.dataField];\n\tvar range = state.aggregations[props.componentId + '__range__internal'];\n\tif (props.nestedField) {\n\t\toptions = options && aggregation[props.dataField] && aggregation[props.dataField].buckets ? aggregation[props.dataField].buckets : [];\n\t\trange = range && state.aggregations[props.componentId + '__range__internal'][props.nestedField].min ? {\n\t\t\tstart: state.aggregations[props.componentId + '__range__internal'][props.nestedField].min.value,\n\t\t\tend: state.aggregations[props.componentId + '__range__internal'][props.nestedField].max.value // prettier-ignore\n\t\t} : null;\n\t} else {\n\t\toptions = options && aggregation[props.dataField].buckets ? aggregation[props.dataField].buckets : [];\n\t\trange = range && state.aggregations[props.componentId + '__range__internal'].min ? {\n\t\t\tstart: state.aggregations[props.componentId + '__range__internal'].min.value,\n\t\t\tend: state.aggregations[props.componentId + '__range__internal'].max.value // prettier-ignore\n\t\t} : null;\n\t}\n\tif (range) {\n\t\trange = formatRange(range);\n\t}\n\treturn {\n\t\toptions: options,\n\t\tisLoading: state.isLoading[props.componentId],\n\t\trange: range,\n\t\tselectedValue: state.selectedValues[props.componentId] ? state.selectedValues[props.componentId].value : null,\n\t\tenableAppbase: state.config.enableAppbase\n\t};\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n\treturn {\n\t\tsetComponentProps: function setComponentProps(component, options, componentType) {\n\t\t\treturn dispatch((0, _actions.setComponentProps)(component, options, componentType));\n\t\t},\n\t\tsetCustomQuery: function setCustomQuery(component, query) {\n\t\t\treturn dispatch((0, _actions.setCustomQuery)(component, query));\n\t\t},\n\t\tupdateComponentProps: function updateComponentProps(component, options, componentType) {\n\t\t\treturn dispatch((0, _actions.updateComponentProps)(component, options, componentType));\n\t\t},\n\t\taddComponent: function addComponent(component) {\n\t\t\treturn dispatch((0, _actions.addComponent)(component));\n\t\t},\n\t\tremoveComponent: function removeComponent(component) {\n\t\t\treturn dispatch((0, _actions.removeComponent)(component));\n\t\t},\n\t\tsetQueryOptions: function setQueryOptions(component, props, execute) {\n\t\t\treturn dispatch((0, _actions.setQueryOptions)(component, props, execute));\n\t\t},\n\t\tsetQueryListener: function setQueryListener(component, onQueryChange, beforeQueryChange) {\n\t\t\treturn dispatch((0, _actions.setQueryListener)(component, onQueryChange, beforeQueryChange));\n\t\t},\n\t\tupdateQuery: function updateQuery(updateQueryObject, execute) {\n\t\t\treturn dispatch((0, _actions.updateQuery)(updateQueryObject, execute));\n\t\t},\n\t\twatchComponent: function watchComponent(component, react) {\n\t\t\treturn dispatch((0, _actions.watchComponent)(component, react));\n\t\t}\n\t};\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)(function (props) {\n\treturn (0, _core.jsx)(DynamicRangeSlider, _extends({ ref: props.myForwardedRef }, props));\n});\n\n// eslint-disable-next-line\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n\treturn (0, _core.jsx)(ConnectedComponent, _extends({}, props, { myForwardedRef: ref }));\n});\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, DynamicRangeSlider);\n\nForwardRefComponent.displayName = 'DynamicRangeSlider';\nexports.default = ForwardRefComponent;"]},"metadata":{},"sourceType":"script"}