{"ast":null,"code":"Object.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getDependentQueries = exports.extractPropsFromState = exports.getValidInterval = exports.getRSQuery = exports.hasPaginationSupport = exports.isComponentUsesLabelAsValue = exports.isSearchComponent = exports.isDRSRangeComponent = exports.getHistogramComponentID = exports.getInternalComponentID = exports.isInternalComponent = exports.getNormalizedField = exports.componentToTypeMap = undefined;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _componentToTypeMap;\n\nexports.flatReactProp = flatReactProp;\n\nvar _xdate = require('xdate');\n\nvar _xdate2 = _interopRequireDefault(_xdate);\n\nvar _constants = require('./constants');\n\nvar _helper = require('./helper');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar componentToTypeMap = exports.componentToTypeMap = (_componentToTypeMap = {}, _defineProperty(_componentToTypeMap, _constants.componentTypes.reactiveList, _constants.queryTypes.search), _defineProperty(_componentToTypeMap, _constants.componentTypes.dataSearch, _constants.queryTypes.search), _defineProperty(_componentToTypeMap, _constants.componentTypes.categorySearch, _constants.queryTypes.search), _defineProperty(_componentToTypeMap, _constants.componentTypes.singleList, _constants.queryTypes.term), _defineProperty(_componentToTypeMap, _constants.componentTypes.multiList, _constants.queryTypes.term), _defineProperty(_componentToTypeMap, _constants.componentTypes.singleDataList, _constants.queryTypes.term), _defineProperty(_componentToTypeMap, _constants.componentTypes.singleDropdownList, _constants.queryTypes.term), _defineProperty(_componentToTypeMap, _constants.componentTypes.multiDataList, _constants.queryTypes.term), _defineProperty(_componentToTypeMap, _constants.componentTypes.multiDropdownList, _constants.queryTypes.term), _defineProperty(_componentToTypeMap, _constants.componentTypes.tagCloud, _constants.queryTypes.term), _defineProperty(_componentToTypeMap, _constants.componentTypes.toggleButton, _constants.queryTypes.term), _defineProperty(_componentToTypeMap, _constants.componentTypes.numberBox, _constants.queryTypes.term), _defineProperty(_componentToTypeMap, _constants.componentTypes.datePicker, _constants.queryTypes.range), _defineProperty(_componentToTypeMap, _constants.componentTypes.dateRange, _constants.queryTypes.range), _defineProperty(_componentToTypeMap, _constants.componentTypes.dynamicRangeSlider, _constants.queryTypes.range), _defineProperty(_componentToTypeMap, _constants.componentTypes.singleDropdownRange, _constants.queryTypes.range), _defineProperty(_componentToTypeMap, _constants.componentTypes.multiDropdownRange, _constants.queryTypes.range), _defineProperty(_componentToTypeMap, _constants.componentTypes.singleRange, _constants.queryTypes.range), _defineProperty(_componentToTypeMap, _constants.componentTypes.multiRange, _constants.queryTypes.range), _defineProperty(_componentToTypeMap, _constants.componentTypes.rangeSlider, _constants.queryTypes.range), _defineProperty(_componentToTypeMap, _constants.componentTypes.ratingsFilter, _constants.queryTypes.range), _defineProperty(_componentToTypeMap, _constants.componentTypes.rangeInput, _constants.queryTypes.range), _defineProperty(_componentToTypeMap, _constants.componentTypes.geoDistanceDropdown, _constants.queryTypes.geo), _defineProperty(_componentToTypeMap, _constants.componentTypes.geoDistanceSlider, _constants.queryTypes.geo), _defineProperty(_componentToTypeMap, _constants.componentTypes.reactiveMap, _constants.queryTypes.geo), _componentToTypeMap);\nvar multiRangeComponents = [_constants.componentTypes.multiRange, _constants.componentTypes.multiDropdownRange];\nvar dateRangeComponents = [_constants.componentTypes.dateRange, _constants.componentTypes.datePicker];\nvar searchComponents = [_constants.componentTypes.categorySearch, _constants.componentTypes.dataSearch];\nvar listComponentsWithPagination = [_constants.componentTypes.singleList, _constants.componentTypes.multiList, _constants.componentTypes.singleDropdownList, _constants.componentTypes.multiDropdownList];\n\nvar getNormalizedField = exports.getNormalizedField = function getNormalizedField(field) {\n  if (field && !Array.isArray(field)) {\n    return [field];\n  }\n\n  return field;\n};\n\nvar isInternalComponent = exports.isInternalComponent = function isInternalComponent() {\n  var componentID = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return componentID.endsWith('__internal');\n};\n\nvar getInternalComponentID = exports.getInternalComponentID = function getInternalComponentID() {\n  var componentID = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return componentID + '__internal';\n};\n\nvar getHistogramComponentID = exports.getHistogramComponentID = function getHistogramComponentID() {\n  var componentID = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return componentID + '__histogram__internal';\n};\n\nvar isDRSRangeComponent = exports.isDRSRangeComponent = function isDRSRangeComponent() {\n  var componentID = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return componentID.endsWith('__range__internal');\n};\n\nvar isSearchComponent = exports.isSearchComponent = function isSearchComponent() {\n  var componentType = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return searchComponents.includes(componentType);\n};\n\nvar isComponentUsesLabelAsValue = exports.isComponentUsesLabelAsValue = function isComponentUsesLabelAsValue() {\n  var componentType = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return componentType === _constants.componentTypes.multiDataList || componentType === _constants.componentTypes.singleDataList;\n};\n\nvar hasPaginationSupport = exports.hasPaginationSupport = function hasPaginationSupport() {\n  var componentType = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return listComponentsWithPagination.includes(componentType);\n};\n\nvar getRSQuery = exports.getRSQuery = function getRSQuery(componentId, props) {\n  var execute = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n\n  if (props && componentId) {\n    var queryType = props.type ? props.type : componentToTypeMap[props.componentType];\n\n    if (!isSearchComponent(props.componentType) && !props.dataField) {\n      return null;\n    }\n\n    return {\n      id: componentId,\n      type: queryType,\n      dataField: getNormalizedField(props.dataField),\n      execute: execute,\n      react: props.react,\n      highlight: props.highlight,\n      highlightField: getNormalizedField(props.highlightField),\n      fuzziness: props.fuzziness,\n      searchOperators: props.searchOperators,\n      includeFields: props.includeFields,\n      excludeFields: props.excludeFields,\n      size: props.size,\n      aggregationSize: props.aggregationSize,\n      from: props.from,\n      queryFormat: props.queryFormat,\n      sortBy: props.sortBy,\n      fieldWeights: getNormalizedField(props.fieldWeights),\n      includeNullValues: props.includeNullValues,\n      aggregationField: props.aggregationField || undefined,\n      categoryField: props.categoryField || undefined,\n      missingLabel: props.missingLabel || undefined,\n      showMissing: props.showMissing,\n      nestedField: props.nestedField || undefined,\n      interval: props.interval,\n      customHighlight: props.customHighlight,\n      customQuery: props.customQuery,\n      defaultQuery: props.defaultQuery,\n      value: props.value,\n      categoryValue: props.categoryValue || undefined,\n      after: props.after || undefined,\n      aggregations: props.aggregations || undefined,\n      enableSynonyms: props.enableSynonyms,\n      selectAllLabel: props.selectAllLabel,\n      pagination: props.pagination,\n      queryString: props.queryString,\n      distinctField: props.distinctField,\n      distinctFieldConfig: props.distinctFieldConfig,\n      index: props.index\n    };\n  }\n\n  return null;\n};\n\nvar getValidInterval = exports.getValidInterval = function getValidInterval(interval) {\n  var range = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var min = Math.ceil((range.end - range.start) / 100) || 1;\n\n  if (!interval) {\n    return min;\n  } else if (interval < min) {\n    return min;\n  }\n\n  return interval;\n};\n\nvar extractPropsFromState = exports.extractPropsFromState = function extractPropsFromState(store, component, customOptions) {\n  var componentProps = store.props[component];\n\n  if (!componentProps) {\n    return null;\n  }\n\n  var queryType = componentToTypeMap[componentProps.componentType];\n  var calcValues = store.selectedValues[component] || store.internalValues[component];\n  var value = calcValues !== undefined && calcValues !== null ? calcValues.value : undefined;\n  var queryFormat = componentProps.queryFormat;\n  var interval = componentProps.interval;\n  var type = componentToTypeMap[componentProps.componentType];\n  var dataField = componentProps.dataField;\n  var aggregations = void 0;\n  var pagination = void 0;\n  var from = componentProps.from;\n\n  if (queryType === _constants.queryTypes.term) {\n    if (componentProps.showLoadMore && hasPaginationSupport(componentProps.componentType)) {\n      pagination = true;\n    }\n\n    if (value != null && typeof value === 'object' && value.value) {\n      value = value.value;\n    } else if (Array.isArray(value)) {\n      var parsedValue = [];\n      value.forEach(function (val) {\n        if (val != null && typeof val === 'object' && val.value) {\n          parsedValue.push(val.value);\n        } else {\n          parsedValue.push(val);\n        }\n      });\n      value = parsedValue;\n    }\n  }\n\n  if (queryType === _constants.queryTypes.range) {\n    if (Array.isArray(value)) {\n      if (multiRangeComponents.includes(componentProps.componentType)) {\n        value = value.map(function (_ref) {\n          var start = _ref.start,\n              end = _ref.end;\n          return {\n            start: start,\n            end: end\n          };\n        });\n      } else {\n        value = {\n          start: value[0],\n          end: value[1]\n        };\n      }\n    } else if (componentProps.showHistogram) {\n      var internalComponentID = getInternalComponentID(component);\n      var internalComponentValue = store.internalValues[internalComponentID];\n\n      if (!internalComponentValue) {\n        var histogramComponentID = getHistogramComponentID(component);\n        internalComponentValue = store.internalValues[histogramComponentID];\n      }\n\n      if (internalComponentValue && Array.isArray(internalComponentValue.value)) {\n        value = {\n          start: internalComponentValue.value[0],\n          end: internalComponentValue.value[1]\n        };\n        interval = getValidInterval(interval, value);\n      }\n    }\n\n    if (isDRSRangeComponent(component)) {\n      aggregations = ['min', 'max'];\n    } else if (componentProps.showHistogram) {\n      aggregations = ['histogram'];\n    }\n\n    if (dateRangeComponents.includes(componentProps.componentType)) {\n      queryFormat = 'or';\n\n      if (value) {\n        if (typeof value === 'string') {\n          value = {\n            start: (0, _helper.formatDate)(new _xdate2.default(value).addHours(-24), componentProps),\n            end: (0, _helper.formatDate)(new _xdate2.default(value), componentProps)\n          };\n        } else if (Array.isArray(value)) {\n          value = value.map(function (val) {\n            return {\n              start: (0, _helper.formatDate)(new _xdate2.default(val).addHours(-24), componentProps),\n              end: (0, _helper.formatDate)(new _xdate2.default(val), componentProps)\n            };\n          });\n        }\n      }\n    }\n  }\n\n  if (queryType === _constants.queryTypes.geo) {\n    value = undefined;\n    var geoCalcValues = store.selectedValues[component] || store.internalValues[component] || store.internalValues[getInternalComponentID(component)];\n\n    if (geoCalcValues && geoCalcValues.meta) {\n      if (geoCalcValues.meta.distance && geoCalcValues.meta.coordinates) {\n        value = {\n          distance: geoCalcValues.meta.distance,\n          location: geoCalcValues.meta.coordinates\n        };\n\n        if (componentProps.unit) {\n          value.unit = componentProps.unit;\n        }\n      }\n\n      if (geoCalcValues.meta.mapBoxBounds && geoCalcValues.meta.mapBoxBounds.top_left && geoCalcValues.meta.mapBoxBounds.bottom_right) {\n        value = {\n          geoBoundingBox: {\n            topLeft: geoCalcValues.meta.mapBoxBounds.top_left[1] + ', ' + geoCalcValues.meta.mapBoxBounds.top_left[0],\n            bottomRight: geoCalcValues.meta.mapBoxBounds.bottom_right[1] + ', ' + geoCalcValues.meta.mapBoxBounds.bottom_right[0]\n          }\n        };\n      }\n    }\n  }\n\n  if (componentProps.componentType === _constants.componentTypes.numberBox) {\n    if (queryFormat === 'exact') {\n      type = 'term';\n    } else {\n      type = 'range';\n\n      if (queryFormat === 'lte') {\n        value = {\n          end: value,\n          boost: 2.0\n        };\n      } else {\n        value = {\n          start: value,\n          boost: 2.0\n        };\n      }\n    }\n\n    queryFormat = 'or';\n  }\n\n  if (componentProps.componentType === _constants.componentTypes.reactiveComponent) {\n    type = 'term';\n    dataField = 'reactive_component_field';\n    value = undefined;\n  }\n\n  if (isSearchComponent(componentProps.componentType) && !value) {\n    value = '';\n  }\n\n  if (isComponentUsesLabelAsValue(componentProps.componentType)) {\n    var data = componentProps.data;\n    var absValue = [];\n\n    if (value && Array.isArray(value)) {\n      absValue = value;\n    } else if (value && typeof value === 'string') {\n      absValue = [value];\n    }\n\n    var normalizedValue = [];\n\n    if (absValue.length) {\n      if (data && Array.isArray(data)) {\n        absValue.forEach(function (val) {\n          var dataItem = data.find(function (o) {\n            return o.label === val;\n          });\n\n          if (dataItem && dataItem.value) {\n            normalizedValue.push(dataItem.value);\n          }\n        });\n      }\n    }\n\n    if (normalizedValue.length) {\n      value = normalizedValue;\n    } else {\n      value = undefined;\n    }\n  }\n\n  if (componentProps.componentType === _constants.componentTypes.reactiveList) {\n    if (value > 0) {\n      from = (value - 1) * (componentProps.size || 10);\n    }\n\n    value = undefined;\n  }\n\n  return _extends({}, componentProps, {\n    dataField: dataField,\n    queryFormat: queryFormat,\n    type: type,\n    aggregations: aggregations,\n    interval: interval,\n    react: store.dependencyTree ? store.dependencyTree[component] : undefined,\n    customQuery: store.customQueries ? store.customQueries[component] : undefined,\n    defaultQuery: store.defaultQueries ? store.defaultQueries[component] : undefined,\n    customHighlight: store.customHighlightOptions ? store.customHighlightOptions[component] : undefined,\n    categoryValue: store.internalValues[component] ? store.internalValues[component].category : undefined,\n    value: value,\n    pagination: pagination,\n    from: from\n  }, customOptions);\n};\n\nfunction flatReactProp(reactProp, componentID) {\n  var flattenReact = [];\n\n  var flatReact = function flatReact(react) {\n    if (react && Object.keys(react)) {\n      Object.keys(react).forEach(function (r) {\n        if (react[r]) {\n          if (typeof react[r] === 'string') {\n            flattenReact = [].concat(_toConsumableArray(flattenReact), [react[r]]);\n          } else if (Array.isArray(react[r])) {\n            flattenReact = [].concat(_toConsumableArray(flattenReact), _toConsumableArray(react[r]));\n          } else if (typeof react[r] === 'object') {\n            flatReact(react[r]);\n          }\n        }\n      });\n    }\n  };\n\n  flatReact(reactProp);\n  flattenReact = flattenReact.filter(function (react) {\n    return react !== componentID;\n  });\n  return flattenReact;\n}\n\nvar getDependentQueries = exports.getDependentQueries = function getDependentQueries(store, componentID) {\n  var orderOfQueries = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  var finalQuery = {};\n  var react = flatReactProp(store.dependencyTree[componentID], componentID);\n  react.forEach(function (component) {\n    var componentProps = store.props[component];\n    var shouldAddInternalQuery = componentProps ? isSearchComponent(componentProps.componentType) : null;\n    var customQuery = store.customQueries[component];\n\n    if (!isInternalComponent(component) || shouldAddInternalQuery) {\n      var calcValues = store.selectedValues[component] || store.internalValues[component];\n\n      if ((calcValues || customQuery) && !finalQuery[component]) {\n        var execute = false;\n\n        if (Array.isArray(orderOfQueries) && orderOfQueries.includes(component)) {\n          execute = true;\n        }\n\n        var dependentQuery = getRSQuery(component, extractPropsFromState(store, component), execute);\n\n        if (dependentQuery) {\n          finalQuery[component] = dependentQuery;\n        }\n      }\n    }\n  });\n  return finalQuery;\n};","map":{"version":3,"sources":["C:/Users/hiro/react_project/react_search/react_search/frontend/node_modules/@appbaseio/reactivecore/lib/utils/transform.js"],"names":["Object","defineProperty","exports","value","getDependentQueries","extractPropsFromState","getValidInterval","getRSQuery","hasPaginationSupport","isComponentUsesLabelAsValue","isSearchComponent","isDRSRangeComponent","getHistogramComponentID","getInternalComponentID","isInternalComponent","getNormalizedField","componentToTypeMap","undefined","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_componentToTypeMap","flatReactProp","_xdate","require","_xdate2","_interopRequireDefault","_constants","_helper","obj","__esModule","default","_toConsumableArray","arr","Array","isArray","arr2","from","_defineProperty","enumerable","configurable","writable","componentTypes","reactiveList","queryTypes","search","dataSearch","categorySearch","singleList","term","multiList","singleDataList","singleDropdownList","multiDataList","multiDropdownList","tagCloud","toggleButton","numberBox","datePicker","range","dateRange","dynamicRangeSlider","singleDropdownRange","multiDropdownRange","singleRange","multiRange","rangeSlider","ratingsFilter","rangeInput","geoDistanceDropdown","geo","geoDistanceSlider","reactiveMap","multiRangeComponents","dateRangeComponents","searchComponents","listComponentsWithPagination","field","componentID","endsWith","componentType","includes","componentId","props","execute","queryType","type","dataField","id","react","highlight","highlightField","fuzziness","searchOperators","includeFields","excludeFields","size","aggregationSize","queryFormat","sortBy","fieldWeights","includeNullValues","aggregationField","categoryField","missingLabel","showMissing","nestedField","interval","customHighlight","customQuery","defaultQuery","categoryValue","after","aggregations","enableSynonyms","selectAllLabel","pagination","queryString","distinctField","distinctFieldConfig","index","min","Math","ceil","end","start","store","component","customOptions","componentProps","calcValues","selectedValues","internalValues","showLoadMore","parsedValue","forEach","val","push","map","_ref","showHistogram","internalComponentID","internalComponentValue","histogramComponentID","formatDate","addHours","geoCalcValues","meta","distance","coordinates","location","unit","mapBoxBounds","top_left","bottom_right","geoBoundingBox","topLeft","bottomRight","boost","reactiveComponent","data","absValue","normalizedValue","dataItem","find","o","label","dependencyTree","customQueries","defaultQueries","customHighlightOptions","category","reactProp","flattenReact","flatReact","keys","r","concat","filter","orderOfQueries","finalQuery","shouldAddInternalQuery","dependentQuery"],"mappings":"AAAAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA8B,YAA9B,EAA2C;AAACC,EAAAA,KAAK,EAAC;AAAP,CAA3C;AAAyDD,OAAO,CAACE,mBAAR,GAA4BF,OAAO,CAACG,qBAAR,GAA8BH,OAAO,CAACI,gBAAR,GAAyBJ,OAAO,CAACK,UAAR,GAAmBL,OAAO,CAACM,oBAAR,GAA6BN,OAAO,CAACO,2BAAR,GAAoCP,OAAO,CAACQ,iBAAR,GAA0BR,OAAO,CAACS,mBAAR,GAA4BT,OAAO,CAACU,uBAAR,GAAgCV,OAAO,CAACW,sBAAR,GAA+BX,OAAO,CAACY,mBAAR,GAA4BZ,OAAO,CAACa,kBAAR,GAA2Bb,OAAO,CAACc,kBAAR,GAA2BC,SAA9W;;AAAwX,IAAIC,QAAQ,GAAClB,MAAM,CAACmB,MAAP,IAAe,UAASC,MAAT,EAAgB;AAAC,OAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACC,SAAS,CAACC,MAAxB,EAA+BF,CAAC,EAAhC,EAAmC;AAAC,QAAIG,MAAM,GAACF,SAAS,CAACD,CAAD,CAApB;;AAAwB,SAAI,IAAII,GAAR,IAAeD,MAAf,EAAsB;AAAC,UAAGxB,MAAM,CAAC0B,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCJ,MAArC,EAA4CC,GAA5C,CAAH,EAAoD;AAACL,QAAAA,MAAM,CAACK,GAAD,CAAN,GAAYD,MAAM,CAACC,GAAD,CAAlB;AAAyB;AAAC;AAAC;;AAAA,SAAOL,MAAP;AAAe,CAA/N;;AAAgO,IAAIS,mBAAJ;;AAAwB3B,OAAO,CAAC4B,aAAR,GAAsBA,aAAtB;;AAAoC,IAAIC,MAAM,GAACC,OAAO,CAAC,OAAD,CAAlB;;AAA4B,IAAIC,OAAO,GAACC,sBAAsB,CAACH,MAAD,CAAlC;;AAA2C,IAAII,UAAU,GAACH,OAAO,CAAC,aAAD,CAAtB;;AAAsC,IAAII,OAAO,GAACJ,OAAO,CAAC,UAAD,CAAnB;;AAAgC,SAASE,sBAAT,CAAgCG,GAAhC,EAAoC;AAAC,SAAOA,GAAG,IAAEA,GAAG,CAACC,UAAT,GAAoBD,GAApB,GAAwB;AAACE,IAAAA,OAAO,EAACF;AAAT,GAA/B;AAA8C;;AAAA,SAASG,kBAAT,CAA4BC,GAA5B,EAAgC;AAAC,MAAGC,KAAK,CAACC,OAAN,CAAcF,GAAd,CAAH,EAAsB;AAAC,SAAI,IAAIpB,CAAC,GAAC,CAAN,EAAQuB,IAAI,GAACF,KAAK,CAACD,GAAG,CAAClB,MAAL,CAAtB,EAAmCF,CAAC,GAACoB,GAAG,CAAClB,MAAzC,EAAgDF,CAAC,EAAjD,EAAoD;AAACuB,MAAAA,IAAI,CAACvB,CAAD,CAAJ,GAAQoB,GAAG,CAACpB,CAAD,CAAX;AAAgB;;AAAA,WAAOuB,IAAP;AAAa,GAAzG,MAA6G;AAAC,WAAOF,KAAK,CAACG,IAAN,CAAWJ,GAAX,CAAP;AAAwB;AAAC;;AAAA,SAASK,eAAT,CAAyBT,GAAzB,EAA6BZ,GAA7B,EAAiCtB,KAAjC,EAAuC;AAAC,MAAGsB,GAAG,IAAIY,GAAV,EAAc;AAACrC,IAAAA,MAAM,CAACC,cAAP,CAAsBoC,GAAtB,EAA0BZ,GAA1B,EAA8B;AAACtB,MAAAA,KAAK,EAACA,KAAP;AAAa4C,MAAAA,UAAU,EAAC,IAAxB;AAA6BC,MAAAA,YAAY,EAAC,IAA1C;AAA+CC,MAAAA,QAAQ,EAAC;AAAxD,KAA9B;AAA8F,GAA7G,MAAiH;AAACZ,IAAAA,GAAG,CAACZ,GAAD,CAAH,GAAStB,KAAT;AAAgB;;AAAA,SAAOkC,GAAP;AAAY;;AAAA,IAAIrB,kBAAkB,GAACd,OAAO,CAACc,kBAAR,IAA4Ba,mBAAmB,GAAC,EAApB,EAAuBiB,eAAe,CAACjB,mBAAD,EAAqBM,UAAU,CAACe,cAAX,CAA0BC,YAA/C,EAA4DhB,UAAU,CAACiB,UAAX,CAAsBC,MAAlF,CAAtC,EAAgIP,eAAe,CAACjB,mBAAD,EAAqBM,UAAU,CAACe,cAAX,CAA0BI,UAA/C,EAA0DnB,UAAU,CAACiB,UAAX,CAAsBC,MAAhF,CAA/I,EAAuOP,eAAe,CAACjB,mBAAD,EAAqBM,UAAU,CAACe,cAAX,CAA0BK,cAA/C,EAA8DpB,UAAU,CAACiB,UAAX,CAAsBC,MAApF,CAAtP,EAAkVP,eAAe,CAACjB,mBAAD,EAAqBM,UAAU,CAACe,cAAX,CAA0BM,UAA/C,EAA0DrB,UAAU,CAACiB,UAAX,CAAsBK,IAAhF,CAAjW,EAAubX,eAAe,CAACjB,mBAAD,EAAqBM,UAAU,CAACe,cAAX,CAA0BQ,SAA/C,EAAyDvB,UAAU,CAACiB,UAAX,CAAsBK,IAA/E,CAAtc,EAA2hBX,eAAe,CAACjB,mBAAD,EAAqBM,UAAU,CAACe,cAAX,CAA0BS,cAA/C,EAA8DxB,UAAU,CAACiB,UAAX,CAAsBK,IAApF,CAA1iB,EAAooBX,eAAe,CAACjB,mBAAD,EAAqBM,UAAU,CAACe,cAAX,CAA0BU,kBAA/C,EAAkEzB,UAAU,CAACiB,UAAX,CAAsBK,IAAxF,CAAnpB,EAAivBX,eAAe,CAACjB,mBAAD,EAAqBM,UAAU,CAACe,cAAX,CAA0BW,aAA/C,EAA6D1B,UAAU,CAACiB,UAAX,CAAsBK,IAAnF,CAAhwB,EAAy1BX,eAAe,CAACjB,mBAAD,EAAqBM,UAAU,CAACe,cAAX,CAA0BY,iBAA/C,EAAiE3B,UAAU,CAACiB,UAAX,CAAsBK,IAAvF,CAAx2B,EAAq8BX,eAAe,CAACjB,mBAAD,EAAqBM,UAAU,CAACe,cAAX,CAA0Ba,QAA/C,EAAwD5B,UAAU,CAACiB,UAAX,CAAsBK,IAA9E,CAAp9B,EAAwiCX,eAAe,CAACjB,mBAAD,EAAqBM,UAAU,CAACe,cAAX,CAA0Bc,YAA/C,EAA4D7B,UAAU,CAACiB,UAAX,CAAsBK,IAAlF,CAAvjC,EAA+oCX,eAAe,CAACjB,mBAAD,EAAqBM,UAAU,CAACe,cAAX,CAA0Be,SAA/C,EAAyD9B,UAAU,CAACiB,UAAX,CAAsBK,IAA/E,CAA9pC,EAAmvCX,eAAe,CAACjB,mBAAD,EAAqBM,UAAU,CAACe,cAAX,CAA0BgB,UAA/C,EAA0D/B,UAAU,CAACiB,UAAX,CAAsBe,KAAhF,CAAlwC,EAAy1CrB,eAAe,CAACjB,mBAAD,EAAqBM,UAAU,CAACe,cAAX,CAA0BkB,SAA/C,EAAyDjC,UAAU,CAACiB,UAAX,CAAsBe,KAA/E,CAAx2C,EAA87CrB,eAAe,CAACjB,mBAAD,EAAqBM,UAAU,CAACe,cAAX,CAA0BmB,kBAA/C,EAAkElC,UAAU,CAACiB,UAAX,CAAsBe,KAAxF,CAA78C,EAA4iDrB,eAAe,CAACjB,mBAAD,EAAqBM,UAAU,CAACe,cAAX,CAA0BoB,mBAA/C,EAAmEnC,UAAU,CAACiB,UAAX,CAAsBe,KAAzF,CAA3jD,EAA2pDrB,eAAe,CAACjB,mBAAD,EAAqBM,UAAU,CAACe,cAAX,CAA0BqB,kBAA/C,EAAkEpC,UAAU,CAACiB,UAAX,CAAsBe,KAAxF,CAA1qD,EAAywDrB,eAAe,CAACjB,mBAAD,EAAqBM,UAAU,CAACe,cAAX,CAA0BsB,WAA/C,EAA2DrC,UAAU,CAACiB,UAAX,CAAsBe,KAAjF,CAAxxD,EAAg3DrB,eAAe,CAACjB,mBAAD,EAAqBM,UAAU,CAACe,cAAX,CAA0BuB,UAA/C,EAA0DtC,UAAU,CAACiB,UAAX,CAAsBe,KAAhF,CAA/3D,EAAs9DrB,eAAe,CAACjB,mBAAD,EAAqBM,UAAU,CAACe,cAAX,CAA0BwB,WAA/C,EAA2DvC,UAAU,CAACiB,UAAX,CAAsBe,KAAjF,CAAr+D,EAA6jErB,eAAe,CAACjB,mBAAD,EAAqBM,UAAU,CAACe,cAAX,CAA0ByB,aAA/C,EAA6DxC,UAAU,CAACiB,UAAX,CAAsBe,KAAnF,CAA5kE,EAAsqErB,eAAe,CAACjB,mBAAD,EAAqBM,UAAU,CAACe,cAAX,CAA0B0B,UAA/C,EAA0DzC,UAAU,CAACiB,UAAX,CAAsBe,KAAhF,CAArrE,EAA4wErB,eAAe,CAACjB,mBAAD,EAAqBM,UAAU,CAACe,cAAX,CAA0B2B,mBAA/C,EAAmE1C,UAAU,CAACiB,UAAX,CAAsB0B,GAAzF,CAA3xE,EAAy3EhC,eAAe,CAACjB,mBAAD,EAAqBM,UAAU,CAACe,cAAX,CAA0B6B,iBAA/C,EAAiE5C,UAAU,CAACiB,UAAX,CAAsB0B,GAAvF,CAAx4E,EAAo+EhC,eAAe,CAACjB,mBAAD,EAAqBM,UAAU,CAACe,cAAX,CAA0B8B,WAA/C,EAA2D7C,UAAU,CAACiB,UAAX,CAAsB0B,GAAjF,CAAn/E,EAAykFjD,mBAArmF,CAAvB;AAAipF,IAAIoD,oBAAoB,GAAC,CAAC9C,UAAU,CAACe,cAAX,CAA0BuB,UAA3B,EAAsCtC,UAAU,CAACe,cAAX,CAA0BqB,kBAAhE,CAAzB;AAA6G,IAAIW,mBAAmB,GAAC,CAAC/C,UAAU,CAACe,cAAX,CAA0BkB,SAA3B,EAAqCjC,UAAU,CAACe,cAAX,CAA0BgB,UAA/D,CAAxB;AAAmG,IAAIiB,gBAAgB,GAAC,CAAChD,UAAU,CAACe,cAAX,CAA0BK,cAA3B,EAA0CpB,UAAU,CAACe,cAAX,CAA0BI,UAApE,CAArB;AAAqG,IAAI8B,4BAA4B,GAAC,CAACjD,UAAU,CAACe,cAAX,CAA0BM,UAA3B,EAAsCrB,UAAU,CAACe,cAAX,CAA0BQ,SAAhE,EAA0EvB,UAAU,CAACe,cAAX,CAA0BU,kBAApG,EAAuHzB,UAAU,CAACe,cAAX,CAA0BY,iBAAjJ,CAAjC;;AAAqM,IAAI/C,kBAAkB,GAACb,OAAO,CAACa,kBAAR,GAA2B,SAASA,kBAAT,CAA4BsE,KAA5B,EAAkC;AAAC,MAAGA,KAAK,IAAE,CAAC3C,KAAK,CAACC,OAAN,CAAc0C,KAAd,CAAX,EAAgC;AAAC,WAAM,CAACA,KAAD,CAAN;AAAe;;AAAA,SAAOA,KAAP;AAAc,CAAnJ;;AAAoJ,IAAIvE,mBAAmB,GAACZ,OAAO,CAACY,mBAAR,GAA4B,SAASA,mBAAT,GAA8B;AAAC,MAAIwE,WAAW,GAAChE,SAAS,CAACC,MAAV,GAAiB,CAAjB,IAAoBD,SAAS,CAAC,CAAD,CAAT,KAAeL,SAAnC,GAA6CK,SAAS,CAAC,CAAD,CAAtD,GAA0D,EAA1E;AAA6E,SAAOgE,WAAW,CAACC,QAAZ,CAAqB,YAArB,CAAP;AAA2C,CAA3M;;AAA4M,IAAI1E,sBAAsB,GAACX,OAAO,CAACW,sBAAR,GAA+B,SAASA,sBAAT,GAAiC;AAAC,MAAIyE,WAAW,GAAChE,SAAS,CAACC,MAAV,GAAiB,CAAjB,IAAoBD,SAAS,CAAC,CAAD,CAAT,KAAeL,SAAnC,GAA6CK,SAAS,CAAC,CAAD,CAAtD,GAA0D,EAA1E;AAA6E,SAAOgE,WAAW,GAAC,YAAnB;AAAiC,CAA1M;;AAA2M,IAAI1E,uBAAuB,GAACV,OAAO,CAACU,uBAAR,GAAgC,SAASA,uBAAT,GAAkC;AAAC,MAAI0E,WAAW,GAAChE,SAAS,CAACC,MAAV,GAAiB,CAAjB,IAAoBD,SAAS,CAAC,CAAD,CAAT,KAAeL,SAAnC,GAA6CK,SAAS,CAAC,CAAD,CAAtD,GAA0D,EAA1E;AAA6E,SAAOgE,WAAW,GAAC,uBAAnB;AAA4C,CAAxN;;AAAyN,IAAI3E,mBAAmB,GAACT,OAAO,CAACS,mBAAR,GAA4B,SAASA,mBAAT,GAA8B;AAAC,MAAI2E,WAAW,GAAChE,SAAS,CAACC,MAAV,GAAiB,CAAjB,IAAoBD,SAAS,CAAC,CAAD,CAAT,KAAeL,SAAnC,GAA6CK,SAAS,CAAC,CAAD,CAAtD,GAA0D,EAA1E;AAA6E,SAAOgE,WAAW,CAACC,QAAZ,CAAqB,mBAArB,CAAP;AAAkD,CAAlN;;AAAmN,IAAI7E,iBAAiB,GAACR,OAAO,CAACQ,iBAAR,GAA0B,SAASA,iBAAT,GAA4B;AAAC,MAAI8E,aAAa,GAAClE,SAAS,CAACC,MAAV,GAAiB,CAAjB,IAAoBD,SAAS,CAAC,CAAD,CAAT,KAAeL,SAAnC,GAA6CK,SAAS,CAAC,CAAD,CAAtD,GAA0D,EAA5E;AAA+E,SAAO6D,gBAAgB,CAACM,QAAjB,CAA0BD,aAA1B,CAAP;AAAiD,CAA7M;;AAA8M,IAAI/E,2BAA2B,GAACP,OAAO,CAACO,2BAAR,GAAoC,SAASA,2BAAT,GAAsC;AAAC,MAAI+E,aAAa,GAAClE,SAAS,CAACC,MAAV,GAAiB,CAAjB,IAAoBD,SAAS,CAAC,CAAD,CAAT,KAAeL,SAAnC,GAA6CK,SAAS,CAAC,CAAD,CAAtD,GAA0D,EAA5E;AAA+E,SAAOkE,aAAa,KAAGrD,UAAU,CAACe,cAAX,CAA0BW,aAA1C,IAAyD2B,aAAa,KAAGrD,UAAU,CAACe,cAAX,CAA0BS,cAA1G;AAA0H,CAApT;;AAAqT,IAAInD,oBAAoB,GAACN,OAAO,CAACM,oBAAR,GAA6B,SAASA,oBAAT,GAA+B;AAAC,MAAIgF,aAAa,GAAClE,SAAS,CAACC,MAAV,GAAiB,CAAjB,IAAoBD,SAAS,CAAC,CAAD,CAAT,KAAeL,SAAnC,GAA6CK,SAAS,CAAC,CAAD,CAAtD,GAA0D,EAA5E;AAA+E,SAAO8D,4BAA4B,CAACK,QAA7B,CAAsCD,aAAtC,CAAP;AAA6D,CAAlO;;AAAmO,IAAIjF,UAAU,GAACL,OAAO,CAACK,UAAR,GAAmB,SAASA,UAAT,CAAoBmF,WAApB,EAAgCC,KAAhC,EAAsC;AAAC,MAAIC,OAAO,GAACtE,SAAS,CAACC,MAAV,GAAiB,CAAjB,IAAoBD,SAAS,CAAC,CAAD,CAAT,KAAeL,SAAnC,GAA6CK,SAAS,CAAC,CAAD,CAAtD,GAA0D,IAAtE;;AAA2E,MAAGqE,KAAK,IAAED,WAAV,EAAsB;AAAC,QAAIG,SAAS,GAACF,KAAK,CAACG,IAAN,GAAWH,KAAK,CAACG,IAAjB,GAAsB9E,kBAAkB,CAAC2E,KAAK,CAACH,aAAP,CAAtD;;AAA4E,QAAG,CAAC9E,iBAAiB,CAACiF,KAAK,CAACH,aAAP,CAAlB,IAAyC,CAACG,KAAK,CAACI,SAAnD,EAA6D;AAAC,aAAO,IAAP;AAAa;;AAAA,WAAM;AAACC,MAAAA,EAAE,EAACN,WAAJ;AAAgBI,MAAAA,IAAI,EAACD,SAArB;AAA+BE,MAAAA,SAAS,EAAChF,kBAAkB,CAAC4E,KAAK,CAACI,SAAP,CAA3D;AAA6EH,MAAAA,OAAO,EAACA,OAArF;AAA6FK,MAAAA,KAAK,EAACN,KAAK,CAACM,KAAzG;AAA+GC,MAAAA,SAAS,EAACP,KAAK,CAACO,SAA/H;AAAyIC,MAAAA,cAAc,EAACpF,kBAAkB,CAAC4E,KAAK,CAACQ,cAAP,CAA1K;AAAiMC,MAAAA,SAAS,EAACT,KAAK,CAACS,SAAjN;AAA2NC,MAAAA,eAAe,EAACV,KAAK,CAACU,eAAjP;AAAiQC,MAAAA,aAAa,EAACX,KAAK,CAACW,aAArR;AAAmSC,MAAAA,aAAa,EAACZ,KAAK,CAACY,aAAvT;AAAqUC,MAAAA,IAAI,EAACb,KAAK,CAACa,IAAhV;AAAqVC,MAAAA,eAAe,EAACd,KAAK,CAACc,eAA3W;AAA2X5D,MAAAA,IAAI,EAAC8C,KAAK,CAAC9C,IAAtY;AAA2Y6D,MAAAA,WAAW,EAACf,KAAK,CAACe,WAA7Z;AAAyaC,MAAAA,MAAM,EAAChB,KAAK,CAACgB,MAAtb;AAA6bC,MAAAA,YAAY,EAAC7F,kBAAkB,CAAC4E,KAAK,CAACiB,YAAP,CAA5d;AAAifC,MAAAA,iBAAiB,EAAClB,KAAK,CAACkB,iBAAzgB;AAA2hBC,MAAAA,gBAAgB,EAACnB,KAAK,CAACmB,gBAAN,IAAwB7F,SAApkB;AAA8kB8F,MAAAA,aAAa,EAACpB,KAAK,CAACoB,aAAN,IAAqB9F,SAAjnB;AAA2nB+F,MAAAA,YAAY,EAACrB,KAAK,CAACqB,YAAN,IAAoB/F,SAA5pB;AAAsqBgG,MAAAA,WAAW,EAACtB,KAAK,CAACsB,WAAxrB;AAAosBC,MAAAA,WAAW,EAACvB,KAAK,CAACuB,WAAN,IAAmBjG,SAAnuB;AAA6uBkG,MAAAA,QAAQ,EAACxB,KAAK,CAACwB,QAA5vB;AAAqwBC,MAAAA,eAAe,EAACzB,KAAK,CAACyB,eAA3xB;AAA2yBC,MAAAA,WAAW,EAAC1B,KAAK,CAAC0B,WAA7zB;AAAy0BC,MAAAA,YAAY,EAAC3B,KAAK,CAAC2B,YAA51B;AAAy2BnH,MAAAA,KAAK,EAACwF,KAAK,CAACxF,KAAr3B;AAA23BoH,MAAAA,aAAa,EAAC5B,KAAK,CAAC4B,aAAN,IAAqBtG,SAA95B;AAAw6BuG,MAAAA,KAAK,EAAC7B,KAAK,CAAC6B,KAAN,IAAavG,SAA37B;AAAq8BwG,MAAAA,YAAY,EAAC9B,KAAK,CAAC8B,YAAN,IAAoBxG,SAAt+B;AAAg/ByG,MAAAA,cAAc,EAAC/B,KAAK,CAAC+B,cAArgC;AAAohCC,MAAAA,cAAc,EAAChC,KAAK,CAACgC,cAAziC;AAAwjCC,MAAAA,UAAU,EAACjC,KAAK,CAACiC,UAAzkC;AAAolCC,MAAAA,WAAW,EAAClC,KAAK,CAACkC,WAAtmC;AAAknCC,MAAAA,aAAa,EAACnC,KAAK,CAACmC,aAAtoC;AAAopCC,MAAAA,mBAAmB,EAACpC,KAAK,CAACoC,mBAA9qC;AAAksCC,MAAAA,KAAK,EAACrC,KAAK,CAACqC;AAA9sC,KAAN;AAA4tC;;AAAA,SAAO,IAAP;AAAa,CAA3iD;;AAA4iD,IAAI1H,gBAAgB,GAACJ,OAAO,CAACI,gBAAR,GAAyB,SAASA,gBAAT,CAA0B6G,QAA1B,EAAmC;AAAC,MAAIhD,KAAK,GAAC7C,SAAS,CAACC,MAAV,GAAiB,CAAjB,IAAoBD,SAAS,CAAC,CAAD,CAAT,KAAeL,SAAnC,GAA6CK,SAAS,CAAC,CAAD,CAAtD,GAA0D,EAApE;AAAuE,MAAI2G,GAAG,GAACC,IAAI,CAACC,IAAL,CAAU,CAAChE,KAAK,CAACiE,GAAN,GAAUjE,KAAK,CAACkE,KAAjB,IAAwB,GAAlC,KAAwC,CAAhD;;AAAkD,MAAG,CAAClB,QAAJ,EAAa;AAAC,WAAOc,GAAP;AAAY,GAA1B,MAA+B,IAAGd,QAAQ,GAACc,GAAZ,EAAgB;AAAC,WAAOA,GAAP;AAAY;;AAAA,SAAOd,QAAP;AAAiB,CAAxR;;AAAyR,IAAI9G,qBAAqB,GAACH,OAAO,CAACG,qBAAR,GAA8B,SAASA,qBAAT,CAA+BiI,KAA/B,EAAqCC,SAArC,EAA+CC,aAA/C,EAA6D;AAAC,MAAIC,cAAc,GAACH,KAAK,CAAC3C,KAAN,CAAY4C,SAAZ,CAAnB;;AAA0C,MAAG,CAACE,cAAJ,EAAmB;AAAC,WAAO,IAAP;AAAa;;AAAA,MAAI5C,SAAS,GAAC7E,kBAAkB,CAACyH,cAAc,CAACjD,aAAhB,CAAhC;AAA+D,MAAIkD,UAAU,GAACJ,KAAK,CAACK,cAAN,CAAqBJ,SAArB,KAAiCD,KAAK,CAACM,cAAN,CAAqBL,SAArB,CAAhD;AAAgF,MAAIpI,KAAK,GAACuI,UAAU,KAAGzH,SAAb,IAAwByH,UAAU,KAAG,IAArC,GAA0CA,UAAU,CAACvI,KAArD,GAA2Dc,SAArE;AAA+E,MAAIyF,WAAW,GAAC+B,cAAc,CAAC/B,WAA/B;AAA2C,MAAIS,QAAQ,GAACsB,cAAc,CAACtB,QAA5B;AAAqC,MAAIrB,IAAI,GAAC9E,kBAAkB,CAACyH,cAAc,CAACjD,aAAhB,CAA3B;AAA0D,MAAIO,SAAS,GAAC0C,cAAc,CAAC1C,SAA7B;AAAuC,MAAI0B,YAAY,GAAC,KAAK,CAAtB;AAAwB,MAAIG,UAAU,GAAC,KAAK,CAApB;AAAsB,MAAI/E,IAAI,GAAC4F,cAAc,CAAC5F,IAAxB;;AAA6B,MAAGgD,SAAS,KAAG1D,UAAU,CAACiB,UAAX,CAAsBK,IAArC,EAA0C;AAAC,QAAGgF,cAAc,CAACI,YAAf,IAA6BrI,oBAAoB,CAACiI,cAAc,CAACjD,aAAhB,CAApD,EAAmF;AAACoC,MAAAA,UAAU,GAAC,IAAX;AAAiB;;AAAA,QAAGzH,KAAK,IAAE,IAAP,IAAa,OAAOA,KAAP,KAAe,QAA5B,IAAsCA,KAAK,CAACA,KAA/C,EAAqD;AAACA,MAAAA,KAAK,GAACA,KAAK,CAACA,KAAZ;AAAmB,KAAzE,MAA8E,IAAGuC,KAAK,CAACC,OAAN,CAAcxC,KAAd,CAAH,EAAwB;AAAC,UAAI2I,WAAW,GAAC,EAAhB;AAAmB3I,MAAAA,KAAK,CAAC4I,OAAN,CAAc,UAASC,GAAT,EAAa;AAAC,YAAGA,GAAG,IAAE,IAAL,IAAW,OAAOA,GAAP,KAAa,QAAxB,IAAkCA,GAAG,CAAC7I,KAAzC,EAA+C;AAAC2I,UAAAA,WAAW,CAACG,IAAZ,CAAiBD,GAAG,CAAC7I,KAArB;AAA6B,SAA7E,MAAiF;AAAC2I,UAAAA,WAAW,CAACG,IAAZ,CAAiBD,GAAjB;AAAuB;AAAC,OAAtI;AAAwI7I,MAAAA,KAAK,GAAC2I,WAAN;AAAmB;AAAC;;AAAA,MAAGjD,SAAS,KAAG1D,UAAU,CAACiB,UAAX,CAAsBe,KAArC,EAA2C;AAAC,QAAGzB,KAAK,CAACC,OAAN,CAAcxC,KAAd,CAAH,EAAwB;AAAC,UAAG8E,oBAAoB,CAACQ,QAArB,CAA8BgD,cAAc,CAACjD,aAA7C,CAAH,EAA+D;AAACrF,QAAAA,KAAK,GAACA,KAAK,CAAC+I,GAAN,CAAU,UAASC,IAAT,EAAc;AAAC,cAAId,KAAK,GAACc,IAAI,CAACd,KAAf;AAAA,cAAqBD,GAAG,GAACe,IAAI,CAACf,GAA9B;AAAkC,iBAAM;AAACC,YAAAA,KAAK,EAACA,KAAP;AAAaD,YAAAA,GAAG,EAACA;AAAjB,WAAN;AAA6B,SAAxF,CAAN;AAAiG,OAAjK,MAAqK;AAACjI,QAAAA,KAAK,GAAC;AAACkI,UAAAA,KAAK,EAAClI,KAAK,CAAC,CAAD,CAAZ;AAAgBiI,UAAAA,GAAG,EAACjI,KAAK,CAAC,CAAD;AAAzB,SAAN;AAAqC;AAAC,KAArO,MAA0O,IAAGsI,cAAc,CAACW,aAAlB,EAAgC;AAAC,UAAIC,mBAAmB,GAACxI,sBAAsB,CAAC0H,SAAD,CAA9C;AAA0D,UAAIe,sBAAsB,GAAChB,KAAK,CAACM,cAAN,CAAqBS,mBAArB,CAA3B;;AAAqE,UAAG,CAACC,sBAAJ,EAA2B;AAAC,YAAIC,oBAAoB,GAAC3I,uBAAuB,CAAC2H,SAAD,CAAhD;AAA4De,QAAAA,sBAAsB,GAAChB,KAAK,CAACM,cAAN,CAAqBW,oBAArB,CAAvB;AAAmE;;AAAA,UAAGD,sBAAsB,IAAE5G,KAAK,CAACC,OAAN,CAAc2G,sBAAsB,CAACnJ,KAArC,CAA3B,EAAuE;AAACA,QAAAA,KAAK,GAAC;AAACkI,UAAAA,KAAK,EAACiB,sBAAsB,CAACnJ,KAAvB,CAA6B,CAA7B,CAAP;AAAuCiI,UAAAA,GAAG,EAACkB,sBAAsB,CAACnJ,KAAvB,CAA6B,CAA7B;AAA3C,SAAN;AAAkFgH,QAAAA,QAAQ,GAAC7G,gBAAgB,CAAC6G,QAAD,EAAUhH,KAAV,CAAzB;AAA2C;AAAC;;AAAA,QAAGQ,mBAAmB,CAAC4H,SAAD,CAAtB,EAAkC;AAACd,MAAAA,YAAY,GAAC,CAAC,KAAD,EAAO,KAAP,CAAb;AAA4B,KAA/D,MAAoE,IAAGgB,cAAc,CAACW,aAAlB,EAAgC;AAAC3B,MAAAA,YAAY,GAAC,CAAC,WAAD,CAAb;AAA4B;;AAAA,QAAGvC,mBAAmB,CAACO,QAApB,CAA6BgD,cAAc,CAACjD,aAA5C,CAAH,EAA8D;AAACkB,MAAAA,WAAW,GAAC,IAAZ;;AAAiB,UAAGvG,KAAH,EAAS;AAAC,YAAG,OAAOA,KAAP,KAAe,QAAlB,EAA2B;AAACA,UAAAA,KAAK,GAAC;AAACkI,YAAAA,KAAK,EAAC,CAAC,GAAEjG,OAAO,CAACoH,UAAX,EAAuB,IAAIvH,OAAO,CAACM,OAAZ,CAAoBpC,KAApB,EAA2BsJ,QAA3B,CAAoC,CAAC,EAArC,CAAvB,EAAgEhB,cAAhE,CAAP;AAAuFL,YAAAA,GAAG,EAAC,CAAC,GAAEhG,OAAO,CAACoH,UAAX,EAAuB,IAAIvH,OAAO,CAACM,OAAZ,CAAoBpC,KAApB,CAAvB,EAAkDsI,cAAlD;AAA3F,WAAN;AAAqK,SAAjM,MAAsM,IAAG/F,KAAK,CAACC,OAAN,CAAcxC,KAAd,CAAH,EAAwB;AAACA,UAAAA,KAAK,GAACA,KAAK,CAAC+I,GAAN,CAAU,UAASF,GAAT,EAAa;AAAC,mBAAM;AAACX,cAAAA,KAAK,EAAC,CAAC,GAAEjG,OAAO,CAACoH,UAAX,EAAuB,IAAIvH,OAAO,CAACM,OAAZ,CAAoByG,GAApB,EAAyBS,QAAzB,CAAkC,CAAC,EAAnC,CAAvB,EAA8DhB,cAA9D,CAAP;AAAqFL,cAAAA,GAAG,EAAC,CAAC,GAAEhG,OAAO,CAACoH,UAAX,EAAuB,IAAIvH,OAAO,CAACM,OAAZ,CAAoByG,GAApB,CAAvB,EAAgDP,cAAhD;AAAzF,aAAN;AAAiK,WAAzL,CAAN;AAAkM;AAAC;AAAC;AAAC;;AAAA,MAAG5C,SAAS,KAAG1D,UAAU,CAACiB,UAAX,CAAsB0B,GAArC,EAAyC;AAAC3E,IAAAA,KAAK,GAACc,SAAN;AAAgB,QAAIyI,aAAa,GAACpB,KAAK,CAACK,cAAN,CAAqBJ,SAArB,KAAiCD,KAAK,CAACM,cAAN,CAAqBL,SAArB,CAAjC,IAAkED,KAAK,CAACM,cAAN,CAAqB/H,sBAAsB,CAAC0H,SAAD,CAA3C,CAApF;;AAA4I,QAAGmB,aAAa,IAAEA,aAAa,CAACC,IAAhC,EAAqC;AAAC,UAAGD,aAAa,CAACC,IAAd,CAAmBC,QAAnB,IAA6BF,aAAa,CAACC,IAAd,CAAmBE,WAAnD,EAA+D;AAAC1J,QAAAA,KAAK,GAAC;AAACyJ,UAAAA,QAAQ,EAACF,aAAa,CAACC,IAAd,CAAmBC,QAA7B;AAAsCE,UAAAA,QAAQ,EAACJ,aAAa,CAACC,IAAd,CAAmBE;AAAlE,SAAN;;AAAqF,YAAGpB,cAAc,CAACsB,IAAlB,EAAuB;AAAC5J,UAAAA,KAAK,CAAC4J,IAAN,GAAWtB,cAAc,CAACsB,IAA1B;AAAgC;AAAC;;AAAA,UAAGL,aAAa,CAACC,IAAd,CAAmBK,YAAnB,IAAiCN,aAAa,CAACC,IAAd,CAAmBK,YAAnB,CAAgCC,QAAjE,IAA2EP,aAAa,CAACC,IAAd,CAAmBK,YAAnB,CAAgCE,YAA9G,EAA2H;AAAC/J,QAAAA,KAAK,GAAC;AAACgK,UAAAA,cAAc,EAAC;AAACC,YAAAA,OAAO,EAACV,aAAa,CAACC,IAAd,CAAmBK,YAAnB,CAAgCC,QAAhC,CAAyC,CAAzC,IAA4C,IAA5C,GAAiDP,aAAa,CAACC,IAAd,CAAmBK,YAAnB,CAAgCC,QAAhC,CAAyC,CAAzC,CAA1D;AAAsGI,YAAAA,WAAW,EAACX,aAAa,CAACC,IAAd,CAAmBK,YAAnB,CAAgCE,YAAhC,CAA6C,CAA7C,IAAgD,IAAhD,GAAqDR,aAAa,CAACC,IAAd,CAAmBK,YAAnB,CAAgCE,YAAhC,CAA6C,CAA7C;AAAvK;AAAhB,SAAN;AAAgP;AAAC;AAAC;;AAAA,MAAGzB,cAAc,CAACjD,aAAf,KAA+BrD,UAAU,CAACe,cAAX,CAA0Be,SAA5D,EAAsE;AAAC,QAAGyC,WAAW,KAAG,OAAjB,EAAyB;AAACZ,MAAAA,IAAI,GAAC,MAAL;AAAa,KAAvC,MAA2C;AAACA,MAAAA,IAAI,GAAC,OAAL;;AAAa,UAAGY,WAAW,KAAG,KAAjB,EAAuB;AAACvG,QAAAA,KAAK,GAAC;AAACiI,UAAAA,GAAG,EAACjI,KAAL;AAAWmK,UAAAA,KAAK,EAAC;AAAjB,SAAN;AAA6B,OAArD,MAAyD;AAACnK,QAAAA,KAAK,GAAC;AAACkI,UAAAA,KAAK,EAAClI,KAAP;AAAamK,UAAAA,KAAK,EAAC;AAAnB,SAAN;AAA+B;AAAC;;AAAA5D,IAAAA,WAAW,GAAC,IAAZ;AAAkB;;AAAA,MAAG+B,cAAc,CAACjD,aAAf,KAA+BrD,UAAU,CAACe,cAAX,CAA0BqH,iBAA5D,EAA8E;AAACzE,IAAAA,IAAI,GAAC,MAAL;AAAYC,IAAAA,SAAS,GAAC,0BAAV;AAAqC5F,IAAAA,KAAK,GAACc,SAAN;AAAiB;;AAAA,MAAGP,iBAAiB,CAAC+H,cAAc,CAACjD,aAAhB,CAAjB,IAAiD,CAACrF,KAArD,EAA2D;AAACA,IAAAA,KAAK,GAAC,EAAN;AAAU;;AAAA,MAAGM,2BAA2B,CAACgI,cAAc,CAACjD,aAAhB,CAA9B,EAA6D;AAAC,QAAIgF,IAAI,GAAC/B,cAAc,CAAC+B,IAAxB;AAA6B,QAAIC,QAAQ,GAAC,EAAb;;AAAgB,QAAGtK,KAAK,IAAEuC,KAAK,CAACC,OAAN,CAAcxC,KAAd,CAAV,EAA+B;AAACsK,MAAAA,QAAQ,GAACtK,KAAT;AAAgB,KAAhD,MAAqD,IAAGA,KAAK,IAAE,OAAOA,KAAP,KAAe,QAAzB,EAAkC;AAACsK,MAAAA,QAAQ,GAAC,CAACtK,KAAD,CAAT;AAAkB;;AAAA,QAAIuK,eAAe,GAAC,EAApB;;AAAuB,QAAGD,QAAQ,CAAClJ,MAAZ,EAAmB;AAAC,UAAGiJ,IAAI,IAAE9H,KAAK,CAACC,OAAN,CAAc6H,IAAd,CAAT,EAA6B;AAACC,QAAAA,QAAQ,CAAC1B,OAAT,CAAiB,UAASC,GAAT,EAAa;AAAC,cAAI2B,QAAQ,GAACH,IAAI,CAACI,IAAL,CAAU,UAASC,CAAT,EAAW;AAAC,mBAAOA,CAAC,CAACC,KAAF,KAAU9B,GAAjB;AAAsB,WAA5C,CAAb;;AAA2D,cAAG2B,QAAQ,IAAEA,QAAQ,CAACxK,KAAtB,EAA4B;AAACuK,YAAAA,eAAe,CAACzB,IAAhB,CAAqB0B,QAAQ,CAACxK,KAA9B;AAAsC;AAAC,SAA9J;AAAiK;AAAC;;AAAA,QAAGuK,eAAe,CAACnJ,MAAnB,EAA0B;AAACpB,MAAAA,KAAK,GAACuK,eAAN;AAAuB,KAAlD,MAAsD;AAACvK,MAAAA,KAAK,GAACc,SAAN;AAAiB;AAAC;;AAAA,MAAGwH,cAAc,CAACjD,aAAf,KAA+BrD,UAAU,CAACe,cAAX,CAA0BC,YAA5D,EAAyE;AAAC,QAAGhD,KAAK,GAAC,CAAT,EAAW;AAAC0C,MAAAA,IAAI,GAAC,CAAC1C,KAAK,GAAC,CAAP,KAAWsI,cAAc,CAACjC,IAAf,IAAqB,EAAhC,CAAL;AAA0C;;AAAArG,IAAAA,KAAK,GAACc,SAAN;AAAiB;;AAAA,SAAOC,QAAQ,CAAC,EAAD,EAAIuH,cAAJ,EAAmB;AAAC1C,IAAAA,SAAS,EAACA,SAAX;AAAqBW,IAAAA,WAAW,EAACA,WAAjC;AAA6CZ,IAAAA,IAAI,EAACA,IAAlD;AAAuD2B,IAAAA,YAAY,EAACA,YAApE;AAAiFN,IAAAA,QAAQ,EAACA,QAA1F;AAAmGlB,IAAAA,KAAK,EAACqC,KAAK,CAACyC,cAAN,GAAqBzC,KAAK,CAACyC,cAAN,CAAqBxC,SAArB,CAArB,GAAqDtH,SAA9J;AAAwKoG,IAAAA,WAAW,EAACiB,KAAK,CAAC0C,aAAN,GAAoB1C,KAAK,CAAC0C,aAAN,CAAoBzC,SAApB,CAApB,GAAmDtH,SAAvO;AAAiPqG,IAAAA,YAAY,EAACgB,KAAK,CAAC2C,cAAN,GAAqB3C,KAAK,CAAC2C,cAAN,CAAqB1C,SAArB,CAArB,GAAqDtH,SAAnT;AAA6TmG,IAAAA,eAAe,EAACkB,KAAK,CAAC4C,sBAAN,GAA6B5C,KAAK,CAAC4C,sBAAN,CAA6B3C,SAA7B,CAA7B,GAAqEtH,SAAlZ;AAA4ZsG,IAAAA,aAAa,EAACe,KAAK,CAACM,cAAN,CAAqBL,SAArB,IAAgCD,KAAK,CAACM,cAAN,CAAqBL,SAArB,EAAgC4C,QAAhE,GAAyElK,SAAnf;AAA6fd,IAAAA,KAAK,EAACA,KAAngB;AAAygByH,IAAAA,UAAU,EAACA,UAAphB;AAA+hB/E,IAAAA,IAAI,EAACA;AAApiB,GAAnB,EAA6jB2F,aAA7jB,CAAf;AAA4lB,CAAx7J;;AAAy7J,SAAS1G,aAAT,CAAuBsJ,SAAvB,EAAiC9F,WAAjC,EAA6C;AAAC,MAAI+F,YAAY,GAAC,EAAjB;;AAAoB,MAAIC,SAAS,GAAC,SAASA,SAAT,CAAmBrF,KAAnB,EAAyB;AAAC,QAAGA,KAAK,IAAEjG,MAAM,CAACuL,IAAP,CAAYtF,KAAZ,CAAV,EAA6B;AAACjG,MAAAA,MAAM,CAACuL,IAAP,CAAYtF,KAAZ,EAAmB8C,OAAnB,CAA2B,UAASyC,CAAT,EAAW;AAAC,YAAGvF,KAAK,CAACuF,CAAD,CAAR,EAAY;AAAC,cAAG,OAAOvF,KAAK,CAACuF,CAAD,CAAZ,KAAkB,QAArB,EAA8B;AAACH,YAAAA,YAAY,GAAC,GAAGI,MAAH,CAAUjJ,kBAAkB,CAAC6I,YAAD,CAA5B,EAA2C,CAACpF,KAAK,CAACuF,CAAD,CAAN,CAA3C,CAAb;AAAqE,WAApG,MAAyG,IAAG9I,KAAK,CAACC,OAAN,CAAcsD,KAAK,CAACuF,CAAD,CAAnB,CAAH,EAA2B;AAACH,YAAAA,YAAY,GAAC,GAAGI,MAAH,CAAUjJ,kBAAkB,CAAC6I,YAAD,CAA5B,EAA2C7I,kBAAkB,CAACyD,KAAK,CAACuF,CAAD,CAAN,CAA7D,CAAb;AAAuF,WAAnH,MAAwH,IAAG,OAAOvF,KAAK,CAACuF,CAAD,CAAZ,KAAkB,QAArB,EAA8B;AAACF,YAAAA,SAAS,CAACrF,KAAK,CAACuF,CAAD,CAAN,CAAT;AAAqB;AAAC;AAAC,OAA3U;AAA8U;AAAC,GAArZ;;AAAsZF,EAAAA,SAAS,CAACF,SAAD,CAAT;AAAqBC,EAAAA,YAAY,GAACA,YAAY,CAACK,MAAb,CAAoB,UAASzF,KAAT,EAAe;AAAC,WAAOA,KAAK,KAAGX,WAAf;AAA4B,GAAhE,CAAb;AAA+E,SAAO+F,YAAP;AAAqB;;AAAA,IAAIjL,mBAAmB,GAACF,OAAO,CAACE,mBAAR,GAA4B,SAASA,mBAAT,CAA6BkI,KAA7B,EAAmChD,WAAnC,EAA+C;AAAC,MAAIqG,cAAc,GAACrK,SAAS,CAACC,MAAV,GAAiB,CAAjB,IAAoBD,SAAS,CAAC,CAAD,CAAT,KAAeL,SAAnC,GAA6CK,SAAS,CAAC,CAAD,CAAtD,GAA0D,EAA7E;AAAgF,MAAIsK,UAAU,GAAC,EAAf;AAAkB,MAAI3F,KAAK,GAACnE,aAAa,CAACwG,KAAK,CAACyC,cAAN,CAAqBzF,WAArB,CAAD,EAAmCA,WAAnC,CAAvB;AAAuEW,EAAAA,KAAK,CAAC8C,OAAN,CAAc,UAASR,SAAT,EAAmB;AAAC,QAAIE,cAAc,GAACH,KAAK,CAAC3C,KAAN,CAAY4C,SAAZ,CAAnB;AAA0C,QAAIsD,sBAAsB,GAACpD,cAAc,GAAC/H,iBAAiB,CAAC+H,cAAc,CAACjD,aAAhB,CAAlB,GAAiD,IAA1F;AAA+F,QAAI6B,WAAW,GAACiB,KAAK,CAAC0C,aAAN,CAAoBzC,SAApB,CAAhB;;AAA+C,QAAG,CAACzH,mBAAmB,CAACyH,SAAD,CAApB,IAAiCsD,sBAApC,EAA2D;AAAC,UAAInD,UAAU,GAACJ,KAAK,CAACK,cAAN,CAAqBJ,SAArB,KAAiCD,KAAK,CAACM,cAAN,CAAqBL,SAArB,CAAhD;;AAAgF,UAAG,CAACG,UAAU,IAAErB,WAAb,KAA2B,CAACuE,UAAU,CAACrD,SAAD,CAAzC,EAAqD;AAAC,YAAI3C,OAAO,GAAC,KAAZ;;AAAkB,YAAGlD,KAAK,CAACC,OAAN,CAAcgJ,cAAd,KAA+BA,cAAc,CAAClG,QAAf,CAAwB8C,SAAxB,CAAlC,EAAqE;AAAC3C,UAAAA,OAAO,GAAC,IAAR;AAAc;;AAAA,YAAIkG,cAAc,GAACvL,UAAU,CAACgI,SAAD,EAAWlI,qBAAqB,CAACiI,KAAD,EAAOC,SAAP,CAAhC,EAAkD3C,OAAlD,CAA7B;;AAAwF,YAAGkG,cAAH,EAAkB;AAACF,UAAAA,UAAU,CAACrD,SAAD,CAAV,GAAsBuD,cAAtB;AAAsC;AAAC;AAAC;AAAC,GAAtpB;AAAwpB,SAAOF,UAAP;AAAmB,CAAx7B","sourcesContent":["Object.defineProperty(exports,\"__esModule\",{value:true});exports.getDependentQueries=exports.extractPropsFromState=exports.getValidInterval=exports.getRSQuery=exports.hasPaginationSupport=exports.isComponentUsesLabelAsValue=exports.isSearchComponent=exports.isDRSRangeComponent=exports.getHistogramComponentID=exports.getInternalComponentID=exports.isInternalComponent=exports.getNormalizedField=exports.componentToTypeMap=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _componentToTypeMap;exports.flatReactProp=flatReactProp;var _xdate=require('xdate');var _xdate2=_interopRequireDefault(_xdate);var _constants=require('./constants');var _helper=require('./helper');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var componentToTypeMap=exports.componentToTypeMap=(_componentToTypeMap={},_defineProperty(_componentToTypeMap,_constants.componentTypes.reactiveList,_constants.queryTypes.search),_defineProperty(_componentToTypeMap,_constants.componentTypes.dataSearch,_constants.queryTypes.search),_defineProperty(_componentToTypeMap,_constants.componentTypes.categorySearch,_constants.queryTypes.search),_defineProperty(_componentToTypeMap,_constants.componentTypes.singleList,_constants.queryTypes.term),_defineProperty(_componentToTypeMap,_constants.componentTypes.multiList,_constants.queryTypes.term),_defineProperty(_componentToTypeMap,_constants.componentTypes.singleDataList,_constants.queryTypes.term),_defineProperty(_componentToTypeMap,_constants.componentTypes.singleDropdownList,_constants.queryTypes.term),_defineProperty(_componentToTypeMap,_constants.componentTypes.multiDataList,_constants.queryTypes.term),_defineProperty(_componentToTypeMap,_constants.componentTypes.multiDropdownList,_constants.queryTypes.term),_defineProperty(_componentToTypeMap,_constants.componentTypes.tagCloud,_constants.queryTypes.term),_defineProperty(_componentToTypeMap,_constants.componentTypes.toggleButton,_constants.queryTypes.term),_defineProperty(_componentToTypeMap,_constants.componentTypes.numberBox,_constants.queryTypes.term),_defineProperty(_componentToTypeMap,_constants.componentTypes.datePicker,_constants.queryTypes.range),_defineProperty(_componentToTypeMap,_constants.componentTypes.dateRange,_constants.queryTypes.range),_defineProperty(_componentToTypeMap,_constants.componentTypes.dynamicRangeSlider,_constants.queryTypes.range),_defineProperty(_componentToTypeMap,_constants.componentTypes.singleDropdownRange,_constants.queryTypes.range),_defineProperty(_componentToTypeMap,_constants.componentTypes.multiDropdownRange,_constants.queryTypes.range),_defineProperty(_componentToTypeMap,_constants.componentTypes.singleRange,_constants.queryTypes.range),_defineProperty(_componentToTypeMap,_constants.componentTypes.multiRange,_constants.queryTypes.range),_defineProperty(_componentToTypeMap,_constants.componentTypes.rangeSlider,_constants.queryTypes.range),_defineProperty(_componentToTypeMap,_constants.componentTypes.ratingsFilter,_constants.queryTypes.range),_defineProperty(_componentToTypeMap,_constants.componentTypes.rangeInput,_constants.queryTypes.range),_defineProperty(_componentToTypeMap,_constants.componentTypes.geoDistanceDropdown,_constants.queryTypes.geo),_defineProperty(_componentToTypeMap,_constants.componentTypes.geoDistanceSlider,_constants.queryTypes.geo),_defineProperty(_componentToTypeMap,_constants.componentTypes.reactiveMap,_constants.queryTypes.geo),_componentToTypeMap);var multiRangeComponents=[_constants.componentTypes.multiRange,_constants.componentTypes.multiDropdownRange];var dateRangeComponents=[_constants.componentTypes.dateRange,_constants.componentTypes.datePicker];var searchComponents=[_constants.componentTypes.categorySearch,_constants.componentTypes.dataSearch];var listComponentsWithPagination=[_constants.componentTypes.singleList,_constants.componentTypes.multiList,_constants.componentTypes.singleDropdownList,_constants.componentTypes.multiDropdownList];var getNormalizedField=exports.getNormalizedField=function getNormalizedField(field){if(field&&!Array.isArray(field)){return[field];}return field;};var isInternalComponent=exports.isInternalComponent=function isInternalComponent(){var componentID=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';return componentID.endsWith('__internal');};var getInternalComponentID=exports.getInternalComponentID=function getInternalComponentID(){var componentID=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';return componentID+'__internal';};var getHistogramComponentID=exports.getHistogramComponentID=function getHistogramComponentID(){var componentID=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';return componentID+'__histogram__internal';};var isDRSRangeComponent=exports.isDRSRangeComponent=function isDRSRangeComponent(){var componentID=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';return componentID.endsWith('__range__internal');};var isSearchComponent=exports.isSearchComponent=function isSearchComponent(){var componentType=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';return searchComponents.includes(componentType);};var isComponentUsesLabelAsValue=exports.isComponentUsesLabelAsValue=function isComponentUsesLabelAsValue(){var componentType=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';return componentType===_constants.componentTypes.multiDataList||componentType===_constants.componentTypes.singleDataList;};var hasPaginationSupport=exports.hasPaginationSupport=function hasPaginationSupport(){var componentType=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';return listComponentsWithPagination.includes(componentType);};var getRSQuery=exports.getRSQuery=function getRSQuery(componentId,props){var execute=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;if(props&&componentId){var queryType=props.type?props.type:componentToTypeMap[props.componentType];if(!isSearchComponent(props.componentType)&&!props.dataField){return null;}return{id:componentId,type:queryType,dataField:getNormalizedField(props.dataField),execute:execute,react:props.react,highlight:props.highlight,highlightField:getNormalizedField(props.highlightField),fuzziness:props.fuzziness,searchOperators:props.searchOperators,includeFields:props.includeFields,excludeFields:props.excludeFields,size:props.size,aggregationSize:props.aggregationSize,from:props.from,queryFormat:props.queryFormat,sortBy:props.sortBy,fieldWeights:getNormalizedField(props.fieldWeights),includeNullValues:props.includeNullValues,aggregationField:props.aggregationField||undefined,categoryField:props.categoryField||undefined,missingLabel:props.missingLabel||undefined,showMissing:props.showMissing,nestedField:props.nestedField||undefined,interval:props.interval,customHighlight:props.customHighlight,customQuery:props.customQuery,defaultQuery:props.defaultQuery,value:props.value,categoryValue:props.categoryValue||undefined,after:props.after||undefined,aggregations:props.aggregations||undefined,enableSynonyms:props.enableSynonyms,selectAllLabel:props.selectAllLabel,pagination:props.pagination,queryString:props.queryString,distinctField:props.distinctField,distinctFieldConfig:props.distinctFieldConfig,index:props.index};}return null;};var getValidInterval=exports.getValidInterval=function getValidInterval(interval){var range=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var min=Math.ceil((range.end-range.start)/100)||1;if(!interval){return min;}else if(interval<min){return min;}return interval;};var extractPropsFromState=exports.extractPropsFromState=function extractPropsFromState(store,component,customOptions){var componentProps=store.props[component];if(!componentProps){return null;}var queryType=componentToTypeMap[componentProps.componentType];var calcValues=store.selectedValues[component]||store.internalValues[component];var value=calcValues!==undefined&&calcValues!==null?calcValues.value:undefined;var queryFormat=componentProps.queryFormat;var interval=componentProps.interval;var type=componentToTypeMap[componentProps.componentType];var dataField=componentProps.dataField;var aggregations=void 0;var pagination=void 0;var from=componentProps.from;if(queryType===_constants.queryTypes.term){if(componentProps.showLoadMore&&hasPaginationSupport(componentProps.componentType)){pagination=true;}if(value!=null&&typeof value==='object'&&value.value){value=value.value;}else if(Array.isArray(value)){var parsedValue=[];value.forEach(function(val){if(val!=null&&typeof val==='object'&&val.value){parsedValue.push(val.value);}else{parsedValue.push(val);}});value=parsedValue;}}if(queryType===_constants.queryTypes.range){if(Array.isArray(value)){if(multiRangeComponents.includes(componentProps.componentType)){value=value.map(function(_ref){var start=_ref.start,end=_ref.end;return{start:start,end:end};});}else{value={start:value[0],end:value[1]};}}else if(componentProps.showHistogram){var internalComponentID=getInternalComponentID(component);var internalComponentValue=store.internalValues[internalComponentID];if(!internalComponentValue){var histogramComponentID=getHistogramComponentID(component);internalComponentValue=store.internalValues[histogramComponentID];}if(internalComponentValue&&Array.isArray(internalComponentValue.value)){value={start:internalComponentValue.value[0],end:internalComponentValue.value[1]};interval=getValidInterval(interval,value);}}if(isDRSRangeComponent(component)){aggregations=['min','max'];}else if(componentProps.showHistogram){aggregations=['histogram'];}if(dateRangeComponents.includes(componentProps.componentType)){queryFormat='or';if(value){if(typeof value==='string'){value={start:(0,_helper.formatDate)(new _xdate2.default(value).addHours(-24),componentProps),end:(0,_helper.formatDate)(new _xdate2.default(value),componentProps)};}else if(Array.isArray(value)){value=value.map(function(val){return{start:(0,_helper.formatDate)(new _xdate2.default(val).addHours(-24),componentProps),end:(0,_helper.formatDate)(new _xdate2.default(val),componentProps)};});}}}}if(queryType===_constants.queryTypes.geo){value=undefined;var geoCalcValues=store.selectedValues[component]||store.internalValues[component]||store.internalValues[getInternalComponentID(component)];if(geoCalcValues&&geoCalcValues.meta){if(geoCalcValues.meta.distance&&geoCalcValues.meta.coordinates){value={distance:geoCalcValues.meta.distance,location:geoCalcValues.meta.coordinates};if(componentProps.unit){value.unit=componentProps.unit;}}if(geoCalcValues.meta.mapBoxBounds&&geoCalcValues.meta.mapBoxBounds.top_left&&geoCalcValues.meta.mapBoxBounds.bottom_right){value={geoBoundingBox:{topLeft:geoCalcValues.meta.mapBoxBounds.top_left[1]+', '+geoCalcValues.meta.mapBoxBounds.top_left[0],bottomRight:geoCalcValues.meta.mapBoxBounds.bottom_right[1]+', '+geoCalcValues.meta.mapBoxBounds.bottom_right[0]}};}}}if(componentProps.componentType===_constants.componentTypes.numberBox){if(queryFormat==='exact'){type='term';}else{type='range';if(queryFormat==='lte'){value={end:value,boost:2.0};}else{value={start:value,boost:2.0};}}queryFormat='or';}if(componentProps.componentType===_constants.componentTypes.reactiveComponent){type='term';dataField='reactive_component_field';value=undefined;}if(isSearchComponent(componentProps.componentType)&&!value){value='';}if(isComponentUsesLabelAsValue(componentProps.componentType)){var data=componentProps.data;var absValue=[];if(value&&Array.isArray(value)){absValue=value;}else if(value&&typeof value==='string'){absValue=[value];}var normalizedValue=[];if(absValue.length){if(data&&Array.isArray(data)){absValue.forEach(function(val){var dataItem=data.find(function(o){return o.label===val;});if(dataItem&&dataItem.value){normalizedValue.push(dataItem.value);}});}}if(normalizedValue.length){value=normalizedValue;}else{value=undefined;}}if(componentProps.componentType===_constants.componentTypes.reactiveList){if(value>0){from=(value-1)*(componentProps.size||10);}value=undefined;}return _extends({},componentProps,{dataField:dataField,queryFormat:queryFormat,type:type,aggregations:aggregations,interval:interval,react:store.dependencyTree?store.dependencyTree[component]:undefined,customQuery:store.customQueries?store.customQueries[component]:undefined,defaultQuery:store.defaultQueries?store.defaultQueries[component]:undefined,customHighlight:store.customHighlightOptions?store.customHighlightOptions[component]:undefined,categoryValue:store.internalValues[component]?store.internalValues[component].category:undefined,value:value,pagination:pagination,from:from},customOptions);};function flatReactProp(reactProp,componentID){var flattenReact=[];var flatReact=function flatReact(react){if(react&&Object.keys(react)){Object.keys(react).forEach(function(r){if(react[r]){if(typeof react[r]==='string'){flattenReact=[].concat(_toConsumableArray(flattenReact),[react[r]]);}else if(Array.isArray(react[r])){flattenReact=[].concat(_toConsumableArray(flattenReact),_toConsumableArray(react[r]));}else if(typeof react[r]==='object'){flatReact(react[r]);}}});}};flatReact(reactProp);flattenReact=flattenReact.filter(function(react){return react!==componentID;});return flattenReact;}var getDependentQueries=exports.getDependentQueries=function getDependentQueries(store,componentID){var orderOfQueries=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var finalQuery={};var react=flatReactProp(store.dependencyTree[componentID],componentID);react.forEach(function(component){var componentProps=store.props[component];var shouldAddInternalQuery=componentProps?isSearchComponent(componentProps.componentType):null;var customQuery=store.customQueries[component];if(!isInternalComponent(component)||shouldAddInternalQuery){var calcValues=store.selectedValues[component]||store.internalValues[component];if((calcValues||customQuery)&&!finalQuery[component]){var execute=false;if(Array.isArray(orderOfQueries)&&orderOfQueries.includes(component)){execute=true;}var dependentQuery=getRSQuery(component,extractPropsFromState(store,component),execute);if(dependentQuery){finalQuery[component]=dependentQuery;}}}});return finalQuery;};"]},"metadata":{},"sourceType":"script"}