{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _transform = require('@appbaseio/reactivecore/lib/utils/transform');\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _utils = require('../../utils');\n\nvar _ComponentWrapper = require('../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar ReactiveComponent = function (_Component) {\n  _inherits(ReactiveComponent, _Component);\n\n  function ReactiveComponent(props) {\n    _classCallCheck(this, ReactiveComponent);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _this.getAggsQuery = function () {\n      if (_this.props.aggregationField) {\n        return (0, _helper.getCompositeAggsQuery)({\n          props: _this.props,\n          showTopHits: true,\n          value: _this.props.value\n        });\n      }\n\n      return {};\n    };\n\n    _this.internalComponent = null;\n    _this.defaultQuery = null;\n\n    _this.setQuery = function (data) {\n      if (!data) {\n        console.error('setQuery accepts the arguments of shape { query, options, value }.');\n        return;\n      }\n\n      var options = data.options,\n          obj = _objectWithoutProperties(data, ['options']);\n\n      if (options) {\n        props.setQueryOptions(props.componentId, _extends({}, options, _this.getAggsQuery()), false);\n      }\n\n      var queryToBeSet = obj.query; // when enableAppbase is true, Backend throws error because of repeated query in request body\n\n      if (obj && obj.query && obj.query.query) {\n        queryToBeSet = obj.query.query;\n      } // Update customQuery field for RS API\n\n\n      if (obj && obj.query || options) {\n        var customQuery = _extends({}, options);\n\n        if (obj && obj.query) {\n          customQuery.query = queryToBeSet;\n        }\n\n        props.setCustomQuery(props.componentId, customQuery);\n      }\n\n      _this.props.updateQuery(_extends({}, obj, {\n        query: queryToBeSet,\n        componentId: props.componentId,\n        label: props.filterLabel,\n        showFilter: props.showFilter,\n        URLParams: props.URLParams\n      }));\n    };\n\n    if (props.defaultQuery) {\n      _this.internalComponent = (0, _transform.getInternalComponentID)(props.componentId);\n    } // Set custom and default queries in store\n\n\n    (0, _helper.updateCustomQuery)(props.componentId, props, undefined);\n    (0, _helper.updateDefaultQuery)(props.componentId, props, undefined);\n\n    if (_this.internalComponent && props.defaultQuery) {\n      _this.defaultQuery = props.defaultQuery();\n\n      var _ref = _this.defaultQuery || {},\n          query = _ref.query;\n\n      var defaultQueryOptions = _this.defaultQuery ? (0, _helper.getOptionsFromQuery)(_this.defaultQuery) : null;\n\n      if (defaultQueryOptions) {\n        props.setQueryOptions(_this.internalComponent, _extends({}, defaultQueryOptions, _this.getAggsQuery()), false);\n      } else _this.props.setQueryOptions(_this.internalComponent, _this.getAggsQuery());\n\n      props.updateQuery({\n        componentId: _this.internalComponent,\n        query: query || null\n      });\n    }\n\n    return _this;\n  }\n\n  ReactiveComponent.prototype.componentDidMount = function componentDidMount() {\n    var _props = this.props,\n        customQuery = _props.customQuery,\n        selectedValue = _props.selectedValue,\n        value = _props.value,\n        defaultValue = _props.defaultValue,\n        componentId = _props.componentId,\n        filterLabel = _props.filterLabel,\n        showFilter = _props.showFilter,\n        URLParams = _props.URLParams,\n        aggregationField = _props.aggregationField,\n        config = _props.config,\n        distinctField = _props.distinctField,\n        distinctFieldConfig = _props.distinctFieldConfig,\n        index = _props.index;\n    var initialValue = selectedValue || value || defaultValue || null;\n    var enableAppbase = config.enableAppbase;\n\n    if (enableAppbase && aggregationField) {\n      console.warn('Warning(ReactiveSearch): The `aggregationField` prop has been marked as deprecated, please use the `distinctField` prop instead.');\n    }\n\n    if (!enableAppbase && (distinctField || distinctFieldConfig)) {\n      console.warn('Warning(ReactiveSearch): In order to use the `distinctField` and `distinctFieldConfig` props, the `enableAppbase` prop must be set to true in `ReactiveBase`.');\n    }\n\n    if (!enableAppbase && index) {\n      console.warn('Warning(ReactiveSearch): In order to use the `index` prop, the `enableAppbase` prop must be set to true in `ReactiveBase`.');\n    }\n\n    if (customQuery) {\n      var calcCustomQuery = customQuery(this.props);\n\n      var _ref2 = calcCustomQuery || {},\n          query = _ref2.query;\n\n      var customQueryOptions = calcCustomQuery ? (0, _helper.getOptionsFromQuery)(calcCustomQuery) : null;\n\n      if (customQueryOptions) {\n        this.props.setQueryOptions(componentId, _extends({}, customQueryOptions, this.getAggsQuery()), false);\n      } else this.props.setQueryOptions(componentId, this.getAggsQuery(), false);\n\n      this.props.updateQuery({\n        componentId: componentId,\n        query: query,\n        value: initialValue,\n        label: filterLabel,\n        showFilter: showFilter,\n        URLParams: URLParams\n      });\n    }\n  };\n\n  ReactiveComponent.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var _this2 = this; // only consider hits and defaultQuery when customQuery is absent\n\n\n    if (this.props.onData) {\n      (0, _helper.checkSomePropChange)(this.props, prevProps, ['hits', 'aggregations', 'promotedResults', 'total', 'time', 'hidden'], function () {\n        _this2.props.onData(_this2.getData());\n      });\n    }\n\n    (0, _helper.checkPropChange)(this.props.selectedValue, prevProps.selectedValue, function () {\n      /*\n      \tReset query when SelectedFilters are clicked. Note: `selectedValue` becomes null.\n      */\n      if (_this2.props.selectedValue === null) {\n        _this2.props.updateQuery({\n          componentId: _this2.props.componentId,\n          query: null\n        });\n      }\n    });\n\n    if (this.props.defaultQuery && !(0, _helper.isEqual)(this.props.defaultQuery(), this.defaultQuery)) {\n      this.defaultQuery = this.props.defaultQuery();\n\n      var _ref3 = this.defaultQuery || {},\n          query = _ref3.query,\n          queryOptions = _objectWithoutProperties(_ref3, ['query']);\n\n      if (queryOptions) {\n        this.props.setQueryOptions(this.internalComponent, _extends({}, queryOptions, this.getAggsQuery()), false);\n      } else this.props.setQueryOptions(this.internalComponent, this.getAggsQuery(), false);\n\n      (0, _helper.updateDefaultQuery)(this.props.componentId, this.props, undefined);\n      this.props.updateQuery({\n        componentId: this.internalComponent,\n        query: query || null\n      });\n    }\n\n    if (this.props.customQuery && !(0, _helper.isEqual)(this.props.customQuery(this.props), prevProps.customQuery(this.props))) {\n      var _ref4 = this.props.customQuery(this.props) || {},\n          _query = _ref4.query,\n          _queryOptions = _objectWithoutProperties(_ref4, ['query']);\n\n      if (_queryOptions) {\n        this.props.setQueryOptions(this.props.componentId, _extends({}, _queryOptions, this.getAggsQuery()), false);\n      } else this.props.setQueryOptions(this.props.componentId, this.getAggsQuery(), false);\n\n      (0, _helper.updateCustomQuery)(this.props.componentId, this.props, undefined);\n      this.props.updateQuery({\n        componentId: this.props.componentId,\n        query: _query || null\n      });\n    }\n  };\n\n  ReactiveComponent.prototype.getData = function getData() {\n    var _props2 = this.props,\n        hits = _props2.hits,\n        aggregations = _props2.aggregations,\n        aggregationData = _props2.aggregationData,\n        promotedResults = _props2.promotedResults,\n        rawData = _props2.rawData;\n    var filteredResults = (0, _helper.parseHits)(hits);\n\n    if (promotedResults.length) {\n      var ids = promotedResults.map(function (item) {\n        return item._id;\n      }).filter(Boolean);\n\n      if (ids) {\n        filteredResults = filteredResults.filter(function (item) {\n          return !ids.includes(item._id);\n        });\n      }\n\n      filteredResults = [].concat(promotedResults, filteredResults);\n    }\n\n    return {\n      data: filteredResults,\n      promotedData: promotedResults,\n      aggregationData: aggregationData || [],\n      rawData: rawData,\n      aggregations: aggregations,\n      resultStats: this.stats\n    };\n  };\n\n  ReactiveComponent.prototype.getComponent = function getComponent() {\n    var _props3 = this.props,\n        error = _props3.error,\n        isLoading = _props3.isLoading,\n        selectedValue = _props3.selectedValue;\n\n    var data = _extends({\n      error: error,\n      loading: isLoading\n    }, this.getData(), {\n      value: selectedValue,\n      setQuery: this.setQuery\n    });\n\n    return (0, _utils.getComponent)(data, this.props);\n  };\n\n  ReactiveComponent.prototype.render = function render() {\n    if ((0, _utils.hasCustomRenderer)(this.props)) {\n      return this.getComponent();\n    }\n\n    return null;\n  };\n\n  _createClass(ReactiveComponent, [{\n    key: 'stats',\n    get: function get() {\n      return (0, _helper.getResultStats)(this.props);\n    }\n  }]);\n\n  return ReactiveComponent;\n}(_react.Component);\n\nReactiveComponent.defaultProps = {\n  showFilter: true,\n  URLParams: false,\n  size: 20\n};\nReactiveComponent.propTypes = {\n  error: _types2.default.title,\n  setQueryOptions: _types2.default.funcRequired,\n  updateQuery: _types2.default.funcRequired,\n  aggregationField: _types2.default.string,\n  aggregationSize: _types2.default.number,\n  size: _types2.default.number,\n  aggregations: _types2.default.selectedValues,\n  aggregationData: _types2.default.aggregationData,\n  hits: _types2.default.data,\n  rawData: _types2.default.rawData,\n  promotedResults: _types2.default.hits,\n  isLoading: _types2.default.bool,\n  selectedValue: _types2.default.selectedValue,\n  setCustomQuery: _types2.default.funcRequired,\n  // component props\n  children: _types2.default.func,\n  componentId: _types2.default.stringRequired,\n  defaultQuery: _types2.default.func,\n  customQuery: _types2.default.func,\n  defaultValue: _types2.default.any,\n  // eslint-disable-line\n  value: _types2.default.any,\n  // eslint-disable-line\n  filterLabel: _types2.default.string,\n  onQueryChange: _types2.default.func,\n  onError: _types2.default.func,\n  react: _types2.default.react,\n  render: _types2.default.func,\n  showFilter: _types2.default.bool,\n  URLParams: _types2.default.bool,\n  onData: _types2.default.func,\n  distinctField: _types2.default.string,\n  distinctFieldConfig: _types2.default.componentObject,\n  config: _types2.default.props,\n  index: _types2.default.string\n}; // Add componentType for SSR\n\nReactiveComponent.componentType = _constants.componentTypes.reactiveComponent;\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  return {\n    aggregations: state.aggregations[props.componentId] && state.aggregations[props.componentId] || null,\n    aggregationData: state.compositeAggregations[props.componentId] || [],\n    hits: state.hits[props.componentId] && state.hits[props.componentId].hits || [],\n    rawData: state.rawData[props.componentId],\n    selectedValue: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value || null,\n    isLoading: state.isLoading[props.componentId],\n    error: state.error[props.componentId],\n    promotedResults: state.promotedResults[props.componentId] || [],\n    time: state.hits[props.componentId] && state.hits[props.componentId].time || 0,\n    total: state.hits[props.componentId] && state.hits[props.componentId].total,\n    hidden: state.hits[props.componentId] && state.hits[props.componentId].hidden,\n    config: state.config\n  };\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n  return {\n    setCustomQuery: function setCustomQuery(component, query) {\n      return dispatch((0, _actions.setCustomQuery)(component, query));\n    },\n    setDefaultQuery: function setDefaultQuery(component, query) {\n      return dispatch((0, _actions.setDefaultQuery)(component, query));\n    },\n    setQueryOptions: function setQueryOptions(component, props, execute) {\n      return dispatch((0, _actions.setQueryOptions)(component, props, execute));\n    },\n    updateQuery: function updateQuery(updateQueryObject) {\n      return dispatch((0, _actions.updateQuery)(updateQueryObject));\n    }\n  };\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)(function (props) {\n  return _react2.default.createElement(_ComponentWrapper2.default, _extends({}, props, {\n    internalComponent: !!props.defaultQuery,\n    componentType: _constants.componentTypes.reactiveComponent\n  }), function () {\n    return _react2.default.createElement(ReactiveComponent, _extends({\n      ref: props.myForwardedRef\n    }, props));\n  });\n}); // eslint-disable-next-line\n\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n  return _react2.default.createElement(ConnectedComponent, _extends({}, props, {\n    myForwardedRef: ref\n  }));\n});\n\nForwardRefComponent.displayName = 'ReactiveComponent';\nexports.default = ForwardRefComponent;","map":{"version":3,"sources":["C:/Users/hiro/react_project/react_search/react_search/frontend/node_modules/@appbaseio/reactivesearch/lib/components/basic/ReactiveComponent.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","_actions","_helper","_types","_types2","_transform","_constants","_utils","_ComponentWrapper","_ComponentWrapper2","obj","default","_objectWithoutProperties","keys","indexOf","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","setPrototypeOf","__proto__","ReactiveComponent","_Component","_this","getAggsQuery","aggregationField","getCompositeAggsQuery","showTopHits","internalComponent","defaultQuery","setQuery","data","console","error","options","setQueryOptions","componentId","queryToBeSet","query","customQuery","setCustomQuery","updateQuery","label","filterLabel","showFilter","URLParams","getInternalComponentID","updateCustomQuery","undefined","updateDefaultQuery","_ref","defaultQueryOptions","getOptionsFromQuery","componentDidMount","_props","selectedValue","defaultValue","config","distinctField","distinctFieldConfig","index","initialValue","enableAppbase","warn","calcCustomQuery","_ref2","customQueryOptions","componentDidUpdate","prevProps","_this2","onData","checkSomePropChange","getData","checkPropChange","isEqual","_ref3","queryOptions","_ref4","_query","_queryOptions","_props2","hits","aggregations","aggregationData","promotedResults","rawData","filteredResults","parseHits","ids","map","item","_id","filter","Boolean","includes","concat","promotedData","resultStats","stats","getComponent","_props3","isLoading","loading","render","hasCustomRenderer","get","getResultStats","Component","defaultProps","size","propTypes","title","funcRequired","string","aggregationSize","number","selectedValues","bool","children","func","stringRequired","any","onQueryChange","onError","react","componentObject","componentType","componentTypes","reactiveComponent","mapStateToProps","state","compositeAggregations","time","total","hidden","mapDispatchtoProps","dispatch","component","setDefaultQuery","execute","updateQueryObject","ConnectedComponent","connect","createElement","ref","myForwardedRef","ForwardRefComponent","forwardRef","displayName"],"mappings":"AAAA;;AAEAA,OAAO,CAACC,UAAR,GAAqB,IAArB;;AAEA,IAAIC,QAAQ,GAAGC,MAAM,CAACC,MAAP,IAAiB,UAAUC,MAAV,EAAkB;AAAE,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AAAE,QAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAtB;;AAA2B,SAAK,IAAII,GAAT,IAAgBD,MAAhB,EAAwB;AAAE,UAAIN,MAAM,CAACQ,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCJ,MAArC,EAA6CC,GAA7C,CAAJ,EAAuD;AAAEL,QAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AAA4B;AAAE;AAAE;;AAAC,SAAOL,MAAP;AAAgB,CAAhQ;;AAEA,IAAIS,YAAY,GAAG,YAAY;AAAE,WAASC,gBAAT,CAA0BV,MAA1B,EAAkCW,KAAlC,EAAyC;AAAE,SAAK,IAAIV,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGU,KAAK,CAACR,MAA1B,EAAkCF,CAAC,EAAnC,EAAuC;AAAE,UAAIW,UAAU,GAAGD,KAAK,CAACV,CAAD,CAAtB;AAA2BW,MAAAA,UAAU,CAACC,UAAX,GAAwBD,UAAU,CAACC,UAAX,IAAyB,KAAjD;AAAwDD,MAAAA,UAAU,CAACE,YAAX,GAA0B,IAA1B;AAAgC,UAAI,WAAWF,UAAf,EAA2BA,UAAU,CAACG,QAAX,GAAsB,IAAtB;AAA4BjB,MAAAA,MAAM,CAACkB,cAAP,CAAsBhB,MAAtB,EAA8BY,UAAU,CAACP,GAAzC,EAA8CO,UAA9C;AAA4D;AAAE;;AAAC,SAAO,UAAUK,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,QAAID,UAAJ,EAAgBR,gBAAgB,CAACO,WAAW,CAACX,SAAb,EAAwBY,UAAxB,CAAhB;AAAqD,QAAIC,WAAJ,EAAiBT,gBAAgB,CAACO,WAAD,EAAcE,WAAd,CAAhB;AAA4C,WAAOF,WAAP;AAAqB,GAAhN;AAAmN,CAA9hB,EAAnB;;AAEA,IAAIG,MAAM,GAAGC,OAAO,CAAC,OAAD,CAApB;;AAEA,IAAIC,OAAO,GAAGC,sBAAsB,CAACH,MAAD,CAApC;;AAEA,IAAII,QAAQ,GAAGH,OAAO,CAAC,qCAAD,CAAtB;;AAEA,IAAII,OAAO,GAAGJ,OAAO,CAAC,0CAAD,CAArB;;AAEA,IAAIK,MAAM,GAAGL,OAAO,CAAC,yCAAD,CAApB;;AAEA,IAAIM,OAAO,GAAGJ,sBAAsB,CAACG,MAAD,CAApC;;AAEA,IAAIE,UAAU,GAAGP,OAAO,CAAC,6CAAD,CAAxB;;AAEA,IAAIQ,UAAU,GAAGR,OAAO,CAAC,6CAAD,CAAxB;;AAEA,IAAIS,MAAM,GAAGT,OAAO,CAAC,aAAD,CAApB;;AAEA,IAAIU,iBAAiB,GAAGV,OAAO,CAAC,2BAAD,CAA/B;;AAEA,IAAIW,kBAAkB,GAAGT,sBAAsB,CAACQ,iBAAD,CAA/C;;AAEA,SAASR,sBAAT,CAAgCU,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACrC,UAAX,GAAwBqC,GAAxB,GAA8B;AAAEC,IAAAA,OAAO,EAAED;AAAX,GAArC;AAAwD;;AAE/F,SAASE,wBAAT,CAAkCF,GAAlC,EAAuCG,IAAvC,EAA6C;AAAE,MAAIpC,MAAM,GAAG,EAAb;;AAAiB,OAAK,IAAIC,CAAT,IAAcgC,GAAd,EAAmB;AAAE,QAAIG,IAAI,CAACC,OAAL,CAAapC,CAAb,KAAmB,CAAvB,EAA0B;AAAU,QAAI,CAACH,MAAM,CAACQ,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCyB,GAArC,EAA0ChC,CAA1C,CAAL,EAAmD;AAAUD,IAAAA,MAAM,CAACC,CAAD,CAAN,GAAYgC,GAAG,CAAChC,CAAD,CAAf;AAAqB;;AAAC,SAAOD,MAAP;AAAgB;;AAE5N,SAASsC,eAAT,CAAyBC,QAAzB,EAAmCtB,WAAnC,EAAgD;AAAE,MAAI,EAAEsB,QAAQ,YAAYtB,WAAtB,CAAJ,EAAwC;AAAE,UAAM,IAAIuB,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,SAASC,0BAAT,CAAoCC,IAApC,EAA0ClC,IAA1C,EAAgD;AAAE,MAAI,CAACkC,IAAL,EAAW;AAAE,UAAM,IAAIC,cAAJ,CAAmB,2DAAnB,CAAN;AAAwF;;AAAC,SAAOnC,IAAI,KAAK,OAAOA,IAAP,KAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAAjD,CAAJ,GAAmEA,IAAnE,GAA0EkC,IAAjF;AAAwF;;AAEhP,SAASE,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;AAAE,MAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,UAAU,KAAK,IAAvD,EAA6D;AAAE,UAAM,IAAIN,SAAJ,CAAc,6DAA6D,OAAOM,UAAlF,CAAN;AAAsG;;AAACD,EAAAA,QAAQ,CAACvC,SAAT,GAAqBR,MAAM,CAACiD,MAAP,CAAcD,UAAU,IAAIA,UAAU,CAACxC,SAAvC,EAAkD;AAAE0C,IAAAA,WAAW,EAAE;AAAEC,MAAAA,KAAK,EAAEJ,QAAT;AAAmBhC,MAAAA,UAAU,EAAE,KAA/B;AAAsCE,MAAAA,QAAQ,EAAE,IAAhD;AAAsDD,MAAAA,YAAY,EAAE;AAApE;AAAf,GAAlD,CAArB;AAAqK,MAAIgC,UAAJ,EAAgBhD,MAAM,CAACoD,cAAP,GAAwBpD,MAAM,CAACoD,cAAP,CAAsBL,QAAtB,EAAgCC,UAAhC,CAAxB,GAAsED,QAAQ,CAACM,SAAT,GAAqBL,UAA3F;AAAwG;;AAE9e,IAAIM,iBAAiB,GAAG,UAAUC,UAAV,EAAsB;AAC7CT,EAAAA,SAAS,CAACQ,iBAAD,EAAoBC,UAApB,CAAT;;AAEA,WAASD,iBAAT,CAA2BzC,KAA3B,EAAkC;AACjC2B,IAAAA,eAAe,CAAC,IAAD,EAAOc,iBAAP,CAAf;;AAEA,QAAIE,KAAK,GAAGb,0BAA0B,CAAC,IAAD,EAAOY,UAAU,CAAC7C,IAAX,CAAgB,IAAhB,EAAsBG,KAAtB,CAAP,CAAtC;;AAEA2C,IAAAA,KAAK,CAACC,YAAN,GAAqB,YAAY;AAChC,UAAID,KAAK,CAAC3C,KAAN,CAAY6C,gBAAhB,EAAkC;AACjC,eAAO,CAAC,GAAG/B,OAAO,CAACgC,qBAAZ,EAAmC;AACzC9C,UAAAA,KAAK,EAAE2C,KAAK,CAAC3C,KAD4B;AAEzC+C,UAAAA,WAAW,EAAE,IAF4B;AAGzCT,UAAAA,KAAK,EAAEK,KAAK,CAAC3C,KAAN,CAAYsC;AAHsB,SAAnC,CAAP;AAKA;;AACD,aAAO,EAAP;AACA,KATD;;AAWAK,IAAAA,KAAK,CAACK,iBAAN,GAA0B,IAA1B;AACAL,IAAAA,KAAK,CAACM,YAAN,GAAqB,IAArB;;AACAN,IAAAA,KAAK,CAACO,QAAN,GAAiB,UAAUC,IAAV,EAAgB;AAChC,UAAI,CAACA,IAAL,EAAW;AACVC,QAAAA,OAAO,CAACC,KAAR,CAAc,oEAAd;AACA;AACA;;AAED,UAAIC,OAAO,GAAGH,IAAI,CAACG,OAAnB;AAAA,UACIhC,GAAG,GAAGE,wBAAwB,CAAC2B,IAAD,EAAO,CAAC,SAAD,CAAP,CADlC;;AAGA,UAAIG,OAAJ,EAAa;AACZtD,QAAAA,KAAK,CAACuD,eAAN,CAAsBvD,KAAK,CAACwD,WAA5B,EAAyCtE,QAAQ,CAAC,EAAD,EAAKoE,OAAL,EAAcX,KAAK,CAACC,YAAN,EAAd,CAAjD,EAAsF,KAAtF;AACA;;AAED,UAAIa,YAAY,GAAGnC,GAAG,CAACoC,KAAvB,CAbgC,CAehC;;AACA,UAAIpC,GAAG,IAAIA,GAAG,CAACoC,KAAX,IAAoBpC,GAAG,CAACoC,KAAJ,CAAUA,KAAlC,EAAyC;AACxCD,QAAAA,YAAY,GAAGnC,GAAG,CAACoC,KAAJ,CAAUA,KAAzB;AACA,OAlB+B,CAoBhC;;;AACA,UAAIpC,GAAG,IAAIA,GAAG,CAACoC,KAAX,IAAoBJ,OAAxB,EAAiC;AAChC,YAAIK,WAAW,GAAGzE,QAAQ,CAAC,EAAD,EAAKoE,OAAL,CAA1B;;AACA,YAAIhC,GAAG,IAAIA,GAAG,CAACoC,KAAf,EAAsB;AACrBC,UAAAA,WAAW,CAACD,KAAZ,GAAoBD,YAApB;AACA;;AACDzD,QAAAA,KAAK,CAAC4D,cAAN,CAAqB5D,KAAK,CAACwD,WAA3B,EAAwCG,WAAxC;AACA;;AACDhB,MAAAA,KAAK,CAAC3C,KAAN,CAAY6D,WAAZ,CAAwB3E,QAAQ,CAAC,EAAD,EAAKoC,GAAL,EAAU;AACzCoC,QAAAA,KAAK,EAAED,YADkC;AAEzCD,QAAAA,WAAW,EAAExD,KAAK,CAACwD,WAFsB;AAGzCM,QAAAA,KAAK,EAAE9D,KAAK,CAAC+D,WAH4B;AAIzCC,QAAAA,UAAU,EAAEhE,KAAK,CAACgE,UAJuB;AAKzCC,QAAAA,SAAS,EAAEjE,KAAK,CAACiE;AALwB,OAAV,CAAhC;AAOA,KAnCD;;AAqCA,QAAIjE,KAAK,CAACiD,YAAV,EAAwB;AACvBN,MAAAA,KAAK,CAACK,iBAAN,GAA0B,CAAC,GAAG/B,UAAU,CAACiD,sBAAf,EAAuClE,KAAK,CAACwD,WAA7C,CAA1B;AACA,KAzDgC,CA2DjC;;;AACA,KAAC,GAAG1C,OAAO,CAACqD,iBAAZ,EAA+BnE,KAAK,CAACwD,WAArC,EAAkDxD,KAAlD,EAAyDoE,SAAzD;AACA,KAAC,GAAGtD,OAAO,CAACuD,kBAAZ,EAAgCrE,KAAK,CAACwD,WAAtC,EAAmDxD,KAAnD,EAA0DoE,SAA1D;;AAEA,QAAIzB,KAAK,CAACK,iBAAN,IAA2BhD,KAAK,CAACiD,YAArC,EAAmD;AAClDN,MAAAA,KAAK,CAACM,YAAN,GAAqBjD,KAAK,CAACiD,YAAN,EAArB;;AAEA,UAAIqB,IAAI,GAAG3B,KAAK,CAACM,YAAN,IAAsB,EAAjC;AAAA,UACIS,KAAK,GAAGY,IAAI,CAACZ,KADjB;;AAGA,UAAIa,mBAAmB,GAAG5B,KAAK,CAACM,YAAN,GAAqB,CAAC,GAAGnC,OAAO,CAAC0D,mBAAZ,EAAiC7B,KAAK,CAACM,YAAvC,CAArB,GAA4E,IAAtG;;AAEA,UAAIsB,mBAAJ,EAAyB;AACxBvE,QAAAA,KAAK,CAACuD,eAAN,CAAsBZ,KAAK,CAACK,iBAA5B,EAA+C9D,QAAQ,CAAC,EAAD,EAAKqF,mBAAL,EAA0B5B,KAAK,CAACC,YAAN,EAA1B,CAAvD,EAAwG,KAAxG;AACA,OAFD,MAEOD,KAAK,CAAC3C,KAAN,CAAYuD,eAAZ,CAA4BZ,KAAK,CAACK,iBAAlC,EAAqDL,KAAK,CAACC,YAAN,EAArD;;AAEP5C,MAAAA,KAAK,CAAC6D,WAAN,CAAkB;AACjBL,QAAAA,WAAW,EAAEb,KAAK,CAACK,iBADF;AAEjBU,QAAAA,KAAK,EAAEA,KAAK,IAAI;AAFC,OAAlB;AAIA;;AACD,WAAOf,KAAP;AACA;;AAEDF,EAAAA,iBAAiB,CAAC9C,SAAlB,CAA4B8E,iBAA5B,GAAgD,SAASA,iBAAT,GAA6B;AAC5E,QAAIC,MAAM,GAAG,KAAK1E,KAAlB;AAAA,QACI2D,WAAW,GAAGe,MAAM,CAACf,WADzB;AAAA,QAEIgB,aAAa,GAAGD,MAAM,CAACC,aAF3B;AAAA,QAGIrC,KAAK,GAAGoC,MAAM,CAACpC,KAHnB;AAAA,QAIIsC,YAAY,GAAGF,MAAM,CAACE,YAJ1B;AAAA,QAKIpB,WAAW,GAAGkB,MAAM,CAAClB,WALzB;AAAA,QAMIO,WAAW,GAAGW,MAAM,CAACX,WANzB;AAAA,QAOIC,UAAU,GAAGU,MAAM,CAACV,UAPxB;AAAA,QAQIC,SAAS,GAAGS,MAAM,CAACT,SARvB;AAAA,QASIpB,gBAAgB,GAAG6B,MAAM,CAAC7B,gBAT9B;AAAA,QAUIgC,MAAM,GAAGH,MAAM,CAACG,MAVpB;AAAA,QAWIC,aAAa,GAAGJ,MAAM,CAACI,aAX3B;AAAA,QAYIC,mBAAmB,GAAGL,MAAM,CAACK,mBAZjC;AAAA,QAaIC,KAAK,GAAGN,MAAM,CAACM,KAbnB;AAeA,QAAIC,YAAY,GAAGN,aAAa,IAAIrC,KAAjB,IAA0BsC,YAA1B,IAA0C,IAA7D;AACA,QAAIM,aAAa,GAAGL,MAAM,CAACK,aAA3B;;AAGA,QAAIA,aAAa,IAAIrC,gBAArB,EAAuC;AACtCO,MAAAA,OAAO,CAAC+B,IAAR,CAAa,kIAAb;AACA;;AACD,QAAI,CAACD,aAAD,KAAmBJ,aAAa,IAAIC,mBAApC,CAAJ,EAA8D;AAC7D3B,MAAAA,OAAO,CAAC+B,IAAR,CAAa,+JAAb;AACA;;AACD,QAAI,CAACD,aAAD,IAAkBF,KAAtB,EAA6B;AAC5B5B,MAAAA,OAAO,CAAC+B,IAAR,CAAa,4HAAb;AACA;;AAED,QAAIxB,WAAJ,EAAiB;AAChB,UAAIyB,eAAe,GAAGzB,WAAW,CAAC,KAAK3D,KAAN,CAAjC;;AAEA,UAAIqF,KAAK,GAAGD,eAAe,IAAI,EAA/B;AAAA,UACI1B,KAAK,GAAG2B,KAAK,CAAC3B,KADlB;;AAGA,UAAI4B,kBAAkB,GAAGF,eAAe,GAAG,CAAC,GAAGtE,OAAO,CAAC0D,mBAAZ,EAAiCY,eAAjC,CAAH,GAAuD,IAA/F;;AACA,UAAIE,kBAAJ,EAAwB;AACvB,aAAKtF,KAAL,CAAWuD,eAAX,CAA2BC,WAA3B,EAAwCtE,QAAQ,CAAC,EAAD,EAAKoG,kBAAL,EAAyB,KAAK1C,YAAL,EAAzB,CAAhD,EAA+F,KAA/F;AACA,OAFD,MAEO,KAAK5C,KAAL,CAAWuD,eAAX,CAA2BC,WAA3B,EAAwC,KAAKZ,YAAL,EAAxC,EAA6D,KAA7D;;AACP,WAAK5C,KAAL,CAAW6D,WAAX,CAAuB;AACtBL,QAAAA,WAAW,EAAEA,WADS;AAEtBE,QAAAA,KAAK,EAAEA,KAFe;AAGtBpB,QAAAA,KAAK,EAAE2C,YAHe;AAItBnB,QAAAA,KAAK,EAAEC,WAJe;AAKtBC,QAAAA,UAAU,EAAEA,UALU;AAMtBC,QAAAA,SAAS,EAAEA;AANW,OAAvB;AAQA;AACD,GAjDD;;AAmDAxB,EAAAA,iBAAiB,CAAC9C,SAAlB,CAA4B4F,kBAA5B,GAAiD,SAASA,kBAAT,CAA4BC,SAA5B,EAAuC;AACvF,QAAIC,MAAM,GAAG,IAAb,CADuF,CAGvF;;;AACA,QAAI,KAAKzF,KAAL,CAAW0F,MAAf,EAAuB;AACtB,OAAC,GAAG5E,OAAO,CAAC6E,mBAAZ,EAAiC,KAAK3F,KAAtC,EAA6CwF,SAA7C,EAAwD,CAAC,MAAD,EAAS,cAAT,EAAyB,iBAAzB,EAA4C,OAA5C,EAAqD,MAArD,EAA6D,QAA7D,CAAxD,EAAgI,YAAY;AAC3IC,QAAAA,MAAM,CAACzF,KAAP,CAAa0F,MAAb,CAAoBD,MAAM,CAACG,OAAP,EAApB;AACA,OAFD;AAGA;;AAED,KAAC,GAAG9E,OAAO,CAAC+E,eAAZ,EAA6B,KAAK7F,KAAL,CAAW2E,aAAxC,EAAuDa,SAAS,CAACb,aAAjE,EAAgF,YAAY;AAC3F;AACH;AACA;AAEG,UAAIc,MAAM,CAACzF,KAAP,CAAa2E,aAAb,KAA+B,IAAnC,EAAyC;AACxCc,QAAAA,MAAM,CAACzF,KAAP,CAAa6D,WAAb,CAAyB;AACxBL,UAAAA,WAAW,EAAEiC,MAAM,CAACzF,KAAP,CAAawD,WADF;AAExBE,UAAAA,KAAK,EAAE;AAFiB,SAAzB;AAIA;AACD,KAXD;;AAaA,QAAI,KAAK1D,KAAL,CAAWiD,YAAX,IAA2B,CAAC,CAAC,GAAGnC,OAAO,CAACgF,OAAZ,EAAqB,KAAK9F,KAAL,CAAWiD,YAAX,EAArB,EAAgD,KAAKA,YAArD,CAAhC,EAAoG;AACnG,WAAKA,YAAL,GAAoB,KAAKjD,KAAL,CAAWiD,YAAX,EAApB;;AAEA,UAAI8C,KAAK,GAAG,KAAK9C,YAAL,IAAqB,EAAjC;AAAA,UACIS,KAAK,GAAGqC,KAAK,CAACrC,KADlB;AAAA,UAEIsC,YAAY,GAAGxE,wBAAwB,CAACuE,KAAD,EAAQ,CAAC,OAAD,CAAR,CAF3C;;AAIA,UAAIC,YAAJ,EAAkB;AACjB,aAAKhG,KAAL,CAAWuD,eAAX,CAA2B,KAAKP,iBAAhC,EAAmD9D,QAAQ,CAAC,EAAD,EAAK8G,YAAL,EAAmB,KAAKpD,YAAL,EAAnB,CAA3D,EAAoG,KAApG;AACA,OAFD,MAEO,KAAK5C,KAAL,CAAWuD,eAAX,CAA2B,KAAKP,iBAAhC,EAAmD,KAAKJ,YAAL,EAAnD,EAAwE,KAAxE;;AACP,OAAC,GAAG9B,OAAO,CAACuD,kBAAZ,EAAgC,KAAKrE,KAAL,CAAWwD,WAA3C,EAAwD,KAAKxD,KAA7D,EAAoEoE,SAApE;AACA,WAAKpE,KAAL,CAAW6D,WAAX,CAAuB;AACtBL,QAAAA,WAAW,EAAE,KAAKR,iBADI;AAEtBU,QAAAA,KAAK,EAAEA,KAAK,IAAI;AAFM,OAAvB;AAIA;;AAED,QAAI,KAAK1D,KAAL,CAAW2D,WAAX,IAA0B,CAAC,CAAC,GAAG7C,OAAO,CAACgF,OAAZ,EAAqB,KAAK9F,KAAL,CAAW2D,WAAX,CAAuB,KAAK3D,KAA5B,CAArB,EAAyDwF,SAAS,CAAC7B,WAAV,CAAsB,KAAK3D,KAA3B,CAAzD,CAA/B,EAA4H;AAC3H,UAAIiG,KAAK,GAAG,KAAKjG,KAAL,CAAW2D,WAAX,CAAuB,KAAK3D,KAA5B,KAAsC,EAAlD;AAAA,UACIkG,MAAM,GAAGD,KAAK,CAACvC,KADnB;AAAA,UAEIyC,aAAa,GAAG3E,wBAAwB,CAACyE,KAAD,EAAQ,CAAC,OAAD,CAAR,CAF5C;;AAIA,UAAIE,aAAJ,EAAmB;AAClB,aAAKnG,KAAL,CAAWuD,eAAX,CAA2B,KAAKvD,KAAL,CAAWwD,WAAtC,EAAmDtE,QAAQ,CAAC,EAAD,EAAKiH,aAAL,EAAoB,KAAKvD,YAAL,EAApB,CAA3D,EAAqG,KAArG;AACA,OAFD,MAEO,KAAK5C,KAAL,CAAWuD,eAAX,CAA2B,KAAKvD,KAAL,CAAWwD,WAAtC,EAAmD,KAAKZ,YAAL,EAAnD,EAAwE,KAAxE;;AACP,OAAC,GAAG9B,OAAO,CAACqD,iBAAZ,EAA+B,KAAKnE,KAAL,CAAWwD,WAA1C,EAAuD,KAAKxD,KAA5D,EAAmEoE,SAAnE;AACA,WAAKpE,KAAL,CAAW6D,WAAX,CAAuB;AACtBL,QAAAA,WAAW,EAAE,KAAKxD,KAAL,CAAWwD,WADF;AAEtBE,QAAAA,KAAK,EAAEwC,MAAM,IAAI;AAFK,OAAvB;AAIA;AACD,GAtDD;;AAwDAzD,EAAAA,iBAAiB,CAAC9C,SAAlB,CAA4BiG,OAA5B,GAAsC,SAASA,OAAT,GAAmB;AACxD,QAAIQ,OAAO,GAAG,KAAKpG,KAAnB;AAAA,QACIqG,IAAI,GAAGD,OAAO,CAACC,IADnB;AAAA,QAEIC,YAAY,GAAGF,OAAO,CAACE,YAF3B;AAAA,QAGIC,eAAe,GAAGH,OAAO,CAACG,eAH9B;AAAA,QAIIC,eAAe,GAAGJ,OAAO,CAACI,eAJ9B;AAAA,QAKIC,OAAO,GAAGL,OAAO,CAACK,OALtB;AAOA,QAAIC,eAAe,GAAG,CAAC,GAAG5F,OAAO,CAAC6F,SAAZ,EAAuBN,IAAvB,CAAtB;;AACA,QAAIG,eAAe,CAAChH,MAApB,EAA4B;AAC3B,UAAIoH,GAAG,GAAGJ,eAAe,CAACK,GAAhB,CAAoB,UAAUC,IAAV,EAAgB;AAC7C,eAAOA,IAAI,CAACC,GAAZ;AACA,OAFS,EAEPC,MAFO,CAEAC,OAFA,CAAV;;AAGA,UAAIL,GAAJ,EAAS;AACRF,QAAAA,eAAe,GAAGA,eAAe,CAACM,MAAhB,CAAuB,UAAUF,IAAV,EAAgB;AACxD,iBAAO,CAACF,GAAG,CAACM,QAAJ,CAAaJ,IAAI,CAACC,GAAlB,CAAR;AACA,SAFiB,CAAlB;AAGA;;AACDL,MAAAA,eAAe,GAAG,GAAGS,MAAH,CAAUX,eAAV,EAA2BE,eAA3B,CAAlB;AACA;;AACD,WAAO;AACNvD,MAAAA,IAAI,EAAEuD,eADA;AAENU,MAAAA,YAAY,EAAEZ,eAFR;AAGND,MAAAA,eAAe,EAAEA,eAAe,IAAI,EAH9B;AAINE,MAAAA,OAAO,EAAEA,OAJH;AAKNH,MAAAA,YAAY,EAAEA,YALR;AAMNe,MAAAA,WAAW,EAAE,KAAKC;AANZ,KAAP;AAQA,GA5BD;;AA8BA7E,EAAAA,iBAAiB,CAAC9C,SAAlB,CAA4B4H,YAA5B,GAA2C,SAASA,YAAT,GAAwB;AAClE,QAAIC,OAAO,GAAG,KAAKxH,KAAnB;AAAA,QACIqD,KAAK,GAAGmE,OAAO,CAACnE,KADpB;AAAA,QAEIoE,SAAS,GAAGD,OAAO,CAACC,SAFxB;AAAA,QAGI9C,aAAa,GAAG6C,OAAO,CAAC7C,aAH5B;;AAKA,QAAIxB,IAAI,GAAGjE,QAAQ,CAAC;AACnBmE,MAAAA,KAAK,EAAEA,KADY;AAEnBqE,MAAAA,OAAO,EAAED;AAFU,KAAD,EAGhB,KAAK7B,OAAL,EAHgB,EAGA;AAClBtD,MAAAA,KAAK,EAAEqC,aADW;AAElBzB,MAAAA,QAAQ,EAAE,KAAKA;AAFG,KAHA,CAAnB;;AAOA,WAAO,CAAC,GAAG/B,MAAM,CAACoG,YAAX,EAAyBpE,IAAzB,EAA+B,KAAKnD,KAApC,CAAP;AACA,GAdD;;AAgBAyC,EAAAA,iBAAiB,CAAC9C,SAAlB,CAA4BgI,MAA5B,GAAqC,SAASA,MAAT,GAAkB;AACtD,QAAI,CAAC,GAAGxG,MAAM,CAACyG,iBAAX,EAA8B,KAAK5H,KAAnC,CAAJ,EAA+C;AAC9C,aAAO,KAAKuH,YAAL,EAAP;AACA;;AACD,WAAO,IAAP;AACA,GALD;;AAOAzH,EAAAA,YAAY,CAAC2C,iBAAD,EAAoB,CAAC;AAChC/C,IAAAA,GAAG,EAAE,OAD2B;AAEhCmI,IAAAA,GAAG,EAAE,SAASA,GAAT,GAAe;AACnB,aAAO,CAAC,GAAG/G,OAAO,CAACgH,cAAZ,EAA4B,KAAK9H,KAAjC,CAAP;AACA;AAJ+B,GAAD,CAApB,CAAZ;;AAOA,SAAOyC,iBAAP;AACA,CA9PuB,CA8PtBhC,MAAM,CAACsH,SA9Pe,CAAxB;;AAgQAtF,iBAAiB,CAACuF,YAAlB,GAAiC;AAChChE,EAAAA,UAAU,EAAE,IADoB;AAEhCC,EAAAA,SAAS,EAAE,KAFqB;AAGhCgE,EAAAA,IAAI,EAAE;AAH0B,CAAjC;AAMAxF,iBAAiB,CAACyF,SAAlB,GAA8B;AAC7B7E,EAAAA,KAAK,EAAErC,OAAO,CAACO,OAAR,CAAgB4G,KADM;AAE7B5E,EAAAA,eAAe,EAAEvC,OAAO,CAACO,OAAR,CAAgB6G,YAFJ;AAG7BvE,EAAAA,WAAW,EAAE7C,OAAO,CAACO,OAAR,CAAgB6G,YAHA;AAI7BvF,EAAAA,gBAAgB,EAAE7B,OAAO,CAACO,OAAR,CAAgB8G,MAJL;AAK7BC,EAAAA,eAAe,EAAEtH,OAAO,CAACO,OAAR,CAAgBgH,MALJ;AAM7BN,EAAAA,IAAI,EAAEjH,OAAO,CAACO,OAAR,CAAgBgH,MANO;AAO7BjC,EAAAA,YAAY,EAAEtF,OAAO,CAACO,OAAR,CAAgBiH,cAPD;AAQ7BjC,EAAAA,eAAe,EAAEvF,OAAO,CAACO,OAAR,CAAgBgF,eARJ;AAS7BF,EAAAA,IAAI,EAAErF,OAAO,CAACO,OAAR,CAAgB4B,IATO;AAU7BsD,EAAAA,OAAO,EAAEzF,OAAO,CAACO,OAAR,CAAgBkF,OAVI;AAW7BD,EAAAA,eAAe,EAAExF,OAAO,CAACO,OAAR,CAAgB8E,IAXJ;AAY7BoB,EAAAA,SAAS,EAAEzG,OAAO,CAACO,OAAR,CAAgBkH,IAZE;AAa7B9D,EAAAA,aAAa,EAAE3D,OAAO,CAACO,OAAR,CAAgBoD,aAbF;AAc7Bf,EAAAA,cAAc,EAAE5C,OAAO,CAACO,OAAR,CAAgB6G,YAdH;AAe7B;AACAM,EAAAA,QAAQ,EAAE1H,OAAO,CAACO,OAAR,CAAgBoH,IAhBG;AAiB7BnF,EAAAA,WAAW,EAAExC,OAAO,CAACO,OAAR,CAAgBqH,cAjBA;AAkB7B3F,EAAAA,YAAY,EAAEjC,OAAO,CAACO,OAAR,CAAgBoH,IAlBD;AAmB7BhF,EAAAA,WAAW,EAAE3C,OAAO,CAACO,OAAR,CAAgBoH,IAnBA;AAoB7B/D,EAAAA,YAAY,EAAE5D,OAAO,CAACO,OAAR,CAAgBsH,GApBD;AAoBM;AACnCvG,EAAAA,KAAK,EAAEtB,OAAO,CAACO,OAAR,CAAgBsH,GArBM;AAqBD;AAC5B9E,EAAAA,WAAW,EAAE/C,OAAO,CAACO,OAAR,CAAgB8G,MAtBA;AAuB7BS,EAAAA,aAAa,EAAE9H,OAAO,CAACO,OAAR,CAAgBoH,IAvBF;AAwB7BI,EAAAA,OAAO,EAAE/H,OAAO,CAACO,OAAR,CAAgBoH,IAxBI;AAyB7BK,EAAAA,KAAK,EAAEhI,OAAO,CAACO,OAAR,CAAgByH,KAzBM;AA0B7BrB,EAAAA,MAAM,EAAE3G,OAAO,CAACO,OAAR,CAAgBoH,IA1BK;AA2B7B3E,EAAAA,UAAU,EAAEhD,OAAO,CAACO,OAAR,CAAgBkH,IA3BC;AA4B7BxE,EAAAA,SAAS,EAAEjD,OAAO,CAACO,OAAR,CAAgBkH,IA5BE;AA6B7B/C,EAAAA,MAAM,EAAE1E,OAAO,CAACO,OAAR,CAAgBoH,IA7BK;AA8B7B7D,EAAAA,aAAa,EAAE9D,OAAO,CAACO,OAAR,CAAgB8G,MA9BF;AA+B7BtD,EAAAA,mBAAmB,EAAE/D,OAAO,CAACO,OAAR,CAAgB0H,eA/BR;AAgC7BpE,EAAAA,MAAM,EAAE7D,OAAO,CAACO,OAAR,CAAgBvB,KAhCK;AAiC7BgF,EAAAA,KAAK,EAAEhE,OAAO,CAACO,OAAR,CAAgB8G;AAjCM,CAA9B,C,CAoCA;;AACA5F,iBAAiB,CAACyG,aAAlB,GAAkChI,UAAU,CAACiI,cAAX,CAA0BC,iBAA5D;;AAEA,IAAIC,eAAe,GAAG,SAASA,eAAT,CAAyBC,KAAzB,EAAgCtJ,KAAhC,EAAuC;AAC5D,SAAO;AACNsG,IAAAA,YAAY,EAAEgD,KAAK,CAAChD,YAAN,CAAmBtG,KAAK,CAACwD,WAAzB,KAAyC8F,KAAK,CAAChD,YAAN,CAAmBtG,KAAK,CAACwD,WAAzB,CAAzC,IAAkF,IAD1F;AAEN+C,IAAAA,eAAe,EAAE+C,KAAK,CAACC,qBAAN,CAA4BvJ,KAAK,CAACwD,WAAlC,KAAkD,EAF7D;AAGN6C,IAAAA,IAAI,EAAEiD,KAAK,CAACjD,IAAN,CAAWrG,KAAK,CAACwD,WAAjB,KAAiC8F,KAAK,CAACjD,IAAN,CAAWrG,KAAK,CAACwD,WAAjB,EAA8B6C,IAA/D,IAAuE,EAHvE;AAINI,IAAAA,OAAO,EAAE6C,KAAK,CAAC7C,OAAN,CAAczG,KAAK,CAACwD,WAApB,CAJH;AAKNmB,IAAAA,aAAa,EAAE2E,KAAK,CAACd,cAAN,CAAqBxI,KAAK,CAACwD,WAA3B,KAA2C8F,KAAK,CAACd,cAAN,CAAqBxI,KAAK,CAACwD,WAA3B,EAAwClB,KAAnF,IAA4F,IALrG;AAMNmF,IAAAA,SAAS,EAAE6B,KAAK,CAAC7B,SAAN,CAAgBzH,KAAK,CAACwD,WAAtB,CANL;AAONH,IAAAA,KAAK,EAAEiG,KAAK,CAACjG,KAAN,CAAYrD,KAAK,CAACwD,WAAlB,CAPD;AAQNgD,IAAAA,eAAe,EAAE8C,KAAK,CAAC9C,eAAN,CAAsBxG,KAAK,CAACwD,WAA5B,KAA4C,EARvD;AASNgG,IAAAA,IAAI,EAAEF,KAAK,CAACjD,IAAN,CAAWrG,KAAK,CAACwD,WAAjB,KAAiC8F,KAAK,CAACjD,IAAN,CAAWrG,KAAK,CAACwD,WAAjB,EAA8BgG,IAA/D,IAAuE,CATvE;AAUNC,IAAAA,KAAK,EAAEH,KAAK,CAACjD,IAAN,CAAWrG,KAAK,CAACwD,WAAjB,KAAiC8F,KAAK,CAACjD,IAAN,CAAWrG,KAAK,CAACwD,WAAjB,EAA8BiG,KAVhE;AAWNC,IAAAA,MAAM,EAAEJ,KAAK,CAACjD,IAAN,CAAWrG,KAAK,CAACwD,WAAjB,KAAiC8F,KAAK,CAACjD,IAAN,CAAWrG,KAAK,CAACwD,WAAjB,EAA8BkG,MAXjE;AAYN7E,IAAAA,MAAM,EAAEyE,KAAK,CAACzE;AAZR,GAAP;AAcA,CAfD;;AAiBA,IAAI8E,kBAAkB,GAAG,SAASA,kBAAT,CAA4BC,QAA5B,EAAsC;AAC9D,SAAO;AACNhG,IAAAA,cAAc,EAAE,SAASA,cAAT,CAAwBiG,SAAxB,EAAmCnG,KAAnC,EAA0C;AACzD,aAAOkG,QAAQ,CAAC,CAAC,GAAG/I,QAAQ,CAAC+C,cAAb,EAA6BiG,SAA7B,EAAwCnG,KAAxC,CAAD,CAAf;AACA,KAHK;AAINoG,IAAAA,eAAe,EAAE,SAASA,eAAT,CAAyBD,SAAzB,EAAoCnG,KAApC,EAA2C;AAC3D,aAAOkG,QAAQ,CAAC,CAAC,GAAG/I,QAAQ,CAACiJ,eAAb,EAA8BD,SAA9B,EAAyCnG,KAAzC,CAAD,CAAf;AACA,KANK;AAONH,IAAAA,eAAe,EAAE,SAASA,eAAT,CAAyBsG,SAAzB,EAAoC7J,KAApC,EAA2C+J,OAA3C,EAAoD;AACpE,aAAOH,QAAQ,CAAC,CAAC,GAAG/I,QAAQ,CAAC0C,eAAb,EAA8BsG,SAA9B,EAAyC7J,KAAzC,EAAgD+J,OAAhD,CAAD,CAAf;AACA,KATK;AAUNlG,IAAAA,WAAW,EAAE,SAASA,WAAT,CAAqBmG,iBAArB,EAAwC;AACpD,aAAOJ,QAAQ,CAAC,CAAC,GAAG/I,QAAQ,CAACgD,WAAb,EAA0BmG,iBAA1B,CAAD,CAAf;AACA;AAZK,GAAP;AAcA,CAfD;;AAiBA,IAAIC,kBAAkB,GAAG,CAAC,GAAG9I,MAAM,CAAC+I,OAAX,EAAoBb,eAApB,EAAqCM,kBAArC,EAAyD,UAAU3J,KAAV,EAAiB;AAClG,SAAOW,OAAO,CAACY,OAAR,CAAgB4I,aAAhB,CACN9I,kBAAkB,CAACE,OADb,EAENrC,QAAQ,CAAC,EAAD,EAAKc,KAAL,EAAY;AACnBgD,IAAAA,iBAAiB,EAAE,CAAC,CAAChD,KAAK,CAACiD,YADR;AAEnBiG,IAAAA,aAAa,EAAEhI,UAAU,CAACiI,cAAX,CAA0BC;AAFtB,GAAZ,CAFF,EAMN,YAAY;AACX,WAAOzI,OAAO,CAACY,OAAR,CAAgB4I,aAAhB,CAA8B1H,iBAA9B,EAAiDvD,QAAQ,CAAC;AAAEkL,MAAAA,GAAG,EAAEpK,KAAK,CAACqK;AAAb,KAAD,EAAgCrK,KAAhC,CAAzD,CAAP;AACA,GARK,CAAP;AAUA,CAXwB,CAAzB,C,CAaA;;AACA,IAAIsK,mBAAmB,GAAG3J,OAAO,CAACY,OAAR,CAAgBgJ,UAAhB,CAA2B,UAAUvK,KAAV,EAAiBoK,GAAjB,EAAsB;AAC1E,SAAOzJ,OAAO,CAACY,OAAR,CAAgB4I,aAAhB,CAA8BF,kBAA9B,EAAkD/K,QAAQ,CAAC,EAAD,EAAKc,KAAL,EAAY;AAAEqK,IAAAA,cAAc,EAAED;AAAlB,GAAZ,CAA1D,CAAP;AACA,CAFyB,CAA1B;;AAIAE,mBAAmB,CAACE,WAApB,GAAkC,mBAAlC;AACAxL,OAAO,CAACuC,OAAR,GAAkB+I,mBAAlB","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _transform = require('@appbaseio/reactivecore/lib/utils/transform');\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _utils = require('../../utils');\n\nvar _ComponentWrapper = require('../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ReactiveComponent = function (_Component) {\n\t_inherits(ReactiveComponent, _Component);\n\n\tfunction ReactiveComponent(props) {\n\t\t_classCallCheck(this, ReactiveComponent);\n\n\t\tvar _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n\t\t_this.getAggsQuery = function () {\n\t\t\tif (_this.props.aggregationField) {\n\t\t\t\treturn (0, _helper.getCompositeAggsQuery)({\n\t\t\t\t\tprops: _this.props,\n\t\t\t\t\tshowTopHits: true,\n\t\t\t\t\tvalue: _this.props.value\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn {};\n\t\t};\n\n\t\t_this.internalComponent = null;\n\t\t_this.defaultQuery = null;\n\t\t_this.setQuery = function (data) {\n\t\t\tif (!data) {\n\t\t\t\tconsole.error('setQuery accepts the arguments of shape { query, options, value }.');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar options = data.options,\n\t\t\t    obj = _objectWithoutProperties(data, ['options']);\n\n\t\t\tif (options) {\n\t\t\t\tprops.setQueryOptions(props.componentId, _extends({}, options, _this.getAggsQuery()), false);\n\t\t\t}\n\n\t\t\tvar queryToBeSet = obj.query;\n\n\t\t\t// when enableAppbase is true, Backend throws error because of repeated query in request body\n\t\t\tif (obj && obj.query && obj.query.query) {\n\t\t\t\tqueryToBeSet = obj.query.query;\n\t\t\t}\n\n\t\t\t// Update customQuery field for RS API\n\t\t\tif (obj && obj.query || options) {\n\t\t\t\tvar customQuery = _extends({}, options);\n\t\t\t\tif (obj && obj.query) {\n\t\t\t\t\tcustomQuery.query = queryToBeSet;\n\t\t\t\t}\n\t\t\t\tprops.setCustomQuery(props.componentId, customQuery);\n\t\t\t}\n\t\t\t_this.props.updateQuery(_extends({}, obj, {\n\t\t\t\tquery: queryToBeSet,\n\t\t\t\tcomponentId: props.componentId,\n\t\t\t\tlabel: props.filterLabel,\n\t\t\t\tshowFilter: props.showFilter,\n\t\t\t\tURLParams: props.URLParams\n\t\t\t}));\n\t\t};\n\n\t\tif (props.defaultQuery) {\n\t\t\t_this.internalComponent = (0, _transform.getInternalComponentID)(props.componentId);\n\t\t}\n\n\t\t// Set custom and default queries in store\n\t\t(0, _helper.updateCustomQuery)(props.componentId, props, undefined);\n\t\t(0, _helper.updateDefaultQuery)(props.componentId, props, undefined);\n\n\t\tif (_this.internalComponent && props.defaultQuery) {\n\t\t\t_this.defaultQuery = props.defaultQuery();\n\n\t\t\tvar _ref = _this.defaultQuery || {},\n\t\t\t    query = _ref.query;\n\n\t\t\tvar defaultQueryOptions = _this.defaultQuery ? (0, _helper.getOptionsFromQuery)(_this.defaultQuery) : null;\n\n\t\t\tif (defaultQueryOptions) {\n\t\t\t\tprops.setQueryOptions(_this.internalComponent, _extends({}, defaultQueryOptions, _this.getAggsQuery()), false);\n\t\t\t} else _this.props.setQueryOptions(_this.internalComponent, _this.getAggsQuery());\n\n\t\t\tprops.updateQuery({\n\t\t\t\tcomponentId: _this.internalComponent,\n\t\t\t\tquery: query || null\n\t\t\t});\n\t\t}\n\t\treturn _this;\n\t}\n\n\tReactiveComponent.prototype.componentDidMount = function componentDidMount() {\n\t\tvar _props = this.props,\n\t\t    customQuery = _props.customQuery,\n\t\t    selectedValue = _props.selectedValue,\n\t\t    value = _props.value,\n\t\t    defaultValue = _props.defaultValue,\n\t\t    componentId = _props.componentId,\n\t\t    filterLabel = _props.filterLabel,\n\t\t    showFilter = _props.showFilter,\n\t\t    URLParams = _props.URLParams,\n\t\t    aggregationField = _props.aggregationField,\n\t\t    config = _props.config,\n\t\t    distinctField = _props.distinctField,\n\t\t    distinctFieldConfig = _props.distinctFieldConfig,\n\t\t    index = _props.index;\n\n\t\tvar initialValue = selectedValue || value || defaultValue || null;\n\t\tvar enableAppbase = config.enableAppbase;\n\n\n\t\tif (enableAppbase && aggregationField) {\n\t\t\tconsole.warn('Warning(ReactiveSearch): The `aggregationField` prop has been marked as deprecated, please use the `distinctField` prop instead.');\n\t\t}\n\t\tif (!enableAppbase && (distinctField || distinctFieldConfig)) {\n\t\t\tconsole.warn('Warning(ReactiveSearch): In order to use the `distinctField` and `distinctFieldConfig` props, the `enableAppbase` prop must be set to true in `ReactiveBase`.');\n\t\t}\n\t\tif (!enableAppbase && index) {\n\t\t\tconsole.warn('Warning(ReactiveSearch): In order to use the `index` prop, the `enableAppbase` prop must be set to true in `ReactiveBase`.');\n\t\t}\n\n\t\tif (customQuery) {\n\t\t\tvar calcCustomQuery = customQuery(this.props);\n\n\t\t\tvar _ref2 = calcCustomQuery || {},\n\t\t\t    query = _ref2.query;\n\n\t\t\tvar customQueryOptions = calcCustomQuery ? (0, _helper.getOptionsFromQuery)(calcCustomQuery) : null;\n\t\t\tif (customQueryOptions) {\n\t\t\t\tthis.props.setQueryOptions(componentId, _extends({}, customQueryOptions, this.getAggsQuery()), false);\n\t\t\t} else this.props.setQueryOptions(componentId, this.getAggsQuery(), false);\n\t\t\tthis.props.updateQuery({\n\t\t\t\tcomponentId: componentId,\n\t\t\t\tquery: query,\n\t\t\t\tvalue: initialValue,\n\t\t\t\tlabel: filterLabel,\n\t\t\t\tshowFilter: showFilter,\n\t\t\t\tURLParams: URLParams\n\t\t\t});\n\t\t}\n\t};\n\n\tReactiveComponent.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n\t\tvar _this2 = this;\n\n\t\t// only consider hits and defaultQuery when customQuery is absent\n\t\tif (this.props.onData) {\n\t\t\t(0, _helper.checkSomePropChange)(this.props, prevProps, ['hits', 'aggregations', 'promotedResults', 'total', 'time', 'hidden'], function () {\n\t\t\t\t_this2.props.onData(_this2.getData());\n\t\t\t});\n\t\t}\n\n\t\t(0, _helper.checkPropChange)(this.props.selectedValue, prevProps.selectedValue, function () {\n\t\t\t/*\n   \tReset query when SelectedFilters are clicked. Note: `selectedValue` becomes null.\n   */\n\n\t\t\tif (_this2.props.selectedValue === null) {\n\t\t\t\t_this2.props.updateQuery({\n\t\t\t\t\tcomponentId: _this2.props.componentId,\n\t\t\t\t\tquery: null\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tif (this.props.defaultQuery && !(0, _helper.isEqual)(this.props.defaultQuery(), this.defaultQuery)) {\n\t\t\tthis.defaultQuery = this.props.defaultQuery();\n\n\t\t\tvar _ref3 = this.defaultQuery || {},\n\t\t\t    query = _ref3.query,\n\t\t\t    queryOptions = _objectWithoutProperties(_ref3, ['query']);\n\n\t\t\tif (queryOptions) {\n\t\t\t\tthis.props.setQueryOptions(this.internalComponent, _extends({}, queryOptions, this.getAggsQuery()), false);\n\t\t\t} else this.props.setQueryOptions(this.internalComponent, this.getAggsQuery(), false);\n\t\t\t(0, _helper.updateDefaultQuery)(this.props.componentId, this.props, undefined);\n\t\t\tthis.props.updateQuery({\n\t\t\t\tcomponentId: this.internalComponent,\n\t\t\t\tquery: query || null\n\t\t\t});\n\t\t}\n\n\t\tif (this.props.customQuery && !(0, _helper.isEqual)(this.props.customQuery(this.props), prevProps.customQuery(this.props))) {\n\t\t\tvar _ref4 = this.props.customQuery(this.props) || {},\n\t\t\t    _query = _ref4.query,\n\t\t\t    _queryOptions = _objectWithoutProperties(_ref4, ['query']);\n\n\t\t\tif (_queryOptions) {\n\t\t\t\tthis.props.setQueryOptions(this.props.componentId, _extends({}, _queryOptions, this.getAggsQuery()), false);\n\t\t\t} else this.props.setQueryOptions(this.props.componentId, this.getAggsQuery(), false);\n\t\t\t(0, _helper.updateCustomQuery)(this.props.componentId, this.props, undefined);\n\t\t\tthis.props.updateQuery({\n\t\t\t\tcomponentId: this.props.componentId,\n\t\t\t\tquery: _query || null\n\t\t\t});\n\t\t}\n\t};\n\n\tReactiveComponent.prototype.getData = function getData() {\n\t\tvar _props2 = this.props,\n\t\t    hits = _props2.hits,\n\t\t    aggregations = _props2.aggregations,\n\t\t    aggregationData = _props2.aggregationData,\n\t\t    promotedResults = _props2.promotedResults,\n\t\t    rawData = _props2.rawData;\n\n\t\tvar filteredResults = (0, _helper.parseHits)(hits);\n\t\tif (promotedResults.length) {\n\t\t\tvar ids = promotedResults.map(function (item) {\n\t\t\t\treturn item._id;\n\t\t\t}).filter(Boolean);\n\t\t\tif (ids) {\n\t\t\t\tfilteredResults = filteredResults.filter(function (item) {\n\t\t\t\t\treturn !ids.includes(item._id);\n\t\t\t\t});\n\t\t\t}\n\t\t\tfilteredResults = [].concat(promotedResults, filteredResults);\n\t\t}\n\t\treturn {\n\t\t\tdata: filteredResults,\n\t\t\tpromotedData: promotedResults,\n\t\t\taggregationData: aggregationData || [],\n\t\t\trawData: rawData,\n\t\t\taggregations: aggregations,\n\t\t\tresultStats: this.stats\n\t\t};\n\t};\n\n\tReactiveComponent.prototype.getComponent = function getComponent() {\n\t\tvar _props3 = this.props,\n\t\t    error = _props3.error,\n\t\t    isLoading = _props3.isLoading,\n\t\t    selectedValue = _props3.selectedValue;\n\n\t\tvar data = _extends({\n\t\t\terror: error,\n\t\t\tloading: isLoading\n\t\t}, this.getData(), {\n\t\t\tvalue: selectedValue,\n\t\t\tsetQuery: this.setQuery\n\t\t});\n\t\treturn (0, _utils.getComponent)(data, this.props);\n\t};\n\n\tReactiveComponent.prototype.render = function render() {\n\t\tif ((0, _utils.hasCustomRenderer)(this.props)) {\n\t\t\treturn this.getComponent();\n\t\t}\n\t\treturn null;\n\t};\n\n\t_createClass(ReactiveComponent, [{\n\t\tkey: 'stats',\n\t\tget: function get() {\n\t\t\treturn (0, _helper.getResultStats)(this.props);\n\t\t}\n\t}]);\n\n\treturn ReactiveComponent;\n}(_react.Component);\n\nReactiveComponent.defaultProps = {\n\tshowFilter: true,\n\tURLParams: false,\n\tsize: 20\n};\n\nReactiveComponent.propTypes = {\n\terror: _types2.default.title,\n\tsetQueryOptions: _types2.default.funcRequired,\n\tupdateQuery: _types2.default.funcRequired,\n\taggregationField: _types2.default.string,\n\taggregationSize: _types2.default.number,\n\tsize: _types2.default.number,\n\taggregations: _types2.default.selectedValues,\n\taggregationData: _types2.default.aggregationData,\n\thits: _types2.default.data,\n\trawData: _types2.default.rawData,\n\tpromotedResults: _types2.default.hits,\n\tisLoading: _types2.default.bool,\n\tselectedValue: _types2.default.selectedValue,\n\tsetCustomQuery: _types2.default.funcRequired,\n\t// component props\n\tchildren: _types2.default.func,\n\tcomponentId: _types2.default.stringRequired,\n\tdefaultQuery: _types2.default.func,\n\tcustomQuery: _types2.default.func,\n\tdefaultValue: _types2.default.any, // eslint-disable-line\n\tvalue: _types2.default.any, // eslint-disable-line\n\tfilterLabel: _types2.default.string,\n\tonQueryChange: _types2.default.func,\n\tonError: _types2.default.func,\n\treact: _types2.default.react,\n\trender: _types2.default.func,\n\tshowFilter: _types2.default.bool,\n\tURLParams: _types2.default.bool,\n\tonData: _types2.default.func,\n\tdistinctField: _types2.default.string,\n\tdistinctFieldConfig: _types2.default.componentObject,\n\tconfig: _types2.default.props,\n\tindex: _types2.default.string\n};\n\n// Add componentType for SSR\nReactiveComponent.componentType = _constants.componentTypes.reactiveComponent;\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n\treturn {\n\t\taggregations: state.aggregations[props.componentId] && state.aggregations[props.componentId] || null,\n\t\taggregationData: state.compositeAggregations[props.componentId] || [],\n\t\thits: state.hits[props.componentId] && state.hits[props.componentId].hits || [],\n\t\trawData: state.rawData[props.componentId],\n\t\tselectedValue: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value || null,\n\t\tisLoading: state.isLoading[props.componentId],\n\t\terror: state.error[props.componentId],\n\t\tpromotedResults: state.promotedResults[props.componentId] || [],\n\t\ttime: state.hits[props.componentId] && state.hits[props.componentId].time || 0,\n\t\ttotal: state.hits[props.componentId] && state.hits[props.componentId].total,\n\t\thidden: state.hits[props.componentId] && state.hits[props.componentId].hidden,\n\t\tconfig: state.config\n\t};\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n\treturn {\n\t\tsetCustomQuery: function setCustomQuery(component, query) {\n\t\t\treturn dispatch((0, _actions.setCustomQuery)(component, query));\n\t\t},\n\t\tsetDefaultQuery: function setDefaultQuery(component, query) {\n\t\t\treturn dispatch((0, _actions.setDefaultQuery)(component, query));\n\t\t},\n\t\tsetQueryOptions: function setQueryOptions(component, props, execute) {\n\t\t\treturn dispatch((0, _actions.setQueryOptions)(component, props, execute));\n\t\t},\n\t\tupdateQuery: function updateQuery(updateQueryObject) {\n\t\t\treturn dispatch((0, _actions.updateQuery)(updateQueryObject));\n\t\t}\n\t};\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)(function (props) {\n\treturn _react2.default.createElement(\n\t\t_ComponentWrapper2.default,\n\t\t_extends({}, props, {\n\t\t\tinternalComponent: !!props.defaultQuery,\n\t\t\tcomponentType: _constants.componentTypes.reactiveComponent\n\t\t}),\n\t\tfunction () {\n\t\t\treturn _react2.default.createElement(ReactiveComponent, _extends({ ref: props.myForwardedRef }, props));\n\t\t}\n\t);\n});\n\n// eslint-disable-next-line\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n\treturn _react2.default.createElement(ConnectedComponent, _extends({}, props, { myForwardedRef: ref }));\n});\n\nForwardRefComponent.displayName = 'ReactiveComponent';\nexports.default = ForwardRefComponent;"]},"metadata":{},"sourceType":"script"}