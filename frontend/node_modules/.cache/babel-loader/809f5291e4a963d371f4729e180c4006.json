{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _core = require('@emotion/core');\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _downshift = require('downshift');\n\nvar _downshift2 = _interopRequireDefault(_downshift);\n\nvar _emotionTheming = require('emotion-theming');\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _transform = require('@appbaseio/reactivecore/lib/utils/transform');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _causes = require('@appbaseio/reactivecore/lib/utils/causes');\n\nvar _causes2 = _interopRequireDefault(_causes);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Input = require('../../styles/Input');\n\nvar _Input2 = _interopRequireDefault(_Input);\n\nvar _CancelSvg = require('../shared/CancelSvg');\n\nvar _CancelSvg2 = _interopRequireDefault(_CancelSvg);\n\nvar _SearchSvg = require('../shared/SearchSvg');\n\nvar _SearchSvg2 = _interopRequireDefault(_SearchSvg);\n\nvar _Container = require('../../styles/Container');\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nvar _Mic = require('./addons/Mic');\n\nvar _Mic2 = _interopRequireDefault(_Mic);\n\nvar _CustomSvg = require('../shared/CustomSvg');\n\nvar _CustomSvg2 = _interopRequireDefault(_CustomSvg);\n\nvar _utils = require('../../utils');\n\nvar _SuggestionItem = require('./addons/SuggestionItem');\n\nvar _SuggestionItem2 = _interopRequireDefault(_SuggestionItem);\n\nvar _SuggestionWrapper = require('./addons/SuggestionWrapper');\n\nvar _SuggestionWrapper2 = _interopRequireDefault(_SuggestionWrapper);\n\nvar _ComponentWrapper = require('../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nvar _IconWrapper = require('../../styles/IconWrapper');\n\nvar _IconWrapper2 = _interopRequireDefault(_IconWrapper);\n\nvar _IconGroup = require('../../styles/IconGroup');\n\nvar _IconGroup2 = _interopRequireDefault(_IconGroup);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/** @jsx jsx */\n\n\nvar Text = (0, _emotionTheming.withTheme)(function (props) {\n  return (0, _core.jsx)('span', {\n    className: 'trim',\n    style: {\n      color: props.primary ? props.theme.colors.primaryColor : props.theme.colors.textColor\n    }\n  }, props.children);\n});\n\nvar CategorySearch = function (_Component) {\n  _inherits(CategorySearch, _Component);\n\n  function CategorySearch(props) {\n    _classCallCheck(this, CategorySearch);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var value = props.value || props.defaultValue || {}; // eslint-disable-next-line\n\n    var _value$term = value.term,\n        currentValue = _value$term === undefined ? '' : _value$term,\n        _value$category = value.category,\n        currentCategory = _value$category === undefined ? null : _value$category; // add preference to selected-X value from URL/SSR\n\n    currentValue = props.selectedValue || currentValue;\n    currentCategory = props.selectedCategory || currentCategory;\n    _this.state = {\n      currentValue: currentValue,\n      currentCategory: currentCategory,\n      suggestions: [],\n      isOpen: false\n    };\n    /**\n     * To regulate the query execution based on the input handler,\n     * the component query will only get executed when it sets to `true`.\n     * */\n\n    _this.isPending = false;\n    _this.internalComponent = (0, _transform.getInternalComponentID)(props.componentId);\n    _this.queryOptions = (0, _helper.getQueryOptions)(props); // Set custom and default queries in store\n\n    (0, _helper.updateCustomQuery)(props.componentId, props, currentValue);\n    (0, _helper.updateDefaultQuery)(props.componentId, props, currentValue);\n\n    if (props.highlight) {\n      var queryOptions = CategorySearch.highlightQuery(props) || {};\n\n      if (props.customHighlight && typeof props.customHighlight === 'function') {\n        props.setCustomHighlightOptions(props.componentId, props.customHighlight(props));\n      }\n\n      queryOptions.size = props.size;\n      _this.queryOptions = queryOptions;\n      props.setQueryOptions(props.componentId, queryOptions);\n    } else {\n      props.setQueryOptions(props.componentId, _this.queryOptions);\n    }\n\n    var aggsQuery = _this.getCombinedAggsQuery();\n\n    props.setQueryOptions(_this.internalComponent, aggsQuery, false);\n    var hasMounted = false;\n    var cause = null;\n\n    if (currentValue) {\n      var calcValue = {\n        term: currentValue,\n        category: currentCategory\n      };\n\n      if (props.onChange) {\n        props.onChange(calcValue, function () {\n          return _this.triggerQuery(calcValue);\n        });\n      }\n\n      _this.setValue(currentValue, true, props, currentCategory, cause, hasMounted);\n    }\n\n    return _this;\n  }\n\n  CategorySearch.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var _this2 = this;\n\n    (0, _helper.checkSomePropChange)(this.props, prevProps, ['highlight', 'dataField', 'highlightField'], function () {\n      var queryOptions = CategorySearch.highlightQuery(_this2.props) || {};\n\n      if (_this2.props.customHighlight && typeof _this2.props.customHighlight === 'function') {\n        _this2.props.setCustomHighlightOptions(_this2.props.componentId, _this2.props.customHighlight(_this2.props));\n      }\n\n      queryOptions.size = _this2.props.size;\n      _this2.queryOptions = queryOptions;\n\n      _this2.props.setQueryOptions(_this2.props.componentId, queryOptions);\n    }); // Treat defaultQuery and customQuery as reactive props\n\n    if (!(0, _utils.isQueryIdentical)(this.state.currentValue, this.props, prevProps, 'defaultQuery')) {\n      this.updateDefaultQuery(this.state.currentValue, this.props);\n      this.updateQuery(this.state.currentValue, this.props);\n    }\n\n    if (!(0, _utils.isQueryIdentical)(this.state.currentValue, this.props, prevProps, 'customQuery')) {\n      this.updateQuery(this.state.currentValue, this.props);\n    }\n\n    if (Array.isArray(this.props.suggestions) && this.state.currentValue.trim().length) {\n      // shallow check allows us to set suggestions even if the next set\n      // of suggestions are same as the current one\n      if (this.props.suggestions !== prevProps.suggestions) {\n        if (this.props.onSuggestions) {\n          this.props.onSuggestions(this.props.suggestions);\n        } // eslint-disable-next-line\n\n\n        this.setState({\n          suggestions: this.onSuggestions(this.props.suggestions)\n        });\n      }\n    }\n\n    (0, _helper.checkSomePropChange)(this.props, prevProps, ['fieldWeights', 'fuzziness', 'queryFormat', 'dataField', 'categoryField', 'nestedField', 'searchOperators'], function () {\n      _this2.updateQuery(_this2.state.currentValue, _this2.props);\n    });\n\n    if (!(0, _helper.isEqual)(this.props.value, prevProps.value)) {\n      var _props$value = this.props.value,\n          currentValue = _props$value.term,\n          _props$value$category = _props$value.category,\n          currentCategory = _props$value$category === undefined ? null : _props$value$category;\n      this.setValue(currentValue, true, this.props, currentCategory, undefined, undefined, false);\n    } else if ( // since, selectedValue will be updated when currentValue changes,\n    // we must only check for the changes introduced by\n    // clear action from SelectedFilters component in which case,\n    // the currentValue will never match the updated selectedValue\n    this.props.selectedValue !== prevProps.selectedValue && this.state.currentValue !== this.props.selectedValue) {\n      if (!this.props.selectedValue && this.state.currentValue) {\n        // selected value is cleared, call onValueSelected\n        this.onValueSelected('', _causes2.default.CLEAR_VALUE, null);\n      }\n\n      var _props = this.props,\n          value = _props.value,\n          onChange = _props.onChange;\n\n      if (value === undefined) {\n        this.setValue(this.props.selectedValue || '', true, this.props, this.props.selectedCategory);\n      } else if (onChange) {\n        var _currentValue = {\n          term: this.props.selectedValue || '',\n          category: this.props.selectedCategory || null\n        }; // value prop exists\n\n        onChange(_currentValue, function () {\n          return _this2.triggerQuery(_currentValue);\n        });\n      } else {\n        // value prop exists and onChange is not defined:\n        // we need to put the current value back into the store\n        // if the clear action was triggered by interacting with\n        // selected-filters component\n        this.isPending = false;\n        this.setValue(this.state.currentValue, true, this.props, this.state.currentCategory);\n      }\n    }\n  };\n\n  CategorySearch.prototype.componentDidMount = function componentDidMount() {\n    var _props2 = this.props,\n        enableQuerySuggestions = _props2.enableQuerySuggestions,\n        renderQuerySuggestions = _props2.renderQuerySuggestions,\n        fetchPopularSuggestions = _props2.fetchPopularSuggestions,\n        enableRecentSearches = _props2.enableRecentSearches,\n        fetchRecentSearches = _props2.fetchRecentSearches,\n        componentId = _props2.componentId,\n        aggregationField = _props2.aggregationField,\n        distinctField = _props2.distinctField,\n        distinctFieldConfig = _props2.distinctFieldConfig,\n        index = _props2.index,\n        enableAppbase = _props2.enableAppbase; // TODO: Remove in 4.0\n\n    if (enableQuerySuggestions !== undefined) {\n      console.warn('Warning(ReactiveSearch): The `enableQuerySuggestions` prop has been marked as deprecated, please use the `enablePopularSuggestions` prop instead.');\n    } // TODO: Remove in 4.0\n\n\n    if (renderQuerySuggestions !== undefined) {\n      console.warn('Warning(ReactiveSearch): The `renderQuerySuggestions` prop has been marked as deprecated, please use the `renderPopularSuggestions` prop instead.');\n    }\n\n    if (enableAppbase && aggregationField) {\n      console.warn('Warning(ReactiveSearch): The `aggregationField` prop has been marked as deprecated, please use the `distinctField` prop instead.');\n    }\n\n    if (!enableAppbase && (distinctField || distinctFieldConfig)) {\n      console.warn('Warning(ReactiveSearch): In order to use the `distinctField` and `distinctFieldConfig` props, the `enableAppbase` prop must be set to true in `ReactiveBase`.');\n    }\n\n    if (!enableAppbase && index) {\n      console.warn('Warning(ReactiveSearch): In order to use the `index` prop, the `enableAppbase` prop must be set to true in `ReactiveBase`.');\n    }\n\n    if (enableRecentSearches) {\n      fetchRecentSearches();\n    }\n\n    fetchPopularSuggestions(componentId);\n  };\n\n  CategorySearch.prototype.shouldMicRender = function shouldMicRender(showVoiceSearch) {\n    // checks for SSR\n    if (typeof window === 'undefined') return false;\n    return showVoiceSearch && (window.webkitSpeechRecognition || window.SpeechRecognition);\n  };\n\n  CategorySearch.prototype.render = function render() {\n    var _this3 = this;\n\n    var currentValue = this.state.currentValue;\n    var _props3 = this.props,\n        theme = _props3.theme,\n        themePreset = _props3.themePreset,\n        size = _props3.size,\n        recentSearchesIcon = _props3.recentSearchesIcon,\n        popularSearchesIcon = _props3.popularSearchesIcon;\n    var finalSuggestionsList = this.parsedSuggestions;\n    var hasSuggestions = currentValue ? finalSuggestionsList.length || this.topSuggestions.length : this.defaultSuggestions.length;\n    return (0, _core.jsx)(_Container2.default, {\n      style: this.props.style,\n      className: this.props.className\n    }, this.props.title && (0, _core.jsx)(_Title2.default, {\n      className: (0, _helper.getClassName)(this.props.innerClass, 'title') || null\n    }, this.props.title), this.props.defaultSuggestions || this.props.autosuggest ? (0, _core.jsx)(_downshift2.default, _extends({\n      id: this.props.componentId + '-downshift',\n      onChange: this.onSuggestionSelected,\n      onStateChange: this.handleStateChange,\n      isOpen: this.state.isOpen,\n      itemToString: function itemToString(i) {\n        return i;\n      },\n      render: function render(_ref) {\n        var getRootProps = _ref.getRootProps,\n            getInputProps = _ref.getInputProps,\n            getItemProps = _ref.getItemProps,\n            isOpen = _ref.isOpen,\n            highlightedIndex = _ref.highlightedIndex,\n            setHighlightedIndex = _ref.setHighlightedIndex,\n            rest = _objectWithoutProperties(_ref, ['getRootProps', 'getInputProps', 'getItemProps', 'isOpen', 'highlightedIndex', 'setHighlightedIndex']);\n\n        return (0, _core.jsx)('div', getRootProps({\n          css: _Input.suggestionsContainer\n        }, {\n          suppressRefError: true\n        }), (0, _core.jsx)(_Input2.default, _extends({\n          ref: function ref(c) {\n            _this3._inputRef = c;\n          },\n          'aria-label': _this3.props.componentId,\n          showClear: _this3.props.showClear,\n          id: _this3.props.componentId + '-input',\n          showIcon: _this3.props.showIcon,\n          showVoiceSearch: _this3.props.showVoiceSearch,\n          iconPosition: _this3.props.iconPosition\n        }, getInputProps({\n          className: (0, _helper.getClassName)(_this3.props.innerClass, 'input'),\n          placeholder: _this3.props.placeholder,\n          value: _this3.state.currentValue === null ? '' : _this3.state.currentValue,\n          onChange: _this3.onInputChange,\n          onBlur: _this3.withTriggerQuery(_this3.props.onBlur),\n          onFocus: _this3.handleFocus,\n          onKeyPress: _this3.withTriggerQuery(_this3.props.onKeyPress),\n          onKeyDown: function onKeyDown(e) {\n            return _this3.handleKeyDown(e, highlightedIndex);\n          },\n          onKeyUp: _this3.withTriggerQuery(_this3.props.onKeyUp),\n          onClick: function onClick() {\n            // clear highlighted index\n            setHighlightedIndex(null);\n          }\n        }), {\n          themePreset: themePreset\n        })), _this3.renderIcons(), isOpen && _this3.renderLoader(), isOpen && _this3.renderError(), _this3.hasCustomRenderer && _this3.getComponent(_extends({\n          getInputProps: getInputProps,\n          getItemProps: getItemProps,\n          isOpen: isOpen,\n          highlightedIndex: highlightedIndex,\n          setHighlightedIndex: setHighlightedIndex\n        }, rest)), !_this3.hasCustomRenderer && isOpen && hasSuggestions ? (0, _core.jsx)('ul', {\n          css: (0, _Input.suggestions)(themePreset, theme),\n          className: (0, _helper.getClassName)(_this3.props.innerClass, 'list')\n        }, finalSuggestionsList.slice(0, size).map(function (item, index) {\n          return (0, _core.jsx)('li', _extends({}, getItemProps({\n            item: item\n          }), {\n            key: index + 1 + '-' + item.value // eslint-disable-line\n            ,\n            style: {\n              backgroundColor: _this3.getBackgroundColor(highlightedIndex, index)\n            }\n          }), (0, _core.jsx)(Text, {\n            primary: !!item.category\n          }, (0, _core.jsx)(_SuggestionItem2.default, {\n            currentValue: currentValue,\n            suggestion: item\n          })));\n        }), _this3.defaultSuggestions.map(function (sugg, index) {\n          return (0, _core.jsx)('li', _extends({}, getItemProps({\n            item: sugg\n          }), {\n            key: index + 1 + '-' + sugg.value,\n            style: {\n              backgroundColor: _this3.getBackgroundColor(highlightedIndex, index),\n              justifyContent: 'flex-start'\n            }\n          }), (0, _core.jsx)('div', {\n            style: {\n              padding: '0 10px 0 0'\n            }\n          }, sugg.source && sugg.source._recent_search && (0, _core.jsx)(_CustomSvg2.default, {\n            iconId: sugg.label + '-icon',\n            className: (0, _helper.getClassName)(_this3.props.innerClass, 'recent-search-icon') || null,\n            icon: recentSearchesIcon,\n            type: 'recent-search-icon'\n          }), sugg.source && sugg.source._popular_suggestion && (0, _core.jsx)(_CustomSvg2.default, {\n            iconId: sugg.label + '-icon',\n            className: (0, _helper.getClassName)(_this3.props.innerClass, 'popular-search-icon') || null,\n            icon: popularSearchesIcon,\n            type: 'popular-search-icon'\n          })), (0, _core.jsx)(_SuggestionItem2.default, {\n            currentValue: currentValue,\n            suggestion: sugg\n          }));\n        }), (0, _utils.hasPopularSuggestionsRenderer)(_this3.props) ? _this3.getComponent(_extends({\n          getInputProps: getInputProps,\n          getItemProps: getItemProps,\n          isOpen: isOpen,\n          highlightedIndex: highlightedIndex\n        }, rest), true) : _this3.topSuggestions.map(function (sugg, index) {\n          return (0, _core.jsx)('li', _extends({}, getItemProps({\n            item: sugg\n          }), {\n            key: finalSuggestionsList.length + index + 1 + '-' + sugg.value,\n            style: {\n              backgroundColor: _this3.getBackgroundColor(highlightedIndex, finalSuggestionsList.length + index),\n              justifyContent: 'flex-start'\n            }\n          }), (0, _core.jsx)('div', {\n            style: {\n              padding: '0 10px 0 0'\n            }\n          }, (0, _core.jsx)(_CustomSvg2.default, {\n            iconId: sugg.label + '-icon',\n            className: (0, _helper.getClassName)(_this3.props.innerClass, 'popular-search-icon') || null,\n            icon: popularSearchesIcon,\n            type: 'popular-search-icon'\n          })), (0, _core.jsx)(_SuggestionItem2.default, {\n            currentValue: currentValue,\n            suggestion: sugg\n          }));\n        })) : _this3.renderNoSuggestion(finalSuggestionsList));\n      }\n    }, this.props.downShiftProps)) : (0, _core.jsx)('div', {\n      css: _Input.suggestionsContainer\n    }, (0, _core.jsx)(_Input2.default, {\n      ref: function ref(c) {\n        _this3._inputRef = c;\n      },\n      'aria-label': this.props.componentId,\n      className: (0, _helper.getClassName)(this.props.innerClass, 'input'),\n      placeholder: this.props.placeholder,\n      value: this.state.currentValue ? this.state.currentValue : '',\n      onChange: this.onInputChange,\n      onBlur: this.withTriggerQuery(this.props.onBlur),\n      onFocus: this.withTriggerQuery(this.props.onFocus),\n      onKeyPress: this.withTriggerQuery(this.props.onKeyPress),\n      onKeyDown: this.withTriggerQuery(this.props.onKeyDown),\n      onKeyUp: this.withTriggerQuery(this.props.onKeyUp),\n      autoFocus: this.props.autoFocus,\n      iconPosition: this.props.iconPosition,\n      showClear: this.props.showClear,\n      showIcon: this.props.showIcon,\n      showVoiceSearch: this.props.showVoiceSearch,\n      themePreset: themePreset\n    }), this.renderIcons()));\n  };\n\n  _createClass(CategorySearch, [{\n    key: 'stats',\n    get: function get() {\n      return (0, _helper.getResultStats)(this.props);\n    }\n  }, {\n    key: 'hasCustomRenderer',\n    get: function get() {\n      return (0, _utils.hasCustomRenderer)(this.props);\n    }\n  }, {\n    key: 'filteredCategories',\n    get: function get() {\n      var categories = this.props.categories;\n      return categories.filter(function (category) {\n        return Boolean(category.key);\n      });\n    }\n  }, {\n    key: 'parsedSuggestions',\n    get: function get() {\n      var finalSuggestionsList = [];\n      var suggestionsList = []; // filter out empty categories\n\n      var filteredCategories = this.filteredCategories;\n\n      if (!this.state.currentValue && this.props.defaultSuggestions && this.props.defaultSuggestions.length) {\n        finalSuggestionsList = this.props.defaultSuggestions;\n      } else if (this.state.currentValue) {\n        suggestionsList = this.state.suggestions;\n      }\n\n      if (this.state.currentValue && this.state.suggestions.length && filteredCategories.length) {\n        var categorySuggestions = [{\n          label: this.state.currentValue + ' in all categories',\n          value: this.state.currentValue,\n          category: '*',\n          // no source object exists for category based suggestions\n          source: null\n        }, {\n          label: this.state.currentValue + ' in ' + filteredCategories[0].key,\n          value: this.state.currentValue,\n          category: filteredCategories[0].key,\n          source: null\n        }];\n\n        if (filteredCategories.length > 1) {\n          categorySuggestions = [].concat(categorySuggestions, [{\n            label: this.state.currentValue + ' in ' + filteredCategories[1].key,\n            value: this.state.currentValue,\n            category: filteredCategories[1].key,\n            source: null\n          }]);\n        }\n\n        finalSuggestionsList = [].concat(categorySuggestions, suggestionsList);\n      }\n\n      return (0, _helper.withClickIds)(finalSuggestionsList);\n    }\n  }, {\n    key: 'topSuggestions',\n    get: function get() {\n      var _props4 = this.props,\n          enableQuerySuggestions = _props4.enableQuerySuggestions,\n          enablePopularSuggestions = _props4.enablePopularSuggestions;\n      var currentValue = this.state.currentValue;\n\n      if (!currentValue) {\n        return [];\n      }\n\n      return enableQuerySuggestions || enablePopularSuggestions ? this.normalizedPopularSuggestions : [];\n    }\n  }, {\n    key: 'normalizedRecentSearches',\n    get: function get() {\n      var recentSearches = this.props.recentSearches;\n      return recentSearches;\n    }\n  }, {\n    key: 'normalizedPopularSuggestions',\n    get: function get() {\n      var _props5 = this.props,\n          popularSuggestions = _props5.popularSuggestions,\n          showDistinctSuggestions = _props5.showDistinctSuggestions,\n          defaultPopularSuggestions = _props5.defaultPopularSuggestions;\n      var currentValue = this.state.currentValue;\n      return (0, _helper.getTopSuggestions)( // use default popular suggestions if value is empty\n      currentValue ? popularSuggestions : defaultPopularSuggestions, currentValue, showDistinctSuggestions);\n    }\n  }, {\n    key: 'defaultSuggestions',\n    get: function get() {\n      var _props6 = this.props,\n          enableQuerySuggestions = _props6.enableQuerySuggestions,\n          enablePopularSuggestions = _props6.enablePopularSuggestions,\n          showDistinctSuggestions = _props6.showDistinctSuggestions,\n          defaultPopularSuggestions = _props6.defaultPopularSuggestions;\n      var isPopularSuggestionsEnabled = enableQuerySuggestions || enablePopularSuggestions;\n      var currentValue = this.state.currentValue;\n\n      if (currentValue) {\n        return [];\n      }\n\n      var customDefaultPopularSuggestions = defaultPopularSuggestions.map(function (suggestion) {\n        return _extends({}, suggestion, {\n          _popular_suggestion: true\n        });\n      });\n      var customNormalizedRecentSearches = this.normalizedRecentSearches.map(function (search) {\n        return _extends({}, search, {\n          _recent_search: true\n        });\n      });\n      var defaultSuggestions = isPopularSuggestionsEnabled ? [].concat(customNormalizedRecentSearches, customDefaultPopularSuggestions) : customNormalizedRecentSearches;\n      return (0, _helper.getTopSuggestions)( // use default popular suggestions if value is empty\n      defaultSuggestions, currentValue, showDistinctSuggestions);\n    }\n  }]);\n\n  return CategorySearch;\n}(_react.Component);\n\nCategorySearch.highlightQuery = function (props) {\n  if (props.customHighlight) {\n    return props.customHighlight(props);\n  }\n\n  if (!props.highlight) {\n    return null;\n  }\n\n  var fields = {};\n  var highlightField = props.highlightField ? props.highlightField : props.dataField;\n\n  if (typeof highlightField === 'string') {\n    fields[highlightField] = {};\n  } else if (Array.isArray(highlightField)) {\n    highlightField.forEach(function (item) {\n      fields[item] = {};\n    });\n  }\n\n  return {\n    highlight: _extends({\n      pre_tags: ['<mark>'],\n      post_tags: ['</mark>'],\n      fields: fields\n    }, props.highlightField && {\n      require_field_match: false\n    })\n  };\n};\n\nCategorySearch.defaultQuery = function (value, props, category) {\n  var finalQuery = null;\n  var fields = [];\n\n  if (value) {\n    if (Array.isArray(props.dataField)) {\n      fields = props.dataField;\n    } else if (props.dataField) {\n      fields = [props.dataField];\n    }\n\n    if (props.queryString) {\n      finalQuery = {\n        query_string: CategorySearch.shouldQuery(value, fields, props)\n      };\n    } else if (props.searchOperators) {\n      finalQuery = {\n        simple_query_string: CategorySearch.shouldQuery(value, fields, props)\n      };\n    } else {\n      finalQuery = {\n        bool: {\n          should: CategorySearch.shouldQuery(value, fields, props),\n          minimum_should_match: '1'\n        }\n      };\n    }\n\n    if (category && category !== '*') {\n      var _term;\n\n      finalQuery = [finalQuery, {\n        term: (_term = {}, _term[props.categoryField] = category, _term)\n      }];\n    }\n  }\n\n  if (value === '') {\n    finalQuery = null;\n  }\n\n  if (finalQuery && props.nestedField) {\n    finalQuery = {\n      nested: {\n        path: props.nestedField,\n        query: finalQuery\n      }\n    };\n  }\n\n  return finalQuery;\n};\n\nCategorySearch.shouldQuery = function (value, dataFields, props) {\n  var finalQuery = [];\n  var phrasePrefixFields = [];\n  var fields = (dataFields || []).map(function (field, index) {\n    var queryField = '' + field + (Array.isArray(props.fieldWeights) && props.fieldWeights[index] ? '^' + props.fieldWeights[index] : '');\n\n    if (!(field.endsWith('.keyword') || field.endsWith('.autosuggest') || field.endsWith('.search'))) {\n      phrasePrefixFields.push(queryField);\n    }\n\n    return queryField;\n  });\n\n  if (props.searchOperators || props.queryString) {\n    return {\n      query: value,\n      fields: fields,\n      default_operator: props.queryFormat\n    };\n  }\n\n  if (props.queryFormat === 'and') {\n    finalQuery.push({\n      multi_match: {\n        query: value,\n        fields: fields,\n        type: 'cross_fields',\n        operator: 'and'\n      }\n    });\n    finalQuery.push({\n      multi_match: {\n        query: value,\n        fields: fields,\n        type: 'phrase',\n        operator: 'and'\n      }\n    });\n\n    if (phrasePrefixFields.length > 0) {\n      finalQuery.push({\n        multi_match: {\n          query: value,\n          fields: phrasePrefixFields,\n          type: 'phrase_prefix',\n          operator: 'and'\n        }\n      });\n    }\n\n    return finalQuery;\n  }\n\n  finalQuery.push({\n    multi_match: {\n      query: value,\n      fields: fields,\n      type: 'best_fields',\n      operator: 'or',\n      fuzziness: props.fuzziness ? props.fuzziness : 0\n    }\n  });\n  finalQuery.push({\n    multi_match: {\n      query: value,\n      fields: fields,\n      type: 'phrase',\n      operator: 'or'\n    }\n  });\n\n  if (phrasePrefixFields.length > 0) {\n    finalQuery.push({\n      multi_match: {\n        query: value,\n        fields: phrasePrefixFields,\n        type: 'phrase_prefix',\n        operator: 'or'\n      }\n    });\n  }\n\n  return finalQuery;\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this4 = this;\n\n  this.getAggsQuery = function (field) {\n    var _aggs;\n\n    return {\n      aggs: (_aggs = {}, _aggs[field] = {\n        terms: {\n          field: field\n        }\n      }, _aggs)\n    };\n  };\n\n  this.getCombinedAggsQuery = function () {\n    var _props7 = _this4.props,\n        categoryField = _props7.categoryField,\n        aggregationField = _props7.aggregationField;\n\n    var aggsQuery = _this4.getAggsQuery(categoryField);\n\n    if (aggregationField) {\n      var compositeAggsQuery = (0, _helper.getCompositeAggsQuery)({\n        value: null,\n        props: _this4.props,\n        showTopHits: true\n      });\n      aggsQuery.aggs = _extends({}, aggsQuery.aggs, compositeAggsQuery.aggs);\n    }\n\n    return aggsQuery;\n  };\n\n  this.onSuggestions = function (searchResults) {\n    return (0, _helper.handleOnSuggestions)(searchResults, _this4.state.currentValue, _this4.props);\n  };\n\n  this.setValue = function (value) {\n    var isDefaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this4.props;\n    var category = arguments[3];\n    var cause = arguments[4];\n    var hasMounted = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;\n    var toggleIsOpen = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : true;\n\n    var performUpdate = function performUpdate() {\n      if (hasMounted) {\n        var _props8 = _this4.props,\n            enableRecentSearches = _props8.enableRecentSearches,\n            fetchRecentSearches = _props8.fetchRecentSearches; // Refresh recent searches when value becomes empty\n\n        if (!value && _this4.state.currentValue && enableRecentSearches) {\n          fetchRecentSearches();\n        }\n\n        _this4.setState({\n          currentValue: value || '',\n          currentCategory: category || null\n        }, function () {\n          if (isDefaultValue) {\n            if (_this4.props.autosuggest) {\n              if (toggleIsOpen) {\n                _this4.setState({\n                  isOpen: false\n                });\n              }\n\n              _this4.updateDefaultQuery(value, props);\n            } // in case of strict selection only SUGGESTION_SELECT should be able\n            // to set the query otherwise the value should reset\n\n\n            if (props.strictSelection) {\n              if (cause === _causes2.default.SUGGESTION_SELECT || value === '') {\n                _this4.updateQuery(value, props, category);\n              } else {\n                _this4.setValue('', true);\n              }\n            } else {\n              _this4.updateQuery(value, props, category);\n            }\n          } else {\n            // debounce for handling text while typing\n            _this4.handleTextChange(value);\n          }\n\n          if (props.onValueChange) props.onValueChange(value);\n        });\n      } else {\n        _this4.updateDefaultQuery(value, props);\n\n        _this4.updateQuery(value, props, category);\n\n        if (props.onValueChange) props.onValueChange(value);\n      }\n    };\n\n    (0, _helper.checkValueChange)(props.componentId, value, props.beforeValueChange, performUpdate);\n  };\n\n  this.handleTextChange = (0, _helper.debounce)(function (value) {\n    if (_this4.props.autosuggest) {\n      _this4.updateDefaultQuery(value, _this4.props);\n    } else {\n      _this4.updateQuery(value, _this4.props);\n    }\n  }, this.props.debounce);\n\n  this.updateDefaultQuery = function (value, props) {\n    var category = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this4.state.currentCategory;\n    var defaultQuery = props.defaultQuery;\n    var defaultQueryOptions = void 0;\n    var query = CategorySearch.defaultQuery(value, props, category);\n\n    if (defaultQuery) {\n      var defaultQueryTobeSet = defaultQuery(value, props, category) || {};\n\n      if (defaultQueryTobeSet.query) {\n        query = defaultQueryTobeSet.query;\n      }\n\n      defaultQueryOptions = (0, _helper.getOptionsFromQuery)(defaultQueryTobeSet); // Update calculated default query in store\n\n      (0, _helper.updateDefaultQuery)(props.componentId, props, value);\n    }\n\n    props.setSuggestionsSearchValue(value);\n\n    var aggsQuery = _this4.getCombinedAggsQuery();\n\n    props.setQueryOptions(_this4.internalComponent, _extends({}, _this4.queryOptions, aggsQuery, defaultQueryOptions));\n    props.updateQuery({\n      componentId: _this4.internalComponent,\n      query: query,\n      value: value,\n      category: category,\n      componentType: _constants.componentTypes.categorySearch\n    });\n  };\n\n  this.updateQuery = function (value, props) {\n    var category = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this4.state.currentCategory;\n    var customQuery = props.customQuery,\n        filterLabel = props.filterLabel,\n        showFilter = props.showFilter,\n        URLParams = props.URLParams;\n    var customQueryOptions = void 0;\n    var query = CategorySearch.defaultQuery(value, props, category);\n\n    if (customQuery) {\n      var customQueryTobeSet = customQuery(value, props, category) || {};\n\n      if (customQueryTobeSet.query) {\n        query = customQueryTobeSet.query;\n      }\n\n      customQueryOptions = (0, _helper.getOptionsFromQuery)(customQueryTobeSet);\n      (0, _helper.updateCustomQuery)(props.componentId, props, value);\n    }\n\n    if (!_this4.isPending) {\n      // execute the query on an uncontrolled component\n      // query options should be applied to the source component,\n      // not on internal component, hence using `this.props.componentId` here\n      props.setQueryOptions(props.componentId, _extends({}, _this4.queryOptions, customQueryOptions));\n      props.updateQuery({\n        componentId: props.componentId,\n        query: query,\n        value: value,\n        label: filterLabel,\n        showFilter: showFilter,\n        URLParams: URLParams,\n        componentType: _constants.componentTypes.categorySearch,\n        category: category\n      });\n    }\n  };\n\n  this.handleFocus = function (event) {\n    _this4.setState({\n      isOpen: true\n    });\n\n    if (_this4.props.onFocus) {\n      _this4.props.onFocus(event, _this4.triggerQuery);\n    }\n  };\n\n  this.clearValue = function () {\n    _this4.isPending = false;\n\n    _this4.setValue('', true);\n\n    _this4.onValueSelected('', _causes2.default.CLEAR_VALUE, null);\n  };\n\n  this.handleKeyDown = function (event, highlightedIndex) {\n    var _props9 = _this4.props,\n        value = _props9.value,\n        onChange = _props9.onChange;\n\n    if (value !== undefined && onChange) {\n      _this4.isPending = true;\n    } // if a suggestion was selected, delegate the handling to suggestion handler\n\n\n    if (event.key === 'Enter' && highlightedIndex === null) {\n      _this4.setValue(event.target.value, true);\n\n      var currentValue = {\n        term: event.target.value,\n        category: null\n      };\n\n      _this4.onValueSelected(currentValue, _causes2.default.ENTER_PRESS);\n    }\n\n    if (_this4.props.onKeyDown) {\n      _this4.props.onKeyDown(event, _this4.triggerQuery);\n    }\n  };\n\n  this.onInputChange = function (e) {\n    var inputValue = e.target.value;\n\n    if (!_this4.state.isOpen) {\n      _this4.setState({\n        isOpen: true\n      });\n    }\n\n    var _props10 = _this4.props,\n        value = _props10.value,\n        onChange = _props10.onChange;\n\n    if (value === undefined) {\n      _this4.setValue(inputValue);\n    } else if (onChange) {\n      _this4.isPending = true;\n      var currentValue = {\n        term: inputValue // category: null,\n\n      }; // handle caret position in controlled components\n\n      (0, _utils.handleCaretPosition)(e);\n      onChange(currentValue, function () {\n        return _this4.triggerQuery(currentValue);\n      }, e);\n    } else {\n      _this4.setValue(inputValue);\n    }\n  };\n\n  this.triggerQuery = function (value) {\n    var currentValue = value.term,\n        _value$category2 = value.category,\n        currentCategory = _value$category2 === undefined ? null : _value$category2;\n    _this4.isPending = false;\n\n    _this4.setValue(currentValue, true, _this4.props, currentCategory);\n  };\n\n  this.onSuggestionSelected = function (suggestion) {\n    var _props11 = _this4.props,\n        value = _props11.value,\n        onChange = _props11.onChange;\n    var currentValue = {\n      term: suggestion.value,\n      category: suggestion.category || null\n    };\n\n    _this4.setState({\n      isOpen: false\n    });\n\n    if (value === undefined) {\n      _this4.setValue(currentValue.term, true, _this4.props, currentValue.category, _causes2.default.SUGGESTION_SELECT);\n    } else if (onChange) {\n      _this4.isPending = false;\n      onChange(currentValue, function () {\n        return _this4.triggerQuery(currentValue);\n      });\n    } // Record analytics for selected suggestions\n\n\n    _this4.triggerClickAnalytics(suggestion._click_id); // onValueSelected is user interaction driven:\n    // it should be triggered irrespective of controlled (or)\n    // uncontrolled component behavior\n\n\n    _this4.onValueSelected(currentValue, _causes2.default.SUGGESTION_SELECT, suggestion.source);\n  };\n\n  this.onValueSelected = function (selectedValue, cause, source) {\n    var onValueSelected = _this4.props.onValueSelected;\n\n    if (onValueSelected) {\n      onValueSelected(selectedValue, cause, source);\n    }\n  };\n\n  this.handleStateChange = function (changes) {\n    var isOpen = changes.isOpen,\n        type = changes.type;\n\n    if (type === _downshift2.default.stateChangeTypes.mouseUp && isOpen !== undefined) {\n      _this4.setState({\n        isOpen: isOpen\n      });\n    }\n  };\n\n  this.getBackgroundColor = function (highlightedIndex, index) {\n    var isDark = _this4.props.themePreset === 'dark';\n\n    if (isDark) {\n      return highlightedIndex === index ? '#555' : '#424242';\n    }\n\n    return highlightedIndex === index ? '#eee' : '#fff';\n  };\n\n  this.handleSearchIconClick = function () {\n    var currentValue = _this4.state.currentValue;\n\n    if (currentValue.trim()) {\n      _this4.isPending = false;\n\n      _this4.setValue(currentValue, true);\n\n      _this4.onValueSelected(currentValue, _causes2.default.SEARCH_ICON_CLICK);\n    }\n  };\n\n  this.handleVoiceResults = function (_ref2) {\n    var results = _ref2.results;\n\n    if (results && results[0] && results[0].isFinal && results[0][0] && results[0][0].transcript && results[0][0].transcript.trim()) {\n      _this4.isPending = false;\n\n      _this4.setValue(results[0][0].transcript.trim(), true);\n    }\n  };\n\n  this.renderIcon = function () {\n    if (_this4.props.showIcon) {\n      return _this4.props.icon || (0, _core.jsx)(_SearchSvg2.default, null);\n    }\n\n    return null;\n  };\n\n  this.renderCancelIcon = function () {\n    if (_this4.props.showClear) {\n      return _this4.props.clearIcon || (0, _core.jsx)(_CancelSvg2.default, null);\n    }\n\n    return null;\n  };\n\n  this.renderIcons = function () {\n    var _props12 = _this4.props,\n        showIcon = _props12.showIcon,\n        showClear = _props12.showClear,\n        renderMic = _props12.renderMic,\n        getMicInstance = _props12.getMicInstance,\n        showVoiceSearch = _props12.showVoiceSearch,\n        iconPosition = _props12.iconPosition,\n        innerClass = _props12.innerClass;\n    return (0, _core.jsx)('div', null, (0, _core.jsx)(_IconGroup2.default, {\n      groupPosition: 'right',\n      positionType: 'absolute'\n    }, _this4.state.currentValue && showClear && (0, _core.jsx)(_IconWrapper2.default, {\n      onClick: _this4.clearValue,\n      showIcon: showIcon,\n      isClearIcon: true\n    }, _this4.renderCancelIcon()), _this4.shouldMicRender(showVoiceSearch) && (0, _core.jsx)(_Mic2.default, {\n      getInstance: getMicInstance,\n      render: renderMic,\n      onResult: _this4.handleVoiceResults,\n      className: (0, _helper.getClassName)(innerClass, 'mic') || null\n    }), iconPosition === 'right' && (0, _core.jsx)(_IconWrapper2.default, {\n      onClick: _this4.handleSearchIconClick\n    }, _this4.renderIcon())), (0, _core.jsx)(_IconGroup2.default, {\n      groupPosition: 'left',\n      positionType: 'absolute'\n    }, iconPosition === 'left' && (0, _core.jsx)(_IconWrapper2.default, {\n      onClick: _this4.handleSearchIconClick\n    }, _this4.renderIcon())));\n  };\n\n  this.renderNoSuggestion = function () {\n    var finalSuggestionsList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var _props13 = _this4.props,\n        themePreset = _props13.themePreset,\n        theme = _props13.theme,\n        isLoading = _props13.isLoading,\n        renderNoSuggestion = _props13.renderNoSuggestion,\n        innerClass = _props13.innerClass,\n        renderError = _props13.renderError,\n        error = _props13.error;\n    var _state = _this4.state,\n        isOpen = _state.isOpen,\n        currentValue = _state.currentValue;\n\n    if (renderNoSuggestion && isOpen && !finalSuggestionsList.length && !isLoading && currentValue && !(renderError && error)) {\n      return (0, _core.jsx)(_SuggestionWrapper2.default, {\n        innerClass: innerClass,\n        themePreset: themePreset,\n        theme: theme,\n        innerClassName: 'noSuggestion'\n      }, typeof renderNoSuggestion === 'function' ? renderNoSuggestion(currentValue) : renderNoSuggestion);\n    }\n\n    return null;\n  };\n\n  this.renderLoader = function () {\n    var _props14 = _this4.props,\n        loader = _props14.loader,\n        isLoading = _props14.isLoading,\n        themePreset = _props14.themePreset,\n        theme = _props14.theme,\n        innerClass = _props14.innerClass;\n    var currentValue = _this4.state.currentValue;\n\n    if (isLoading && loader && currentValue) {\n      return (0, _core.jsx)(_SuggestionWrapper2.default, {\n        innerClass: innerClass,\n        innerClassName: 'loader',\n        theme: theme,\n        themePreset: themePreset\n      }, loader);\n    }\n\n    return null;\n  };\n\n  this.renderError = function () {\n    var _props15 = _this4.props,\n        error = _props15.error,\n        renderError = _props15.renderError,\n        themePreset = _props15.themePreset,\n        theme = _props15.theme,\n        isLoading = _props15.isLoading,\n        innerClass = _props15.innerClass;\n    var currentValue = _this4.state.currentValue;\n\n    if (error && renderError && currentValue && !isLoading) {\n      return (0, _core.jsx)(_SuggestionWrapper2.default, {\n        innerClass: innerClass,\n        innerClassName: 'error',\n        theme: theme,\n        themePreset: themePreset\n      }, (0, _utils.isFunction)(renderError) ? renderError(error) : renderError);\n    }\n\n    return null;\n  };\n\n  this.getComponent = function () {\n    var downshiftProps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var isQuerySuggestionsRender = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var _props16 = _this4.props,\n        error = _props16.error,\n        isLoading = _props16.isLoading,\n        aggregationData = _props16.aggregationData,\n        promotedResults = _props16.promotedResults,\n        customData = _props16.customData,\n        rawData = _props16.rawData;\n    var currentValue = _this4.state.currentValue;\n    var data = {\n      error: error,\n      loading: isLoading,\n      downshiftProps: downshiftProps,\n      data: _this4.parsedSuggestions,\n      promotedData: promotedResults || [],\n      customData: customData || {},\n      rawData: rawData,\n      aggregationData: aggregationData || [],\n      value: currentValue,\n      suggestions: _this4.state.suggestions,\n      rawSuggestions: _this4.props.suggestions || [],\n      categories: _this4.filteredCategories,\n      rawCategories: _this4.props.categories,\n      triggerClickAnalytics: _this4.triggerClickAnalytics,\n      resultStats: _this4.stats,\n      // TODO: Remove in v4\n      querySuggestions: _this4.normalizedPopularSuggestions,\n      popularSuggestions: _this4.normalizedPopularSuggestions,\n      recentSearches: _this4.normalizedRecentSearches\n    };\n\n    if (isQuerySuggestionsRender) {\n      return (0, _utils.getPopularSuggestionsComponent)({\n        downshiftProps: downshiftProps,\n        data: _this4.normalizedPopularSuggestions,\n        value: currentValue,\n        loading: isLoading,\n        error: error\n      }, _this4.props);\n    }\n\n    return (0, _utils.getComponent)(data, _this4.props);\n  };\n\n  this.triggerClickAnalytics = function (searchPosition, documentId) {\n    var docId = documentId;\n\n    if (!docId) {\n      var hitData = _this4.parsedSuggestions.find(function (hit) {\n        return hit._click_id === searchPosition;\n      });\n\n      if (hitData && hitData.source && hitData.source._id) {\n        docId = hitData.source._id;\n      }\n    }\n\n    _this4.props.triggerAnalytics(searchPosition, docId);\n  };\n\n  this.withTriggerQuery = function (func) {\n    if (func) {\n      return function (e) {\n        return func(e, function () {\n          return _this4.triggerQuery(_this4.props.value);\n        });\n      };\n    }\n\n    return undefined;\n  };\n};\n\nCategorySearch.propTypes = {\n  setQueryOptions: _types2.default.funcRequired,\n  updateQuery: _types2.default.funcRequired,\n  setSuggestionsSearchValue: _types2.default.funcRequired,\n  fetchPopularSuggestions: _types2.default.funcRequired,\n  defaultPopularSuggestions: _types2.default.suggestions,\n  options: _types2.default.options,\n  categories: _types2.default.data,\n  rawData: _types2.default.rawData,\n  promotedResults: _types2.default.hits,\n  customData: _types2.default.title,\n  selectedValue: _types2.default.selectedValue,\n  selectedCategory: _types2.default.selectedValue,\n  suggestions: _types2.default.suggestions,\n  aggregationData: _types2.default.aggregationData,\n  isLoading: _types2.default.bool,\n  enableAppbase: _types2.default.bool,\n  triggerAnalytics: _types2.default.funcRequired,\n  setCustomQuery: _types2.default.funcRequired,\n  setDefaultQuery: _types2.default.funcRequired,\n  time: _types2.default.number,\n  setCustomHighlightOptions: _types2.default.funcRequired,\n  fetchRecentSearches: _types2.default.funcRequired,\n  recentSearches: _types2.default.suggestions,\n  // eslint-disable-next-line\n  error: _types2.default.any,\n  // component props\n  autoFocus: _types2.default.bool,\n  autosuggest: _types2.default.bool,\n  enableSynonyms: _types2.default.bool,\n  enableQuerySuggestions: _types2.default.bool,\n  distinctField: _types2.default.string,\n  distinctFieldConfig: _types2.default.componentObject,\n  index: _types2.default.string,\n  // TODO: Remove in v4\n  enablePopularSuggestions: _types2.default.bool,\n  enableRecentSearches: _types2.default.bool,\n  queryString: _types2.default.bool,\n  beforeValueChange: _types2.default.func,\n  categoryField: _types2.default.string,\n  className: _types2.default.string,\n  clearIcon: _types2.default.children,\n  componentId: _types2.default.stringRequired,\n  customHighlight: _types2.default.func,\n  customQuery: _types2.default.func,\n  defaultQuery: _types2.default.func,\n  dataField: _types2.default.dataFieldValidator,\n  aggregationField: _types2.default.string,\n  aggregationSize: _types2.default.number,\n  size: _types2.default.number,\n  debounce: _types2.default.number,\n  defaultValue: _types2.default.categorySearchValue,\n  value: _types2.default.categorySearchValue,\n  defaultSuggestions: _types2.default.suggestions,\n  downShiftProps: _types2.default.props,\n  excludeFields: _types2.default.excludeFields,\n  fieldWeights: _types2.default.fieldWeights,\n  filterLabel: _types2.default.string,\n  fuzziness: _types2.default.fuzziness,\n  highlight: _types2.default.bool,\n  highlightField: _types2.default.stringOrArray,\n  icon: _types2.default.children,\n  iconPosition: _types2.default.iconPosition,\n  includeFields: _types2.default.includeFields,\n  innerClass: _types2.default.style,\n  loader: _types2.default.title,\n  nestedField: _types2.default.string,\n  onError: _types2.default.func,\n  onBlur: _types2.default.func,\n  onFocus: _types2.default.func,\n  onKeyDown: _types2.default.func,\n  onKeyPress: _types2.default.func,\n  onKeyUp: _types2.default.func,\n  onQueryChange: _types2.default.func,\n  onSuggestions: _types2.default.func,\n  onValueChange: _types2.default.func,\n  onChange: _types2.default.func,\n  onValueSelected: _types2.default.func,\n  placeholder: _types2.default.string,\n  queryFormat: _types2.default.queryFormatSearch,\n  popularSuggestions: _types2.default.hits,\n  react: _types2.default.react,\n  renderError: _types2.default.title,\n  // TODO: Remove in v4\n  renderQuerySuggestions: _types2.default.func,\n  renderPopularSuggestions: _types2.default.func,\n  parseSuggestion: _types2.default.func,\n  renderNoSuggestion: _types2.default.title,\n  showClear: _types2.default.bool,\n  showFilter: _types2.default.bool,\n  showVoiceSearch: _types2.default.bool,\n  showDistinctSuggestions: _types2.default.bool,\n  showIcon: _types2.default.bool,\n  style: _types2.default.style,\n  title: _types2.default.title,\n  theme: _types2.default.style,\n  themePreset: _types2.default.themePreset,\n  URLParams: _types2.default.bool,\n  strictSelection: _types2.default.bool,\n  searchOperators: _types2.default.bool,\n  recentSearchesIcon: _types2.default.componentObject,\n  popularSearchesIcon: _types2.default.componentObject,\n  // Mic props\n  getMicInstance: _types2.default.func,\n  renderMic: _types2.default.func,\n  enablePredictiveSuggestions: _types2.default.bool\n};\nCategorySearch.defaultProps = {\n  autosuggest: true,\n  className: null,\n  debounce: 0,\n  downShiftProps: {},\n  enableSynonyms: true,\n  enablePopularSuggestions: false,\n  excludeFields: [],\n  iconPosition: 'left',\n  includeFields: ['*'],\n  placeholder: 'Search',\n  queryFormat: 'or',\n  showClear: false,\n  showFilter: true,\n  showIcon: true,\n  style: {},\n  URLParams: false,\n  strictSelection: false,\n  searchOperators: false,\n  showVoiceSearch: false,\n  showDistinctSuggestions: true,\n  size: 10,\n  defaultPopularSuggestions: [],\n  recentSearches: [],\n  time: 0,\n  enablePredictiveSuggestions: false\n}; // Add componentType for SSR\n\nCategorySearch.componentType = _constants.componentTypes.categorySearch;\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  return {\n    categories: state.aggregations[props.componentId] && state.aggregations[props.componentId][props.categoryField] && state.aggregations[props.componentId][props.categoryField].buckets || [],\n    rawData: state.rawData[props.componentId],\n    selectedValue: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value || null,\n    selectedCategory: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].category || null,\n    suggestions: state.hits[props.componentId] && state.hits[props.componentId].hits || [],\n    aggregationData: state.compositeAggregations[props.componentId] || [],\n    themePreset: state.config.themePreset,\n    isLoading: !!state.isLoading[props.componentId + '_active'],\n    error: state.error[props.componentId],\n    enableAppbase: state.config.enableAppbase,\n    promotedResults: state.promotedResults[props.componentId],\n    customData: state.customData[props.componentId],\n    time: state.hits[props.componentId] && state.hits[props.componentId].time,\n    total: state.hits[props.componentId] && state.hits[props.componentId].total,\n    hidden: state.hits[props.componentId] && state.hits[props.componentId].hidden,\n    defaultPopularSuggestions: state.defaultPopularSuggestions[props.componentId],\n    popularSuggestions: state.querySuggestions[props.componentId],\n    recentSearches: state.recentSearches.data\n  };\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n  return {\n    setCustomHighlightOptions: function setCustomHighlightOptions(component, options) {\n      return dispatch((0, _actions.setCustomHighlightOptions)(component, options));\n    },\n    setCustomQuery: function setCustomQuery(component, query) {\n      return dispatch((0, _actions.setCustomQuery)(component, query));\n    },\n    setDefaultQuery: function setDefaultQuery(component, query) {\n      return dispatch((0, _actions.setDefaultQuery)(component, query));\n    },\n    setSuggestionsSearchValue: function setSuggestionsSearchValue(value) {\n      return dispatch((0, _actions.setSuggestionsSearchValue)(value));\n    },\n    setQueryOptions: function setQueryOptions(component, props, execute) {\n      return dispatch((0, _actions.setQueryOptions)(component, props, execute));\n    },\n    updateQuery: function updateQuery(updateQueryObject) {\n      return dispatch((0, _actions.updateQuery)(updateQueryObject));\n    },\n    triggerAnalytics: function triggerAnalytics(searchPosition, documentId) {\n      return dispatch((0, _actions.recordSuggestionClick)(searchPosition, documentId));\n    },\n    fetchPopularSuggestions: function fetchPopularSuggestions(component) {\n      return dispatch((0, _actions.loadPopularSuggestions)(component));\n    },\n    fetchRecentSearches: function fetchRecentSearches(queryOptions) {\n      return dispatch((0, _actions.getRecentSearches)(queryOptions));\n    }\n  };\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)((0, _emotionTheming.withTheme)(function (props) {\n  return (0, _core.jsx)(_ComponentWrapper2.default, _extends({}, props, {\n    internalComponent: true,\n    componentType: _constants.componentTypes.categorySearch\n  }), function () {\n    return (0, _core.jsx)(CategorySearch, _extends({\n      ref: props.myForwardedRef\n    }, props));\n  });\n})); // eslint-disable-next-line\n\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n  return (0, _core.jsx)(ConnectedComponent, _extends({}, props, {\n    myForwardedRef: ref\n  }));\n});\n\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, CategorySearch);\nForwardRefComponent.displayName = 'CategorySearch';\nexports.default = ForwardRefComponent;","map":{"version":3,"sources":["C:/Users/hiro/react_project/react_search/react_search/frontend/node_modules/@appbaseio/reactivesearch/lib/components/search/CategorySearch.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","_core","require","_react","_react2","_interopRequireDefault","_downshift","_downshift2","_emotionTheming","_hoistNonReactStatics","_hoistNonReactStatics2","_actions","_helper","_constants","_transform","_types","_types2","_causes","_causes2","_Title","_Title2","_Input","_Input2","_CancelSvg","_CancelSvg2","_SearchSvg","_SearchSvg2","_Container","_Container2","_Mic","_Mic2","_CustomSvg","_CustomSvg2","_utils","_SuggestionItem","_SuggestionItem2","_SuggestionWrapper","_SuggestionWrapper2","_ComponentWrapper","_ComponentWrapper2","_IconWrapper","_IconWrapper2","_IconGroup","_IconGroup2","obj","default","_objectWithoutProperties","keys","indexOf","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","setPrototypeOf","__proto__","Text","withTheme","jsx","className","style","color","primary","theme","colors","primaryColor","textColor","children","CategorySearch","_Component","_this","_initialiseProps","defaultValue","_value$term","term","currentValue","undefined","_value$category","category","currentCategory","selectedValue","selectedCategory","state","suggestions","isOpen","isPending","internalComponent","getInternalComponentID","componentId","queryOptions","getQueryOptions","updateCustomQuery","updateDefaultQuery","highlight","highlightQuery","customHighlight","setCustomHighlightOptions","size","setQueryOptions","aggsQuery","getCombinedAggsQuery","hasMounted","cause","calcValue","onChange","triggerQuery","setValue","componentDidUpdate","prevProps","_this2","checkSomePropChange","isQueryIdentical","updateQuery","Array","isArray","trim","onSuggestions","setState","isEqual","_props$value","_props$value$category","onValueSelected","CLEAR_VALUE","_props","_currentValue","componentDidMount","_props2","enableQuerySuggestions","renderQuerySuggestions","fetchPopularSuggestions","enableRecentSearches","fetchRecentSearches","aggregationField","distinctField","distinctFieldConfig","index","enableAppbase","console","warn","shouldMicRender","showVoiceSearch","window","webkitSpeechRecognition","SpeechRecognition","render","_this3","_props3","themePreset","recentSearchesIcon","popularSearchesIcon","finalSuggestionsList","parsedSuggestions","hasSuggestions","topSuggestions","defaultSuggestions","title","getClassName","innerClass","autosuggest","id","onSuggestionSelected","onStateChange","handleStateChange","itemToString","_ref","getRootProps","getInputProps","getItemProps","highlightedIndex","setHighlightedIndex","rest","css","suggestionsContainer","suppressRefError","ref","c","_inputRef","showClear","showIcon","iconPosition","placeholder","onInputChange","onBlur","withTriggerQuery","onFocus","handleFocus","onKeyPress","onKeyDown","e","handleKeyDown","onKeyUp","onClick","renderIcons","renderLoader","renderError","hasCustomRenderer","getComponent","slice","map","item","backgroundColor","getBackgroundColor","suggestion","sugg","justifyContent","padding","_recent_search","iconId","label","icon","type","_popular_suggestion","hasPopularSuggestionsRenderer","renderNoSuggestion","downShiftProps","autoFocus","get","getResultStats","categories","filter","Boolean","suggestionsList","filteredCategories","categorySuggestions","concat","withClickIds","_props4","enablePopularSuggestions","normalizedPopularSuggestions","recentSearches","_props5","popularSuggestions","showDistinctSuggestions","defaultPopularSuggestions","getTopSuggestions","_props6","isPopularSuggestionsEnabled","customDefaultPopularSuggestions","customNormalizedRecentSearches","normalizedRecentSearches","search","Component","fields","highlightField","dataField","forEach","pre_tags","post_tags","require_field_match","defaultQuery","finalQuery","queryString","query_string","shouldQuery","searchOperators","simple_query_string","bool","should","minimum_should_match","_term","categoryField","nestedField","nested","path","query","dataFields","phrasePrefixFields","field","queryField","fieldWeights","endsWith","push","default_operator","queryFormat","multi_match","operator","fuzziness","_this4","getAggsQuery","_aggs","aggs","terms","_props7","compositeAggsQuery","getCompositeAggsQuery","showTopHits","searchResults","handleOnSuggestions","isDefaultValue","toggleIsOpen","performUpdate","_props8","strictSelection","SUGGESTION_SELECT","handleTextChange","onValueChange","checkValueChange","beforeValueChange","debounce","defaultQueryOptions","defaultQueryTobeSet","getOptionsFromQuery","setSuggestionsSearchValue","componentType","componentTypes","categorySearch","customQuery","filterLabel","showFilter","URLParams","customQueryOptions","customQueryTobeSet","event","clearValue","_props9","ENTER_PRESS","inputValue","_props10","handleCaretPosition","_value$category2","_props11","triggerClickAnalytics","_click_id","changes","stateChangeTypes","mouseUp","isDark","handleSearchIconClick","SEARCH_ICON_CLICK","handleVoiceResults","_ref2","results","isFinal","transcript","renderIcon","renderCancelIcon","clearIcon","_props12","renderMic","getMicInstance","groupPosition","positionType","isClearIcon","getInstance","onResult","_props13","isLoading","error","_state","innerClassName","_props14","loader","_props15","isFunction","downshiftProps","isQuerySuggestionsRender","_props16","aggregationData","promotedResults","customData","rawData","data","loading","promotedData","rawSuggestions","rawCategories","resultStats","stats","querySuggestions","getPopularSuggestionsComponent","searchPosition","documentId","docId","hitData","find","hit","_id","triggerAnalytics","func","propTypes","funcRequired","options","hits","setCustomQuery","setDefaultQuery","time","number","any","enableSynonyms","string","componentObject","stringRequired","dataFieldValidator","aggregationSize","categorySearchValue","excludeFields","stringOrArray","includeFields","onError","onQueryChange","queryFormatSearch","react","renderPopularSuggestions","parseSuggestion","enablePredictiveSuggestions","defaultProps","mapStateToProps","aggregations","buckets","selectedValues","compositeAggregations","config","total","hidden","mapDispatchtoProps","dispatch","component","execute","updateQueryObject","recordSuggestionClick","loadPopularSuggestions","getRecentSearches","ConnectedComponent","connect","myForwardedRef","ForwardRefComponent","forwardRef","displayName"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _core = require('@emotion/core');\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _downshift = require('downshift');\n\nvar _downshift2 = _interopRequireDefault(_downshift);\n\nvar _emotionTheming = require('emotion-theming');\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _transform = require('@appbaseio/reactivecore/lib/utils/transform');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _causes = require('@appbaseio/reactivecore/lib/utils/causes');\n\nvar _causes2 = _interopRequireDefault(_causes);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Input = require('../../styles/Input');\n\nvar _Input2 = _interopRequireDefault(_Input);\n\nvar _CancelSvg = require('../shared/CancelSvg');\n\nvar _CancelSvg2 = _interopRequireDefault(_CancelSvg);\n\nvar _SearchSvg = require('../shared/SearchSvg');\n\nvar _SearchSvg2 = _interopRequireDefault(_SearchSvg);\n\nvar _Container = require('../../styles/Container');\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nvar _Mic = require('./addons/Mic');\n\nvar _Mic2 = _interopRequireDefault(_Mic);\n\nvar _CustomSvg = require('../shared/CustomSvg');\n\nvar _CustomSvg2 = _interopRequireDefault(_CustomSvg);\n\nvar _utils = require('../../utils');\n\nvar _SuggestionItem = require('./addons/SuggestionItem');\n\nvar _SuggestionItem2 = _interopRequireDefault(_SuggestionItem);\n\nvar _SuggestionWrapper = require('./addons/SuggestionWrapper');\n\nvar _SuggestionWrapper2 = _interopRequireDefault(_SuggestionWrapper);\n\nvar _ComponentWrapper = require('../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nvar _IconWrapper = require('../../styles/IconWrapper');\n\nvar _IconWrapper2 = _interopRequireDefault(_IconWrapper);\n\nvar _IconGroup = require('../../styles/IconGroup');\n\nvar _IconGroup2 = _interopRequireDefault(_IconGroup);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /** @jsx jsx */\n\n\nvar Text = (0, _emotionTheming.withTheme)(function (props) {\n\treturn (0, _core.jsx)(\n\t\t'span',\n\t\t{\n\t\t\tclassName: 'trim',\n\t\t\tstyle: {\n\t\t\t\tcolor: props.primary ? props.theme.colors.primaryColor : props.theme.colors.textColor\n\t\t\t}\n\t\t},\n\t\tprops.children\n\t);\n});\n\nvar CategorySearch = function (_Component) {\n\t_inherits(CategorySearch, _Component);\n\n\tfunction CategorySearch(props) {\n\t\t_classCallCheck(this, CategorySearch);\n\n\t\tvar _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n\t\t_initialiseProps.call(_this);\n\n\t\tvar value = props.value || props.defaultValue || {};\n\t\t// eslint-disable-next-line\n\t\tvar _value$term = value.term,\n\t\t    currentValue = _value$term === undefined ? '' : _value$term,\n\t\t    _value$category = value.category,\n\t\t    currentCategory = _value$category === undefined ? null : _value$category;\n\t\t// add preference to selected-X value from URL/SSR\n\n\t\tcurrentValue = props.selectedValue || currentValue;\n\t\tcurrentCategory = props.selectedCategory || currentCategory;\n\n\t\t_this.state = {\n\t\t\tcurrentValue: currentValue,\n\t\t\tcurrentCategory: currentCategory,\n\t\t\tsuggestions: [],\n\t\t\tisOpen: false\n\t\t};\n\t\t/**\n   * To regulate the query execution based on the input handler,\n   * the component query will only get executed when it sets to `true`.\n   * */\n\t\t_this.isPending = false;\n\n\t\t_this.internalComponent = (0, _transform.getInternalComponentID)(props.componentId);\n\t\t_this.queryOptions = (0, _helper.getQueryOptions)(props);\n\t\t// Set custom and default queries in store\n\t\t(0, _helper.updateCustomQuery)(props.componentId, props, currentValue);\n\t\t(0, _helper.updateDefaultQuery)(props.componentId, props, currentValue);\n\n\t\tif (props.highlight) {\n\t\t\tvar queryOptions = CategorySearch.highlightQuery(props) || {};\n\t\t\tif (props.customHighlight && typeof props.customHighlight === 'function') {\n\t\t\t\tprops.setCustomHighlightOptions(props.componentId, props.customHighlight(props));\n\t\t\t}\n\t\t\tqueryOptions.size = props.size;\n\t\t\t_this.queryOptions = queryOptions;\n\t\t\tprops.setQueryOptions(props.componentId, queryOptions);\n\t\t} else {\n\t\t\tprops.setQueryOptions(props.componentId, _this.queryOptions);\n\t\t}\n\n\t\tvar aggsQuery = _this.getCombinedAggsQuery();\n\t\tprops.setQueryOptions(_this.internalComponent, aggsQuery, false);\n\t\tvar hasMounted = false;\n\t\tvar cause = null;\n\n\t\tif (currentValue) {\n\t\t\tvar calcValue = {\n\t\t\t\tterm: currentValue,\n\t\t\t\tcategory: currentCategory\n\t\t\t};\n\t\t\tif (props.onChange) {\n\t\t\t\tprops.onChange(calcValue, function () {\n\t\t\t\t\treturn _this.triggerQuery(calcValue);\n\t\t\t\t});\n\t\t\t}\n\t\t\t_this.setValue(currentValue, true, props, currentCategory, cause, hasMounted);\n\t\t}\n\t\treturn _this;\n\t}\n\n\tCategorySearch.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n\t\tvar _this2 = this;\n\n\t\t(0, _helper.checkSomePropChange)(this.props, prevProps, ['highlight', 'dataField', 'highlightField'], function () {\n\t\t\tvar queryOptions = CategorySearch.highlightQuery(_this2.props) || {};\n\t\t\tif (_this2.props.customHighlight && typeof _this2.props.customHighlight === 'function') {\n\t\t\t\t_this2.props.setCustomHighlightOptions(_this2.props.componentId, _this2.props.customHighlight(_this2.props));\n\t\t\t}\n\t\t\tqueryOptions.size = _this2.props.size;\n\t\t\t_this2.queryOptions = queryOptions;\n\t\t\t_this2.props.setQueryOptions(_this2.props.componentId, queryOptions);\n\t\t});\n\n\t\t// Treat defaultQuery and customQuery as reactive props\n\t\tif (!(0, _utils.isQueryIdentical)(this.state.currentValue, this.props, prevProps, 'defaultQuery')) {\n\t\t\tthis.updateDefaultQuery(this.state.currentValue, this.props);\n\t\t\tthis.updateQuery(this.state.currentValue, this.props);\n\t\t}\n\n\t\tif (!(0, _utils.isQueryIdentical)(this.state.currentValue, this.props, prevProps, 'customQuery')) {\n\t\t\tthis.updateQuery(this.state.currentValue, this.props);\n\t\t}\n\n\t\tif (Array.isArray(this.props.suggestions) && this.state.currentValue.trim().length) {\n\t\t\t// shallow check allows us to set suggestions even if the next set\n\t\t\t// of suggestions are same as the current one\n\n\t\t\tif (this.props.suggestions !== prevProps.suggestions) {\n\t\t\t\tif (this.props.onSuggestions) {\n\t\t\t\t\tthis.props.onSuggestions(this.props.suggestions);\n\t\t\t\t}\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\tthis.setState({\n\t\t\t\t\tsuggestions: this.onSuggestions(this.props.suggestions)\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t(0, _helper.checkSomePropChange)(this.props, prevProps, ['fieldWeights', 'fuzziness', 'queryFormat', 'dataField', 'categoryField', 'nestedField', 'searchOperators'], function () {\n\t\t\t_this2.updateQuery(_this2.state.currentValue, _this2.props);\n\t\t});\n\n\t\tif (!(0, _helper.isEqual)(this.props.value, prevProps.value)) {\n\t\t\tvar _props$value = this.props.value,\n\t\t\t    currentValue = _props$value.term,\n\t\t\t    _props$value$category = _props$value.category,\n\t\t\t    currentCategory = _props$value$category === undefined ? null : _props$value$category;\n\n\t\t\tthis.setValue(currentValue, true, this.props, currentCategory, undefined, undefined, false);\n\t\t} else if (\n\t\t// since, selectedValue will be updated when currentValue changes,\n\t\t// we must only check for the changes introduced by\n\t\t// clear action from SelectedFilters component in which case,\n\t\t// the currentValue will never match the updated selectedValue\n\t\tthis.props.selectedValue !== prevProps.selectedValue && this.state.currentValue !== this.props.selectedValue) {\n\t\t\tif (!this.props.selectedValue && this.state.currentValue) {\n\t\t\t\t// selected value is cleared, call onValueSelected\n\t\t\t\tthis.onValueSelected('', _causes2.default.CLEAR_VALUE, null);\n\t\t\t}\n\t\t\tvar _props = this.props,\n\t\t\t    value = _props.value,\n\t\t\t    onChange = _props.onChange;\n\n\t\t\tif (value === undefined) {\n\t\t\t\tthis.setValue(this.props.selectedValue || '', true, this.props, this.props.selectedCategory);\n\t\t\t} else if (onChange) {\n\t\t\t\tvar _currentValue = {\n\t\t\t\t\tterm: this.props.selectedValue || '',\n\t\t\t\t\tcategory: this.props.selectedCategory || null\n\t\t\t\t};\n\t\t\t\t// value prop exists\n\t\t\t\tonChange(_currentValue, function () {\n\t\t\t\t\treturn _this2.triggerQuery(_currentValue);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// value prop exists and onChange is not defined:\n\t\t\t\t// we need to put the current value back into the store\n\t\t\t\t// if the clear action was triggered by interacting with\n\t\t\t\t// selected-filters component\n\t\t\t\tthis.isPending = false;\n\t\t\t\tthis.setValue(this.state.currentValue, true, this.props, this.state.currentCategory);\n\t\t\t}\n\t\t}\n\t};\n\n\tCategorySearch.prototype.componentDidMount = function componentDidMount() {\n\t\tvar _props2 = this.props,\n\t\t    enableQuerySuggestions = _props2.enableQuerySuggestions,\n\t\t    renderQuerySuggestions = _props2.renderQuerySuggestions,\n\t\t    fetchPopularSuggestions = _props2.fetchPopularSuggestions,\n\t\t    enableRecentSearches = _props2.enableRecentSearches,\n\t\t    fetchRecentSearches = _props2.fetchRecentSearches,\n\t\t    componentId = _props2.componentId,\n\t\t    aggregationField = _props2.aggregationField,\n\t\t    distinctField = _props2.distinctField,\n\t\t    distinctFieldConfig = _props2.distinctFieldConfig,\n\t\t    index = _props2.index,\n\t\t    enableAppbase = _props2.enableAppbase;\n\n\t\t// TODO: Remove in 4.0\n\n\t\tif (enableQuerySuggestions !== undefined) {\n\t\t\tconsole.warn('Warning(ReactiveSearch): The `enableQuerySuggestions` prop has been marked as deprecated, please use the `enablePopularSuggestions` prop instead.');\n\t\t}\n\t\t// TODO: Remove in 4.0\n\t\tif (renderQuerySuggestions !== undefined) {\n\t\t\tconsole.warn('Warning(ReactiveSearch): The `renderQuerySuggestions` prop has been marked as deprecated, please use the `renderPopularSuggestions` prop instead.');\n\t\t}\n\t\tif (enableAppbase && aggregationField) {\n\t\t\tconsole.warn('Warning(ReactiveSearch): The `aggregationField` prop has been marked as deprecated, please use the `distinctField` prop instead.');\n\t\t}\n\t\tif (!enableAppbase && (distinctField || distinctFieldConfig)) {\n\t\t\tconsole.warn('Warning(ReactiveSearch): In order to use the `distinctField` and `distinctFieldConfig` props, the `enableAppbase` prop must be set to true in `ReactiveBase`.');\n\t\t}\n\t\tif (!enableAppbase && index) {\n\t\t\tconsole.warn('Warning(ReactiveSearch): In order to use the `index` prop, the `enableAppbase` prop must be set to true in `ReactiveBase`.');\n\t\t}\n\t\tif (enableRecentSearches) {\n\t\t\tfetchRecentSearches();\n\t\t}\n\t\tfetchPopularSuggestions(componentId);\n\t};\n\n\tCategorySearch.prototype.shouldMicRender = function shouldMicRender(showVoiceSearch) {\n\t\t// checks for SSR\n\t\tif (typeof window === 'undefined') return false;\n\t\treturn showVoiceSearch && (window.webkitSpeechRecognition || window.SpeechRecognition);\n\t};\n\n\tCategorySearch.prototype.render = function render() {\n\t\tvar _this3 = this;\n\n\t\tvar currentValue = this.state.currentValue;\n\t\tvar _props3 = this.props,\n\t\t    theme = _props3.theme,\n\t\t    themePreset = _props3.themePreset,\n\t\t    size = _props3.size,\n\t\t    recentSearchesIcon = _props3.recentSearchesIcon,\n\t\t    popularSearchesIcon = _props3.popularSearchesIcon;\n\n\t\tvar finalSuggestionsList = this.parsedSuggestions;\n\t\tvar hasSuggestions = currentValue ? finalSuggestionsList.length || this.topSuggestions.length : this.defaultSuggestions.length;\n\t\treturn (0, _core.jsx)(\n\t\t\t_Container2.default,\n\t\t\t{ style: this.props.style, className: this.props.className },\n\t\t\tthis.props.title && (0, _core.jsx)(\n\t\t\t\t_Title2.default,\n\t\t\t\t{ className: (0, _helper.getClassName)(this.props.innerClass, 'title') || null },\n\t\t\t\tthis.props.title\n\t\t\t),\n\t\t\tthis.props.defaultSuggestions || this.props.autosuggest ? (0, _core.jsx)(_downshift2.default, _extends({\n\t\t\t\tid: this.props.componentId + '-downshift',\n\t\t\t\tonChange: this.onSuggestionSelected,\n\t\t\t\tonStateChange: this.handleStateChange,\n\t\t\t\tisOpen: this.state.isOpen,\n\t\t\t\titemToString: function itemToString(i) {\n\t\t\t\t\treturn i;\n\t\t\t\t},\n\t\t\t\trender: function render(_ref) {\n\t\t\t\t\tvar getRootProps = _ref.getRootProps,\n\t\t\t\t\t    getInputProps = _ref.getInputProps,\n\t\t\t\t\t    getItemProps = _ref.getItemProps,\n\t\t\t\t\t    isOpen = _ref.isOpen,\n\t\t\t\t\t    highlightedIndex = _ref.highlightedIndex,\n\t\t\t\t\t    setHighlightedIndex = _ref.setHighlightedIndex,\n\t\t\t\t\t    rest = _objectWithoutProperties(_ref, ['getRootProps', 'getInputProps', 'getItemProps', 'isOpen', 'highlightedIndex', 'setHighlightedIndex']);\n\n\t\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t\t'div',\n\t\t\t\t\t\tgetRootProps({ css: _Input.suggestionsContainer }, { suppressRefError: true }),\n\t\t\t\t\t\t(0, _core.jsx)(_Input2.default, _extends({\n\t\t\t\t\t\t\tref: function ref(c) {\n\t\t\t\t\t\t\t\t_this3._inputRef = c;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'aria-label': _this3.props.componentId,\n\t\t\t\t\t\t\tshowClear: _this3.props.showClear,\n\t\t\t\t\t\t\tid: _this3.props.componentId + '-input',\n\t\t\t\t\t\t\tshowIcon: _this3.props.showIcon,\n\t\t\t\t\t\t\tshowVoiceSearch: _this3.props.showVoiceSearch,\n\t\t\t\t\t\t\ticonPosition: _this3.props.iconPosition\n\t\t\t\t\t\t}, getInputProps({\n\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(_this3.props.innerClass, 'input'),\n\t\t\t\t\t\t\tplaceholder: _this3.props.placeholder,\n\t\t\t\t\t\t\tvalue: _this3.state.currentValue === null ? '' : _this3.state.currentValue,\n\t\t\t\t\t\t\tonChange: _this3.onInputChange,\n\t\t\t\t\t\t\tonBlur: _this3.withTriggerQuery(_this3.props.onBlur),\n\t\t\t\t\t\t\tonFocus: _this3.handleFocus,\n\t\t\t\t\t\t\tonKeyPress: _this3.withTriggerQuery(_this3.props.onKeyPress),\n\t\t\t\t\t\t\tonKeyDown: function onKeyDown(e) {\n\t\t\t\t\t\t\t\treturn _this3.handleKeyDown(e, highlightedIndex);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonKeyUp: _this3.withTriggerQuery(_this3.props.onKeyUp),\n\t\t\t\t\t\t\tonClick: function onClick() {\n\t\t\t\t\t\t\t\t// clear highlighted index\n\t\t\t\t\t\t\t\tsetHighlightedIndex(null);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}), {\n\t\t\t\t\t\t\tthemePreset: themePreset\n\t\t\t\t\t\t})),\n\t\t\t\t\t\t_this3.renderIcons(),\n\t\t\t\t\t\tisOpen && _this3.renderLoader(),\n\t\t\t\t\t\tisOpen && _this3.renderError(),\n\t\t\t\t\t\t_this3.hasCustomRenderer && _this3.getComponent(_extends({\n\t\t\t\t\t\t\tgetInputProps: getInputProps,\n\t\t\t\t\t\t\tgetItemProps: getItemProps,\n\t\t\t\t\t\t\tisOpen: isOpen,\n\t\t\t\t\t\t\thighlightedIndex: highlightedIndex,\n\t\t\t\t\t\t\tsetHighlightedIndex: setHighlightedIndex\n\t\t\t\t\t\t}, rest)),\n\t\t\t\t\t\t!_this3.hasCustomRenderer && isOpen && hasSuggestions ? (0, _core.jsx)(\n\t\t\t\t\t\t\t'ul',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcss: (0, _Input.suggestions)(themePreset, theme),\n\t\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(_this3.props.innerClass, 'list')\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfinalSuggestionsList.slice(0, size).map(function (item, index) {\n\t\t\t\t\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t'li',\n\t\t\t\t\t\t\t\t\t_extends({}, getItemProps({ item: item }), {\n\t\t\t\t\t\t\t\t\t\tkey: index + 1 + '-' + item.value // eslint-disable-line\n\t\t\t\t\t\t\t\t\t\t, style: {\n\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: _this3.getBackgroundColor(highlightedIndex, index)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\tText,\n\t\t\t\t\t\t\t\t\t\t{ primary: !!item.category },\n\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(_SuggestionItem2.default, {\n\t\t\t\t\t\t\t\t\t\t\tcurrentValue: currentValue,\n\t\t\t\t\t\t\t\t\t\t\tsuggestion: item\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t_this3.defaultSuggestions.map(function (sugg, index) {\n\t\t\t\t\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t'li',\n\t\t\t\t\t\t\t\t\t_extends({}, getItemProps({ item: sugg }), {\n\t\t\t\t\t\t\t\t\t\tkey: index + 1 + '-' + sugg.value,\n\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: _this3.getBackgroundColor(highlightedIndex, index),\n\t\t\t\t\t\t\t\t\t\t\tjustifyContent: 'flex-start'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t'div',\n\t\t\t\t\t\t\t\t\t\t{ style: { padding: '0 10px 0 0' } },\n\t\t\t\t\t\t\t\t\t\tsugg.source && sugg.source._recent_search && (0, _core.jsx)(_CustomSvg2.default, {\n\t\t\t\t\t\t\t\t\t\t\ticonId: sugg.label + '-icon',\n\t\t\t\t\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(_this3.props.innerClass, 'recent-search-icon') || null,\n\t\t\t\t\t\t\t\t\t\t\ticon: recentSearchesIcon,\n\t\t\t\t\t\t\t\t\t\t\ttype: 'recent-search-icon'\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\tsugg.source && sugg.source._popular_suggestion && (0, _core.jsx)(_CustomSvg2.default, {\n\t\t\t\t\t\t\t\t\t\t\ticonId: sugg.label + '-icon',\n\t\t\t\t\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(_this3.props.innerClass, 'popular-search-icon') || null,\n\t\t\t\t\t\t\t\t\t\t\ticon: popularSearchesIcon,\n\t\t\t\t\t\t\t\t\t\t\ttype: 'popular-search-icon'\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t(0, _core.jsx)(_SuggestionItem2.default, {\n\t\t\t\t\t\t\t\t\t\tcurrentValue: currentValue,\n\t\t\t\t\t\t\t\t\t\tsuggestion: sugg\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t(0, _utils.hasPopularSuggestionsRenderer)(_this3.props) ? _this3.getComponent(_extends({\n\t\t\t\t\t\t\t\tgetInputProps: getInputProps,\n\t\t\t\t\t\t\t\tgetItemProps: getItemProps,\n\t\t\t\t\t\t\t\tisOpen: isOpen,\n\t\t\t\t\t\t\t\thighlightedIndex: highlightedIndex\n\t\t\t\t\t\t\t}, rest), true) : _this3.topSuggestions.map(function (sugg, index) {\n\t\t\t\t\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t'li',\n\t\t\t\t\t\t\t\t\t_extends({}, getItemProps({ item: sugg }), {\n\t\t\t\t\t\t\t\t\t\tkey: finalSuggestionsList.length + index + 1 + '-' + sugg.value,\n\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: _this3.getBackgroundColor(highlightedIndex, finalSuggestionsList.length + index),\n\t\t\t\t\t\t\t\t\t\t\tjustifyContent: 'flex-start'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t'div',\n\t\t\t\t\t\t\t\t\t\t{ style: { padding: '0 10px 0 0' } },\n\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(_CustomSvg2.default, {\n\t\t\t\t\t\t\t\t\t\t\ticonId: sugg.label + '-icon',\n\t\t\t\t\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(_this3.props.innerClass, 'popular-search-icon') || null,\n\t\t\t\t\t\t\t\t\t\t\ticon: popularSearchesIcon,\n\t\t\t\t\t\t\t\t\t\t\ttype: 'popular-search-icon'\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t(0, _core.jsx)(_SuggestionItem2.default, {\n\t\t\t\t\t\t\t\t\t\tcurrentValue: currentValue,\n\t\t\t\t\t\t\t\t\t\tsuggestion: sugg\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t) : _this3.renderNoSuggestion(finalSuggestionsList)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}, this.props.downShiftProps)) : (0, _core.jsx)(\n\t\t\t\t'div',\n\t\t\t\t{ css: _Input.suggestionsContainer },\n\t\t\t\t(0, _core.jsx)(_Input2.default, {\n\t\t\t\t\tref: function ref(c) {\n\t\t\t\t\t\t_this3._inputRef = c;\n\t\t\t\t\t},\n\t\t\t\t\t'aria-label': this.props.componentId,\n\t\t\t\t\tclassName: (0, _helper.getClassName)(this.props.innerClass, 'input'),\n\t\t\t\t\tplaceholder: this.props.placeholder,\n\t\t\t\t\tvalue: this.state.currentValue ? this.state.currentValue : '',\n\t\t\t\t\tonChange: this.onInputChange,\n\t\t\t\t\tonBlur: this.withTriggerQuery(this.props.onBlur),\n\t\t\t\t\tonFocus: this.withTriggerQuery(this.props.onFocus),\n\t\t\t\t\tonKeyPress: this.withTriggerQuery(this.props.onKeyPress),\n\t\t\t\t\tonKeyDown: this.withTriggerQuery(this.props.onKeyDown),\n\t\t\t\t\tonKeyUp: this.withTriggerQuery(this.props.onKeyUp),\n\t\t\t\t\tautoFocus: this.props.autoFocus,\n\t\t\t\t\ticonPosition: this.props.iconPosition,\n\t\t\t\t\tshowClear: this.props.showClear,\n\t\t\t\t\tshowIcon: this.props.showIcon,\n\t\t\t\t\tshowVoiceSearch: this.props.showVoiceSearch,\n\t\t\t\t\tthemePreset: themePreset\n\t\t\t\t}),\n\t\t\t\tthis.renderIcons()\n\t\t\t)\n\t\t);\n\t};\n\n\t_createClass(CategorySearch, [{\n\t\tkey: 'stats',\n\t\tget: function get() {\n\t\t\treturn (0, _helper.getResultStats)(this.props);\n\t\t}\n\t}, {\n\t\tkey: 'hasCustomRenderer',\n\t\tget: function get() {\n\t\t\treturn (0, _utils.hasCustomRenderer)(this.props);\n\t\t}\n\t}, {\n\t\tkey: 'filteredCategories',\n\t\tget: function get() {\n\t\t\tvar categories = this.props.categories;\n\n\t\t\treturn categories.filter(function (category) {\n\t\t\t\treturn Boolean(category.key);\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'parsedSuggestions',\n\t\tget: function get() {\n\t\t\tvar finalSuggestionsList = [];\n\t\t\tvar suggestionsList = [];\n\n\t\t\t// filter out empty categories\n\t\t\tvar filteredCategories = this.filteredCategories;\n\n\t\t\tif (!this.state.currentValue && this.props.defaultSuggestions && this.props.defaultSuggestions.length) {\n\t\t\t\tfinalSuggestionsList = this.props.defaultSuggestions;\n\t\t\t} else if (this.state.currentValue) {\n\t\t\t\tsuggestionsList = this.state.suggestions;\n\t\t\t}\n\n\t\t\tif (this.state.currentValue && this.state.suggestions.length && filteredCategories.length) {\n\t\t\t\tvar categorySuggestions = [{\n\t\t\t\t\tlabel: this.state.currentValue + ' in all categories',\n\t\t\t\t\tvalue: this.state.currentValue,\n\t\t\t\t\tcategory: '*',\n\t\t\t\t\t// no source object exists for category based suggestions\n\t\t\t\t\tsource: null\n\t\t\t\t}, {\n\t\t\t\t\tlabel: this.state.currentValue + ' in ' + filteredCategories[0].key,\n\t\t\t\t\tvalue: this.state.currentValue,\n\t\t\t\t\tcategory: filteredCategories[0].key,\n\t\t\t\t\tsource: null\n\t\t\t\t}];\n\n\t\t\t\tif (filteredCategories.length > 1) {\n\t\t\t\t\tcategorySuggestions = [].concat(categorySuggestions, [{\n\t\t\t\t\t\tlabel: this.state.currentValue + ' in ' + filteredCategories[1].key,\n\t\t\t\t\t\tvalue: this.state.currentValue,\n\t\t\t\t\t\tcategory: filteredCategories[1].key,\n\t\t\t\t\t\tsource: null\n\t\t\t\t\t}]);\n\t\t\t\t}\n\t\t\t\tfinalSuggestionsList = [].concat(categorySuggestions, suggestionsList);\n\t\t\t}\n\t\t\treturn (0, _helper.withClickIds)(finalSuggestionsList);\n\t\t}\n\t}, {\n\t\tkey: 'topSuggestions',\n\t\tget: function get() {\n\t\t\tvar _props4 = this.props,\n\t\t\t    enableQuerySuggestions = _props4.enableQuerySuggestions,\n\t\t\t    enablePopularSuggestions = _props4.enablePopularSuggestions;\n\t\t\tvar currentValue = this.state.currentValue;\n\n\t\t\tif (!currentValue) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\treturn enableQuerySuggestions || enablePopularSuggestions ? this.normalizedPopularSuggestions : [];\n\t\t}\n\t}, {\n\t\tkey: 'normalizedRecentSearches',\n\t\tget: function get() {\n\t\t\tvar recentSearches = this.props.recentSearches;\n\n\t\t\treturn recentSearches;\n\t\t}\n\t}, {\n\t\tkey: 'normalizedPopularSuggestions',\n\t\tget: function get() {\n\t\t\tvar _props5 = this.props,\n\t\t\t    popularSuggestions = _props5.popularSuggestions,\n\t\t\t    showDistinctSuggestions = _props5.showDistinctSuggestions,\n\t\t\t    defaultPopularSuggestions = _props5.defaultPopularSuggestions;\n\t\t\tvar currentValue = this.state.currentValue;\n\n\t\t\treturn (0, _helper.getTopSuggestions)(\n\t\t\t// use default popular suggestions if value is empty\n\t\t\tcurrentValue ? popularSuggestions : defaultPopularSuggestions, currentValue, showDistinctSuggestions);\n\t\t}\n\t}, {\n\t\tkey: 'defaultSuggestions',\n\t\tget: function get() {\n\t\t\tvar _props6 = this.props,\n\t\t\t    enableQuerySuggestions = _props6.enableQuerySuggestions,\n\t\t\t    enablePopularSuggestions = _props6.enablePopularSuggestions,\n\t\t\t    showDistinctSuggestions = _props6.showDistinctSuggestions,\n\t\t\t    defaultPopularSuggestions = _props6.defaultPopularSuggestions;\n\n\t\t\tvar isPopularSuggestionsEnabled = enableQuerySuggestions || enablePopularSuggestions;\n\t\t\tvar currentValue = this.state.currentValue;\n\n\t\t\tif (currentValue) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\tvar customDefaultPopularSuggestions = defaultPopularSuggestions.map(function (suggestion) {\n\t\t\t\treturn _extends({}, suggestion, {\n\t\t\t\t\t_popular_suggestion: true\n\t\t\t\t});\n\t\t\t});\n\t\t\tvar customNormalizedRecentSearches = this.normalizedRecentSearches.map(function (search) {\n\t\t\t\treturn _extends({}, search, {\n\t\t\t\t\t_recent_search: true\n\t\t\t\t});\n\t\t\t});\n\t\t\tvar defaultSuggestions = isPopularSuggestionsEnabled ? [].concat(customNormalizedRecentSearches, customDefaultPopularSuggestions) : customNormalizedRecentSearches;\n\t\t\treturn (0, _helper.getTopSuggestions)(\n\t\t\t// use default popular suggestions if value is empty\n\t\t\tdefaultSuggestions, currentValue, showDistinctSuggestions);\n\t\t}\n\t}]);\n\n\treturn CategorySearch;\n}(_react.Component);\n\nCategorySearch.highlightQuery = function (props) {\n\tif (props.customHighlight) {\n\t\treturn props.customHighlight(props);\n\t}\n\tif (!props.highlight) {\n\t\treturn null;\n\t}\n\tvar fields = {};\n\tvar highlightField = props.highlightField ? props.highlightField : props.dataField;\n\n\tif (typeof highlightField === 'string') {\n\t\tfields[highlightField] = {};\n\t} else if (Array.isArray(highlightField)) {\n\t\thighlightField.forEach(function (item) {\n\t\t\tfields[item] = {};\n\t\t});\n\t}\n\n\treturn {\n\t\thighlight: _extends({\n\t\t\tpre_tags: ['<mark>'],\n\t\t\tpost_tags: ['</mark>'],\n\t\t\tfields: fields\n\t\t}, props.highlightField && { require_field_match: false })\n\t};\n};\n\nCategorySearch.defaultQuery = function (value, props, category) {\n\tvar finalQuery = null;\n\tvar fields = [];\n\n\tif (value) {\n\t\tif (Array.isArray(props.dataField)) {\n\t\t\tfields = props.dataField;\n\t\t} else if (props.dataField) {\n\t\t\tfields = [props.dataField];\n\t\t}\n\n\t\tif (props.queryString) {\n\t\t\tfinalQuery = {\n\t\t\t\tquery_string: CategorySearch.shouldQuery(value, fields, props)\n\t\t\t};\n\t\t} else if (props.searchOperators) {\n\t\t\tfinalQuery = {\n\t\t\t\tsimple_query_string: CategorySearch.shouldQuery(value, fields, props)\n\t\t\t};\n\t\t} else {\n\t\t\tfinalQuery = {\n\t\t\t\tbool: {\n\t\t\t\t\tshould: CategorySearch.shouldQuery(value, fields, props),\n\t\t\t\t\tminimum_should_match: '1'\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tif (category && category !== '*') {\n\t\t\tvar _term;\n\n\t\t\tfinalQuery = [finalQuery, {\n\t\t\t\tterm: (_term = {}, _term[props.categoryField] = category, _term)\n\t\t\t}];\n\t\t}\n\t}\n\n\tif (value === '') {\n\t\tfinalQuery = null;\n\t}\n\n\tif (finalQuery && props.nestedField) {\n\t\tfinalQuery = {\n\t\t\tnested: {\n\t\t\t\tpath: props.nestedField,\n\t\t\t\tquery: finalQuery\n\t\t\t}\n\t\t};\n\t}\n\n\treturn finalQuery;\n};\n\nCategorySearch.shouldQuery = function (value, dataFields, props) {\n\tvar finalQuery = [];\n\tvar phrasePrefixFields = [];\n\tvar fields = (dataFields || []).map(function (field, index) {\n\t\tvar queryField = '' + field + (Array.isArray(props.fieldWeights) && props.fieldWeights[index] ? '^' + props.fieldWeights[index] : '');\n\t\tif (!(field.endsWith('.keyword') || field.endsWith('.autosuggest') || field.endsWith('.search'))) {\n\t\t\tphrasePrefixFields.push(queryField);\n\t\t}\n\t\treturn queryField;\n\t});\n\tif (props.searchOperators || props.queryString) {\n\t\treturn {\n\t\t\tquery: value,\n\t\t\tfields: fields,\n\t\t\tdefault_operator: props.queryFormat\n\t\t};\n\t}\n\n\tif (props.queryFormat === 'and') {\n\t\tfinalQuery.push({\n\t\t\tmulti_match: {\n\t\t\t\tquery: value,\n\t\t\t\tfields: fields,\n\t\t\t\ttype: 'cross_fields',\n\t\t\t\toperator: 'and'\n\t\t\t}\n\t\t});\n\t\tfinalQuery.push({\n\t\t\tmulti_match: {\n\t\t\t\tquery: value,\n\t\t\t\tfields: fields,\n\t\t\t\ttype: 'phrase',\n\t\t\t\toperator: 'and'\n\t\t\t}\n\t\t});\n\t\tif (phrasePrefixFields.length > 0) {\n\t\t\tfinalQuery.push({\n\t\t\t\tmulti_match: {\n\t\t\t\t\tquery: value,\n\t\t\t\t\tfields: phrasePrefixFields,\n\t\t\t\t\ttype: 'phrase_prefix',\n\t\t\t\t\toperator: 'and'\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn finalQuery;\n\t}\n\n\tfinalQuery.push({\n\t\tmulti_match: {\n\t\t\tquery: value,\n\t\t\tfields: fields,\n\t\t\ttype: 'best_fields',\n\t\t\toperator: 'or',\n\t\t\tfuzziness: props.fuzziness ? props.fuzziness : 0\n\t\t}\n\t});\n\n\tfinalQuery.push({\n\t\tmulti_match: {\n\t\t\tquery: value,\n\t\t\tfields: fields,\n\t\t\ttype: 'phrase',\n\t\t\toperator: 'or'\n\t\t}\n\t});\n\n\tif (phrasePrefixFields.length > 0) {\n\t\tfinalQuery.push({\n\t\t\tmulti_match: {\n\t\t\t\tquery: value,\n\t\t\t\tfields: phrasePrefixFields,\n\t\t\t\ttype: 'phrase_prefix',\n\t\t\t\toperator: 'or'\n\t\t\t}\n\t\t});\n\t}\n\treturn finalQuery;\n};\n\nvar _initialiseProps = function _initialiseProps() {\n\tvar _this4 = this;\n\n\tthis.getAggsQuery = function (field) {\n\t\tvar _aggs;\n\n\t\treturn {\n\t\t\taggs: (_aggs = {}, _aggs[field] = {\n\t\t\t\tterms: {\n\t\t\t\t\tfield: field\n\t\t\t\t}\n\t\t\t}, _aggs)\n\t\t};\n\t};\n\n\tthis.getCombinedAggsQuery = function () {\n\t\tvar _props7 = _this4.props,\n\t\t    categoryField = _props7.categoryField,\n\t\t    aggregationField = _props7.aggregationField;\n\n\t\tvar aggsQuery = _this4.getAggsQuery(categoryField);\n\t\tif (aggregationField) {\n\t\t\tvar compositeAggsQuery = (0, _helper.getCompositeAggsQuery)({\n\t\t\t\tvalue: null,\n\t\t\t\tprops: _this4.props,\n\t\t\t\tshowTopHits: true\n\t\t\t});\n\t\t\taggsQuery.aggs = _extends({}, aggsQuery.aggs, compositeAggsQuery.aggs);\n\t\t}\n\t\treturn aggsQuery;\n\t};\n\n\tthis.onSuggestions = function (searchResults) {\n\t\treturn (0, _helper.handleOnSuggestions)(searchResults, _this4.state.currentValue, _this4.props);\n\t};\n\n\tthis.setValue = function (value) {\n\t\tvar isDefaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\t\tvar props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this4.props;\n\t\tvar category = arguments[3];\n\t\tvar cause = arguments[4];\n\t\tvar hasMounted = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;\n\t\tvar toggleIsOpen = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : true;\n\n\t\tvar performUpdate = function performUpdate() {\n\t\t\tif (hasMounted) {\n\t\t\t\tvar _props8 = _this4.props,\n\t\t\t\t    enableRecentSearches = _props8.enableRecentSearches,\n\t\t\t\t    fetchRecentSearches = _props8.fetchRecentSearches;\n\t\t\t\t// Refresh recent searches when value becomes empty\n\n\t\t\t\tif (!value && _this4.state.currentValue && enableRecentSearches) {\n\t\t\t\t\tfetchRecentSearches();\n\t\t\t\t}\n\t\t\t\t_this4.setState({\n\t\t\t\t\tcurrentValue: value || '',\n\t\t\t\t\tcurrentCategory: category || null\n\t\t\t\t}, function () {\n\t\t\t\t\tif (isDefaultValue) {\n\t\t\t\t\t\tif (_this4.props.autosuggest) {\n\t\t\t\t\t\t\tif (toggleIsOpen) {\n\t\t\t\t\t\t\t\t_this4.setState({\n\t\t\t\t\t\t\t\t\tisOpen: false\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t_this4.updateDefaultQuery(value, props);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// in case of strict selection only SUGGESTION_SELECT should be able\n\t\t\t\t\t\t// to set the query otherwise the value should reset\n\t\t\t\t\t\tif (props.strictSelection) {\n\t\t\t\t\t\t\tif (cause === _causes2.default.SUGGESTION_SELECT || value === '') {\n\t\t\t\t\t\t\t\t_this4.updateQuery(value, props, category);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t_this4.setValue('', true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_this4.updateQuery(value, props, category);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// debounce for handling text while typing\n\t\t\t\t\t\t_this4.handleTextChange(value);\n\t\t\t\t\t}\n\t\t\t\t\tif (props.onValueChange) props.onValueChange(value);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t_this4.updateDefaultQuery(value, props);\n\t\t\t\t_this4.updateQuery(value, props, category);\n\t\t\t\tif (props.onValueChange) props.onValueChange(value);\n\t\t\t}\n\t\t};\n\t\t(0, _helper.checkValueChange)(props.componentId, value, props.beforeValueChange, performUpdate);\n\t};\n\n\tthis.handleTextChange = (0, _helper.debounce)(function (value) {\n\t\tif (_this4.props.autosuggest) {\n\t\t\t_this4.updateDefaultQuery(value, _this4.props);\n\t\t} else {\n\t\t\t_this4.updateQuery(value, _this4.props);\n\t\t}\n\t}, this.props.debounce);\n\n\tthis.updateDefaultQuery = function (value, props) {\n\t\tvar category = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this4.state.currentCategory;\n\t\tvar defaultQuery = props.defaultQuery;\n\n\t\tvar defaultQueryOptions = void 0;\n\t\tvar query = CategorySearch.defaultQuery(value, props, category);\n\t\tif (defaultQuery) {\n\t\t\tvar defaultQueryTobeSet = defaultQuery(value, props, category) || {};\n\t\t\tif (defaultQueryTobeSet.query) {\n\t\t\t\tquery = defaultQueryTobeSet.query;\n\t\t\t}\n\t\t\tdefaultQueryOptions = (0, _helper.getOptionsFromQuery)(defaultQueryTobeSet);\n\t\t\t// Update calculated default query in store\n\t\t\t(0, _helper.updateDefaultQuery)(props.componentId, props, value);\n\t\t}\n\t\tprops.setSuggestionsSearchValue(value);\n\t\tvar aggsQuery = _this4.getCombinedAggsQuery();\n\t\tprops.setQueryOptions(_this4.internalComponent, _extends({}, _this4.queryOptions, aggsQuery, defaultQueryOptions));\n\t\tprops.updateQuery({\n\t\t\tcomponentId: _this4.internalComponent,\n\t\t\tquery: query,\n\t\t\tvalue: value,\n\t\t\tcategory: category,\n\t\t\tcomponentType: _constants.componentTypes.categorySearch\n\t\t});\n\t};\n\n\tthis.updateQuery = function (value, props) {\n\t\tvar category = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this4.state.currentCategory;\n\t\tvar customQuery = props.customQuery,\n\t\t    filterLabel = props.filterLabel,\n\t\t    showFilter = props.showFilter,\n\t\t    URLParams = props.URLParams;\n\n\n\t\tvar customQueryOptions = void 0;\n\t\tvar query = CategorySearch.defaultQuery(value, props, category);\n\t\tif (customQuery) {\n\t\t\tvar customQueryTobeSet = customQuery(value, props, category) || {};\n\t\t\tif (customQueryTobeSet.query) {\n\t\t\t\tquery = customQueryTobeSet.query;\n\t\t\t}\n\t\t\tcustomQueryOptions = (0, _helper.getOptionsFromQuery)(customQueryTobeSet);\n\t\t\t(0, _helper.updateCustomQuery)(props.componentId, props, value);\n\t\t}\n\n\t\tif (!_this4.isPending) {\n\t\t\t// execute the query on an uncontrolled component\n\t\t\t// query options should be applied to the source component,\n\t\t\t// not on internal component, hence using `this.props.componentId` here\n\t\t\tprops.setQueryOptions(props.componentId, _extends({}, _this4.queryOptions, customQueryOptions));\n\t\t\tprops.updateQuery({\n\t\t\t\tcomponentId: props.componentId,\n\t\t\t\tquery: query,\n\t\t\t\tvalue: value,\n\t\t\t\tlabel: filterLabel,\n\t\t\t\tshowFilter: showFilter,\n\t\t\t\tURLParams: URLParams,\n\t\t\t\tcomponentType: _constants.componentTypes.categorySearch,\n\t\t\t\tcategory: category\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.handleFocus = function (event) {\n\t\t_this4.setState({\n\t\t\tisOpen: true\n\t\t});\n\t\tif (_this4.props.onFocus) {\n\t\t\t_this4.props.onFocus(event, _this4.triggerQuery);\n\t\t}\n\t};\n\n\tthis.clearValue = function () {\n\t\t_this4.isPending = false;\n\t\t_this4.setValue('', true);\n\t\t_this4.onValueSelected('', _causes2.default.CLEAR_VALUE, null);\n\t};\n\n\tthis.handleKeyDown = function (event, highlightedIndex) {\n\t\tvar _props9 = _this4.props,\n\t\t    value = _props9.value,\n\t\t    onChange = _props9.onChange;\n\n\t\tif (value !== undefined && onChange) {\n\t\t\t_this4.isPending = true;\n\t\t}\n\t\t// if a suggestion was selected, delegate the handling to suggestion handler\n\t\tif (event.key === 'Enter' && highlightedIndex === null) {\n\t\t\t_this4.setValue(event.target.value, true);\n\t\t\tvar currentValue = {\n\t\t\t\tterm: event.target.value,\n\t\t\t\tcategory: null\n\t\t\t};\n\t\t\t_this4.onValueSelected(currentValue, _causes2.default.ENTER_PRESS);\n\t\t}\n\t\tif (_this4.props.onKeyDown) {\n\t\t\t_this4.props.onKeyDown(event, _this4.triggerQuery);\n\t\t}\n\t};\n\n\tthis.onInputChange = function (e) {\n\t\tvar inputValue = e.target.value;\n\n\t\tif (!_this4.state.isOpen) {\n\t\t\t_this4.setState({\n\t\t\t\tisOpen: true\n\t\t\t});\n\t\t}\n\n\t\tvar _props10 = _this4.props,\n\t\t    value = _props10.value,\n\t\t    onChange = _props10.onChange;\n\n\t\tif (value === undefined) {\n\t\t\t_this4.setValue(inputValue);\n\t\t} else if (onChange) {\n\t\t\t_this4.isPending = true;\n\t\t\tvar currentValue = {\n\t\t\t\tterm: inputValue\n\t\t\t\t// category: null,\n\t\t\t};\n\t\t\t// handle caret position in controlled components\n\t\t\t(0, _utils.handleCaretPosition)(e);\n\t\t\tonChange(currentValue, function () {\n\t\t\t\treturn _this4.triggerQuery(currentValue);\n\t\t\t}, e);\n\t\t} else {\n\t\t\t_this4.setValue(inputValue);\n\t\t}\n\t};\n\n\tthis.triggerQuery = function (value) {\n\t\tvar currentValue = value.term,\n\t\t    _value$category2 = value.category,\n\t\t    currentCategory = _value$category2 === undefined ? null : _value$category2;\n\n\t\t_this4.isPending = false;\n\t\t_this4.setValue(currentValue, true, _this4.props, currentCategory);\n\t};\n\n\tthis.onSuggestionSelected = function (suggestion) {\n\t\tvar _props11 = _this4.props,\n\t\t    value = _props11.value,\n\t\t    onChange = _props11.onChange;\n\n\t\tvar currentValue = {\n\t\t\tterm: suggestion.value,\n\t\t\tcategory: suggestion.category || null\n\t\t};\n\t\t_this4.setState({\n\t\t\tisOpen: false\n\t\t});\n\t\tif (value === undefined) {\n\t\t\t_this4.setValue(currentValue.term, true, _this4.props, currentValue.category, _causes2.default.SUGGESTION_SELECT);\n\t\t} else if (onChange) {\n\t\t\t_this4.isPending = false;\n\t\t\tonChange(currentValue, function () {\n\t\t\t\treturn _this4.triggerQuery(currentValue);\n\t\t\t});\n\t\t}\n\t\t// Record analytics for selected suggestions\n\t\t_this4.triggerClickAnalytics(suggestion._click_id);\n\t\t// onValueSelected is user interaction driven:\n\t\t// it should be triggered irrespective of controlled (or)\n\t\t// uncontrolled component behavior\n\t\t_this4.onValueSelected(currentValue, _causes2.default.SUGGESTION_SELECT, suggestion.source);\n\t};\n\n\tthis.onValueSelected = function (selectedValue, cause, source) {\n\t\tvar onValueSelected = _this4.props.onValueSelected;\n\n\t\tif (onValueSelected) {\n\t\t\tonValueSelected(selectedValue, cause, source);\n\t\t}\n\t};\n\n\tthis.handleStateChange = function (changes) {\n\t\tvar isOpen = changes.isOpen,\n\t\t    type = changes.type;\n\n\t\tif (type === _downshift2.default.stateChangeTypes.mouseUp && isOpen !== undefined) {\n\t\t\t_this4.setState({\n\t\t\t\tisOpen: isOpen\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.getBackgroundColor = function (highlightedIndex, index) {\n\t\tvar isDark = _this4.props.themePreset === 'dark';\n\t\tif (isDark) {\n\t\t\treturn highlightedIndex === index ? '#555' : '#424242';\n\t\t}\n\t\treturn highlightedIndex === index ? '#eee' : '#fff';\n\t};\n\n\tthis.handleSearchIconClick = function () {\n\t\tvar currentValue = _this4.state.currentValue;\n\n\t\tif (currentValue.trim()) {\n\t\t\t_this4.isPending = false;\n\t\t\t_this4.setValue(currentValue, true);\n\t\t\t_this4.onValueSelected(currentValue, _causes2.default.SEARCH_ICON_CLICK);\n\t\t}\n\t};\n\n\tthis.handleVoiceResults = function (_ref2) {\n\t\tvar results = _ref2.results;\n\n\t\tif (results && results[0] && results[0].isFinal && results[0][0] && results[0][0].transcript && results[0][0].transcript.trim()) {\n\t\t\t_this4.isPending = false;\n\t\t\t_this4.setValue(results[0][0].transcript.trim(), true);\n\t\t}\n\t};\n\n\tthis.renderIcon = function () {\n\t\tif (_this4.props.showIcon) {\n\t\t\treturn _this4.props.icon || (0, _core.jsx)(_SearchSvg2.default, null);\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.renderCancelIcon = function () {\n\t\tif (_this4.props.showClear) {\n\t\t\treturn _this4.props.clearIcon || (0, _core.jsx)(_CancelSvg2.default, null);\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.renderIcons = function () {\n\t\tvar _props12 = _this4.props,\n\t\t    showIcon = _props12.showIcon,\n\t\t    showClear = _props12.showClear,\n\t\t    renderMic = _props12.renderMic,\n\t\t    getMicInstance = _props12.getMicInstance,\n\t\t    showVoiceSearch = _props12.showVoiceSearch,\n\t\t    iconPosition = _props12.iconPosition,\n\t\t    innerClass = _props12.innerClass;\n\n\n\t\treturn (0, _core.jsx)(\n\t\t\t'div',\n\t\t\tnull,\n\t\t\t(0, _core.jsx)(\n\t\t\t\t_IconGroup2.default,\n\t\t\t\t{ groupPosition: 'right', positionType: 'absolute' },\n\t\t\t\t_this4.state.currentValue && showClear && (0, _core.jsx)(\n\t\t\t\t\t_IconWrapper2.default,\n\t\t\t\t\t{ onClick: _this4.clearValue, showIcon: showIcon, isClearIcon: true },\n\t\t\t\t\t_this4.renderCancelIcon()\n\t\t\t\t),\n\t\t\t\t_this4.shouldMicRender(showVoiceSearch) && (0, _core.jsx)(_Mic2.default, {\n\t\t\t\t\tgetInstance: getMicInstance,\n\t\t\t\t\trender: renderMic,\n\t\t\t\t\tonResult: _this4.handleVoiceResults,\n\t\t\t\t\tclassName: (0, _helper.getClassName)(innerClass, 'mic') || null\n\t\t\t\t}),\n\t\t\t\ticonPosition === 'right' && (0, _core.jsx)(\n\t\t\t\t\t_IconWrapper2.default,\n\t\t\t\t\t{ onClick: _this4.handleSearchIconClick },\n\t\t\t\t\t_this4.renderIcon()\n\t\t\t\t)\n\t\t\t),\n\t\t\t(0, _core.jsx)(\n\t\t\t\t_IconGroup2.default,\n\t\t\t\t{ groupPosition: 'left', positionType: 'absolute' },\n\t\t\t\ticonPosition === 'left' && (0, _core.jsx)(\n\t\t\t\t\t_IconWrapper2.default,\n\t\t\t\t\t{ onClick: _this4.handleSearchIconClick },\n\t\t\t\t\t_this4.renderIcon()\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t};\n\n\tthis.renderNoSuggestion = function () {\n\t\tvar finalSuggestionsList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\t\tvar _props13 = _this4.props,\n\t\t    themePreset = _props13.themePreset,\n\t\t    theme = _props13.theme,\n\t\t    isLoading = _props13.isLoading,\n\t\t    renderNoSuggestion = _props13.renderNoSuggestion,\n\t\t    innerClass = _props13.innerClass,\n\t\t    renderError = _props13.renderError,\n\t\t    error = _props13.error;\n\t\tvar _state = _this4.state,\n\t\t    isOpen = _state.isOpen,\n\t\t    currentValue = _state.currentValue;\n\n\t\tif (renderNoSuggestion && isOpen && !finalSuggestionsList.length && !isLoading && currentValue && !(renderError && error)) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_SuggestionWrapper2.default,\n\t\t\t\t{\n\t\t\t\t\tinnerClass: innerClass,\n\t\t\t\t\tthemePreset: themePreset,\n\t\t\t\t\ttheme: theme,\n\t\t\t\t\tinnerClassName: 'noSuggestion'\n\t\t\t\t},\n\t\t\t\ttypeof renderNoSuggestion === 'function' ? renderNoSuggestion(currentValue) : renderNoSuggestion\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.renderLoader = function () {\n\t\tvar _props14 = _this4.props,\n\t\t    loader = _props14.loader,\n\t\t    isLoading = _props14.isLoading,\n\t\t    themePreset = _props14.themePreset,\n\t\t    theme = _props14.theme,\n\t\t    innerClass = _props14.innerClass;\n\t\tvar currentValue = _this4.state.currentValue;\n\n\t\tif (isLoading && loader && currentValue) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_SuggestionWrapper2.default,\n\t\t\t\t{\n\t\t\t\t\tinnerClass: innerClass,\n\t\t\t\t\tinnerClassName: 'loader',\n\t\t\t\t\ttheme: theme,\n\t\t\t\t\tthemePreset: themePreset\n\t\t\t\t},\n\t\t\t\tloader\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.renderError = function () {\n\t\tvar _props15 = _this4.props,\n\t\t    error = _props15.error,\n\t\t    renderError = _props15.renderError,\n\t\t    themePreset = _props15.themePreset,\n\t\t    theme = _props15.theme,\n\t\t    isLoading = _props15.isLoading,\n\t\t    innerClass = _props15.innerClass;\n\t\tvar currentValue = _this4.state.currentValue;\n\n\t\tif (error && renderError && currentValue && !isLoading) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_SuggestionWrapper2.default,\n\t\t\t\t{\n\t\t\t\t\tinnerClass: innerClass,\n\t\t\t\t\tinnerClassName: 'error',\n\t\t\t\t\ttheme: theme,\n\t\t\t\t\tthemePreset: themePreset\n\t\t\t\t},\n\t\t\t\t(0, _utils.isFunction)(renderError) ? renderError(error) : renderError\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.getComponent = function () {\n\t\tvar downshiftProps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\tvar isQuerySuggestionsRender = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\t\tvar _props16 = _this4.props,\n\t\t    error = _props16.error,\n\t\t    isLoading = _props16.isLoading,\n\t\t    aggregationData = _props16.aggregationData,\n\t\t    promotedResults = _props16.promotedResults,\n\t\t    customData = _props16.customData,\n\t\t    rawData = _props16.rawData;\n\t\tvar currentValue = _this4.state.currentValue;\n\n\t\tvar data = {\n\t\t\terror: error,\n\t\t\tloading: isLoading,\n\t\t\tdownshiftProps: downshiftProps,\n\t\t\tdata: _this4.parsedSuggestions,\n\t\t\tpromotedData: promotedResults || [],\n\t\t\tcustomData: customData || {},\n\t\t\trawData: rawData,\n\t\t\taggregationData: aggregationData || [],\n\t\t\tvalue: currentValue,\n\t\t\tsuggestions: _this4.state.suggestions,\n\t\t\trawSuggestions: _this4.props.suggestions || [],\n\t\t\tcategories: _this4.filteredCategories,\n\t\t\trawCategories: _this4.props.categories,\n\t\t\ttriggerClickAnalytics: _this4.triggerClickAnalytics,\n\t\t\tresultStats: _this4.stats,\n\t\t\t// TODO: Remove in v4\n\t\t\tquerySuggestions: _this4.normalizedPopularSuggestions,\n\t\t\tpopularSuggestions: _this4.normalizedPopularSuggestions,\n\t\t\trecentSearches: _this4.normalizedRecentSearches\n\t\t};\n\t\tif (isQuerySuggestionsRender) {\n\t\t\treturn (0, _utils.getPopularSuggestionsComponent)({\n\t\t\t\tdownshiftProps: downshiftProps,\n\t\t\t\tdata: _this4.normalizedPopularSuggestions,\n\t\t\t\tvalue: currentValue,\n\t\t\t\tloading: isLoading,\n\t\t\t\terror: error\n\t\t\t}, _this4.props);\n\t\t}\n\t\treturn (0, _utils.getComponent)(data, _this4.props);\n\t};\n\n\tthis.triggerClickAnalytics = function (searchPosition, documentId) {\n\t\tvar docId = documentId;\n\t\tif (!docId) {\n\t\t\tvar hitData = _this4.parsedSuggestions.find(function (hit) {\n\t\t\t\treturn hit._click_id === searchPosition;\n\t\t\t});\n\t\t\tif (hitData && hitData.source && hitData.source._id) {\n\t\t\t\tdocId = hitData.source._id;\n\t\t\t}\n\t\t}\n\t\t_this4.props.triggerAnalytics(searchPosition, docId);\n\t};\n\n\tthis.withTriggerQuery = function (func) {\n\t\tif (func) {\n\t\t\treturn function (e) {\n\t\t\t\treturn func(e, function () {\n\t\t\t\t\treturn _this4.triggerQuery(_this4.props.value);\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\t\treturn undefined;\n\t};\n};\n\nCategorySearch.propTypes = {\n\tsetQueryOptions: _types2.default.funcRequired,\n\tupdateQuery: _types2.default.funcRequired,\n\tsetSuggestionsSearchValue: _types2.default.funcRequired,\n\tfetchPopularSuggestions: _types2.default.funcRequired,\n\tdefaultPopularSuggestions: _types2.default.suggestions,\n\toptions: _types2.default.options,\n\tcategories: _types2.default.data,\n\trawData: _types2.default.rawData,\n\tpromotedResults: _types2.default.hits,\n\tcustomData: _types2.default.title,\n\tselectedValue: _types2.default.selectedValue,\n\tselectedCategory: _types2.default.selectedValue,\n\tsuggestions: _types2.default.suggestions,\n\taggregationData: _types2.default.aggregationData,\n\tisLoading: _types2.default.bool,\n\tenableAppbase: _types2.default.bool,\n\ttriggerAnalytics: _types2.default.funcRequired,\n\tsetCustomQuery: _types2.default.funcRequired,\n\tsetDefaultQuery: _types2.default.funcRequired,\n\ttime: _types2.default.number,\n\tsetCustomHighlightOptions: _types2.default.funcRequired,\n\tfetchRecentSearches: _types2.default.funcRequired,\n\trecentSearches: _types2.default.suggestions,\n\t// eslint-disable-next-line\n\terror: _types2.default.any,\n\t// component props\n\tautoFocus: _types2.default.bool,\n\tautosuggest: _types2.default.bool,\n\tenableSynonyms: _types2.default.bool,\n\tenableQuerySuggestions: _types2.default.bool,\n\tdistinctField: _types2.default.string,\n\tdistinctFieldConfig: _types2.default.componentObject,\n\tindex: _types2.default.string,\n\t// TODO: Remove in v4\n\tenablePopularSuggestions: _types2.default.bool,\n\tenableRecentSearches: _types2.default.bool,\n\tqueryString: _types2.default.bool,\n\tbeforeValueChange: _types2.default.func,\n\tcategoryField: _types2.default.string,\n\tclassName: _types2.default.string,\n\tclearIcon: _types2.default.children,\n\tcomponentId: _types2.default.stringRequired,\n\tcustomHighlight: _types2.default.func,\n\tcustomQuery: _types2.default.func,\n\tdefaultQuery: _types2.default.func,\n\tdataField: _types2.default.dataFieldValidator,\n\taggregationField: _types2.default.string,\n\taggregationSize: _types2.default.number,\n\tsize: _types2.default.number,\n\tdebounce: _types2.default.number,\n\tdefaultValue: _types2.default.categorySearchValue,\n\tvalue: _types2.default.categorySearchValue,\n\tdefaultSuggestions: _types2.default.suggestions,\n\tdownShiftProps: _types2.default.props,\n\texcludeFields: _types2.default.excludeFields,\n\tfieldWeights: _types2.default.fieldWeights,\n\tfilterLabel: _types2.default.string,\n\tfuzziness: _types2.default.fuzziness,\n\thighlight: _types2.default.bool,\n\thighlightField: _types2.default.stringOrArray,\n\ticon: _types2.default.children,\n\ticonPosition: _types2.default.iconPosition,\n\tincludeFields: _types2.default.includeFields,\n\tinnerClass: _types2.default.style,\n\tloader: _types2.default.title,\n\tnestedField: _types2.default.string,\n\tonError: _types2.default.func,\n\tonBlur: _types2.default.func,\n\tonFocus: _types2.default.func,\n\tonKeyDown: _types2.default.func,\n\tonKeyPress: _types2.default.func,\n\tonKeyUp: _types2.default.func,\n\tonQueryChange: _types2.default.func,\n\tonSuggestions: _types2.default.func,\n\tonValueChange: _types2.default.func,\n\tonChange: _types2.default.func,\n\tonValueSelected: _types2.default.func,\n\tplaceholder: _types2.default.string,\n\tqueryFormat: _types2.default.queryFormatSearch,\n\tpopularSuggestions: _types2.default.hits,\n\treact: _types2.default.react,\n\trenderError: _types2.default.title,\n\t// TODO: Remove in v4\n\trenderQuerySuggestions: _types2.default.func,\n\trenderPopularSuggestions: _types2.default.func,\n\tparseSuggestion: _types2.default.func,\n\trenderNoSuggestion: _types2.default.title,\n\tshowClear: _types2.default.bool,\n\tshowFilter: _types2.default.bool,\n\tshowVoiceSearch: _types2.default.bool,\n\tshowDistinctSuggestions: _types2.default.bool,\n\tshowIcon: _types2.default.bool,\n\tstyle: _types2.default.style,\n\ttitle: _types2.default.title,\n\ttheme: _types2.default.style,\n\tthemePreset: _types2.default.themePreset,\n\tURLParams: _types2.default.bool,\n\tstrictSelection: _types2.default.bool,\n\tsearchOperators: _types2.default.bool,\n\trecentSearchesIcon: _types2.default.componentObject,\n\tpopularSearchesIcon: _types2.default.componentObject,\n\t// Mic props\n\tgetMicInstance: _types2.default.func,\n\trenderMic: _types2.default.func,\n\tenablePredictiveSuggestions: _types2.default.bool\n};\n\nCategorySearch.defaultProps = {\n\tautosuggest: true,\n\tclassName: null,\n\tdebounce: 0,\n\tdownShiftProps: {},\n\tenableSynonyms: true,\n\tenablePopularSuggestions: false,\n\texcludeFields: [],\n\ticonPosition: 'left',\n\tincludeFields: ['*'],\n\tplaceholder: 'Search',\n\tqueryFormat: 'or',\n\tshowClear: false,\n\tshowFilter: true,\n\tshowIcon: true,\n\tstyle: {},\n\tURLParams: false,\n\tstrictSelection: false,\n\tsearchOperators: false,\n\tshowVoiceSearch: false,\n\tshowDistinctSuggestions: true,\n\tsize: 10,\n\tdefaultPopularSuggestions: [],\n\trecentSearches: [],\n\ttime: 0,\n\tenablePredictiveSuggestions: false\n};\n\n// Add componentType for SSR\nCategorySearch.componentType = _constants.componentTypes.categorySearch;\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n\treturn {\n\t\tcategories: state.aggregations[props.componentId] && state.aggregations[props.componentId][props.categoryField] && state.aggregations[props.componentId][props.categoryField].buckets || [],\n\t\trawData: state.rawData[props.componentId],\n\t\tselectedValue: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value || null,\n\t\tselectedCategory: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].category || null,\n\t\tsuggestions: state.hits[props.componentId] && state.hits[props.componentId].hits || [],\n\t\taggregationData: state.compositeAggregations[props.componentId] || [],\n\t\tthemePreset: state.config.themePreset,\n\t\tisLoading: !!state.isLoading[props.componentId + '_active'],\n\t\terror: state.error[props.componentId],\n\t\tenableAppbase: state.config.enableAppbase,\n\t\tpromotedResults: state.promotedResults[props.componentId],\n\t\tcustomData: state.customData[props.componentId],\n\t\ttime: state.hits[props.componentId] && state.hits[props.componentId].time,\n\t\ttotal: state.hits[props.componentId] && state.hits[props.componentId].total,\n\t\thidden: state.hits[props.componentId] && state.hits[props.componentId].hidden,\n\t\tdefaultPopularSuggestions: state.defaultPopularSuggestions[props.componentId],\n\t\tpopularSuggestions: state.querySuggestions[props.componentId],\n\t\trecentSearches: state.recentSearches.data\n\t};\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n\treturn {\n\t\tsetCustomHighlightOptions: function setCustomHighlightOptions(component, options) {\n\t\t\treturn dispatch((0, _actions.setCustomHighlightOptions)(component, options));\n\t\t},\n\t\tsetCustomQuery: function setCustomQuery(component, query) {\n\t\t\treturn dispatch((0, _actions.setCustomQuery)(component, query));\n\t\t},\n\t\tsetDefaultQuery: function setDefaultQuery(component, query) {\n\t\t\treturn dispatch((0, _actions.setDefaultQuery)(component, query));\n\t\t},\n\t\tsetSuggestionsSearchValue: function setSuggestionsSearchValue(value) {\n\t\t\treturn dispatch((0, _actions.setSuggestionsSearchValue)(value));\n\t\t},\n\t\tsetQueryOptions: function setQueryOptions(component, props, execute) {\n\t\t\treturn dispatch((0, _actions.setQueryOptions)(component, props, execute));\n\t\t},\n\t\tupdateQuery: function updateQuery(updateQueryObject) {\n\t\t\treturn dispatch((0, _actions.updateQuery)(updateQueryObject));\n\t\t},\n\t\ttriggerAnalytics: function triggerAnalytics(searchPosition, documentId) {\n\t\t\treturn dispatch((0, _actions.recordSuggestionClick)(searchPosition, documentId));\n\t\t},\n\t\tfetchPopularSuggestions: function fetchPopularSuggestions(component) {\n\t\t\treturn dispatch((0, _actions.loadPopularSuggestions)(component));\n\t\t},\n\t\tfetchRecentSearches: function fetchRecentSearches(queryOptions) {\n\t\t\treturn dispatch((0, _actions.getRecentSearches)(queryOptions));\n\t\t}\n\t};\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)((0, _emotionTheming.withTheme)(function (props) {\n\treturn (0, _core.jsx)(\n\t\t_ComponentWrapper2.default,\n\t\t_extends({}, props, {\n\t\t\tinternalComponent: true,\n\t\t\tcomponentType: _constants.componentTypes.categorySearch\n\t\t}),\n\t\tfunction () {\n\t\t\treturn (0, _core.jsx)(CategorySearch, _extends({ ref: props.myForwardedRef }, props));\n\t\t}\n\t);\n}));\n\n// eslint-disable-next-line\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n\treturn (0, _core.jsx)(ConnectedComponent, _extends({}, props, { myForwardedRef: ref }));\n});\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, CategorySearch);\n\nForwardRefComponent.displayName = 'CategorySearch';\nexports.default = ForwardRefComponent;"]},"metadata":{},"sourceType":"script"}